{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport axios from 'axios';\nimport apiConfig from '@/config/api.config';\nexport default {\n  name: 'AdminLogin',\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      errorMessage: '',\n      isButtonDisabled: false,\n      isLoading: false\n    };\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.$refs.usernameInput?.focus();\n    });\n\n    // 如果已登录，跳转到后台\n    const isLoggedIn = localStorage.getItem('adminLoggedIn');\n    const token = localStorage.getItem('adminToken');\n    if (isLoggedIn === 'true' && token) {\n      this.$router.push('/admin/dashboard');\n    }\n  },\n  methods: {\n    handleImageError(e) {\n      // 如果头像加载失败，使用默认占位图\n      e.target.src = 'https://via.placeholder.com/150/2196F3/FFFFFF?text=Admin';\n    },\n    async handleLogin() {\n      if (!this.form.username || !this.form.password) {\n        this.errorMessage = '请输入账号和密码';\n        return;\n      }\n      this.isButtonDisabled = true;\n      this.isLoading = true;\n      this.errorMessage = '';\n      try {\n        const loginResponse = await axios.get(apiConfig.user.usernameLogin, {\n          params: {\n            username: this.form.username,\n            password: this.form.password\n          }\n        });\n        if (loginResponse.data.code === 1) {\n          localStorage.setItem('adminToken', 'admin-token-' + Date.now());\n          localStorage.setItem('adminUser', JSON.stringify({\n            username: this.form.username,\n            loginTime: new Date().toISOString()\n          }));\n          localStorage.setItem('adminLoggedIn', 'true');\n          this.$router.push('/admin/dashboard');\n        } else {\n          this.errorMessage = loginResponse.data.message || '账号或密码错误！';\n          this.form.password = '';\n        }\n      } catch (error) {\n        console.error('登录失败:', error);\n        this.errorMessage = '登录请求失败，请检查网络';\n        this.form.password = '';\n      } finally {\n        this.isButtonDisabled = false;\n        this.isLoading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","apiConfig","name","data","form","username","password","errorMessage","isButtonDisabled","isLoading","mounted","$nextTick","$refs","usernameInput","focus","isLoggedIn","localStorage","getItem","token","$router","push","methods","handleImageError","e","target","src","handleLogin","loginResponse","get","user","usernameLogin","params","code","setItem","Date","now","JSON","stringify","loginTime","toISOString","message","error","console"],"sources":["D:\\1_homework_file\\大三上\\软件工程\\项目留档\\1前端开发_我才是真的\\version5.0\\src\\views\\admin\\AdminLogin.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-login-view\">\r\n    <!-- 右上角蓝色圆角装饰 -->\r\n    <div class=\"top-right-decor\"></div>\r\n    \r\n    <!-- 底部波浪装饰 -->\r\n    <div class=\"bottom-wave\">\r\n      <svg viewBox=\"0 0 1440 320\" preserveAspectRatio=\"none\">\r\n        <path fill=\"#2196F3\" fill-opacity=\"1\" d=\"M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z\"></path>\r\n      </svg>\r\n    </div>\r\n\r\n    <!-- 主内容容器 -->\r\n    <div class=\"content-wrapper\">\r\n      <!-- 左侧面板 -->\r\n      <div class=\"left-panel\">\r\n        <div class=\"left-icon\">\r\n          <!-- 简化的用户图标 -->\r\n          <svg viewBox=\"0 0 24 24\" width=\"100\" height=\"100\" fill=\"#2196F3\">\r\n            <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"/>\r\n          </svg>\r\n        </div>\r\n        <h2 class=\"left-title\">ADMIN LOGIN</h2>\r\n        <div class=\"left-shadow\"></div>\r\n      </div>\r\n\r\n      <!-- 右侧登录卡片 -->\r\n      <div class=\"login-card\">\r\n        <div class=\"card-avatar\">\r\n          <img src=\"/admin-avatar.jpg\" alt=\"Admin Avatar\" @error=\"handleImageError\">\r\n        </div>\r\n        \r\n        <h3 class=\"card-title\">管理后台</h3>\r\n\r\n        <div class=\"login-form\">\r\n          <div class=\"input-group\">\r\n            <span class=\"input-icon\">\r\n              <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"#999\"><path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/></svg>\r\n            </span>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"form.username\" \r\n              placeholder=\"username\"\r\n              @keyup.enter=\"handleLogin\"\r\n              ref=\"usernameInput\"\r\n            >\r\n          </div>\r\n\r\n          <div class=\"input-group\">\r\n            <span class=\"input-icon\">\r\n              <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"#999\"><path d=\"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"/></svg>\r\n            </span>\r\n            <input \r\n              type=\"password\" \r\n              v-model=\"form.password\" \r\n              placeholder=\"password\"\r\n              @keyup.enter=\"handleLogin\"\r\n            >\r\n          </div>\r\n\r\n          <div v-if=\"errorMessage\" class=\"error-message\">\r\n            {{ errorMessage }}\r\n          </div>\r\n\r\n          <button \r\n            class=\"login-btn\" \r\n            :disabled=\"isButtonDisabled\"\r\n            @click=\"handleLogin\"\r\n          >\r\n            {{ isButtonDisabled ? '登录中...' : 'LOGIN' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport apiConfig from '@/config/api.config';\r\n\r\nexport default {\r\n  name: 'AdminLogin',\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      errorMessage: '',\r\n      isButtonDisabled: false,\r\n      isLoading: false\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.$refs.usernameInput?.focus();\r\n    });\r\n\r\n    // 如果已登录，跳转到后台\r\n    const isLoggedIn = localStorage.getItem('adminLoggedIn');\r\n    const token = localStorage.getItem('adminToken');\r\n    if (isLoggedIn === 'true' && token) {\r\n      this.$router.push('/admin/dashboard');\r\n    }\r\n  },\r\n  methods: {\r\n    handleImageError(e) {\r\n      // 如果头像加载失败，使用默认占位图\r\n      e.target.src = 'https://via.placeholder.com/150/2196F3/FFFFFF?text=Admin';\r\n    },\r\n    async handleLogin() {\r\n      if (!this.form.username || !this.form.password) {\r\n        this.errorMessage = '请输入账号和密码';\r\n        return;\r\n      }\r\n\r\n      this.isButtonDisabled = true;\r\n      this.isLoading = true;\r\n      this.errorMessage = '';\r\n\r\n      try {\r\n        const loginResponse = await axios.get(apiConfig.user.usernameLogin, {\r\n          params: {\r\n            username: this.form.username,\r\n            password: this.form.password\r\n          }\r\n        });\r\n\r\n        if (loginResponse.data.code === 1) {\r\n          localStorage.setItem('adminToken', 'admin-token-' + Date.now());\r\n          localStorage.setItem('adminUser', JSON.stringify({\r\n            username: this.form.username,\r\n            loginTime: new Date().toISOString()\r\n          }));\r\n          localStorage.setItem('adminLoggedIn', 'true');\r\n          \r\n          this.$router.push('/admin/dashboard');\r\n        } else {\r\n          this.errorMessage = loginResponse.data.message || '账号或密码错误！';\r\n          this.form.password = '';\r\n        }\r\n      } catch (error) {\r\n        console.error('登录失败:', error);\r\n        this.errorMessage = '登录请求失败，请检查网络';\r\n        this.form.password = '';\r\n      } finally {\r\n        this.isButtonDisabled = false;\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-login-view {\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  background-color: #f0f4f8; /* 浅蓝灰色背景 */\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n\r\n/* 右上角蓝色装饰 - 调整为更接近设计图 */\r\n.top-right-decor {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 40vw; /* 响应式宽度 */\r\n  height: 50vh; /* 响应式高度 */\r\n  max-width: 500px;\r\n  max-height: 500px;\r\n  background-color: #2196F3;\r\n  border-bottom-left-radius: 100%;\r\n  z-index: 1;\r\n}\r\n\r\n/* 底部波浪 */\r\n.bottom-wave {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  line-height: 0;\r\n  z-index: 1;\r\n}\r\n\r\n.bottom-wave svg {\r\n  width: 100%;\r\n  height: auto;\r\n  min-height: 150px;\r\n}\r\n\r\n/* 内容容器 */\r\n.content-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 100px; /* 增加间距 */\r\n  z-index: 10; /* 确保在最上层 */\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  padding: 20px;\r\n}\r\n\r\n/* 左侧面板 */\r\n.left-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n.left-icon {\r\n  margin-bottom: 15px;\r\n  filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));\r\n}\r\n\r\n.left-title {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: #333;\r\n  letter-spacing: 1px;\r\n  text-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  margin: 0;\r\n}\r\n\r\n.left-shadow {\r\n  height: 4px;\r\n  width: 100px;\r\n  background: radial-gradient(ellipse at center, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 70%);\r\n  margin-top: 10px;\r\n}\r\n\r\n/* 右侧登录卡片 */\r\n.login-card {\r\n  background: white;\r\n  width: 360px;\r\n  padding: 40px; /* 恢复正常的 padding */\r\n  border-radius: 20px;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); /* 更柔和的阴影 */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  position: relative; \r\n  margin-top: 0; /* 不需要下移 */\r\n}\r\n\r\n.card-avatar {\r\n  /* position: absolute;  移除绝对定位 */\r\n  /* top: -50px; */\r\n  /* left: 50%; */\r\n  /* transform: translateX(-50%); */\r\n  width: 100px;\r\n  height: 100px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  /* border: 5px solid white; */\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\r\n  background: white;\r\n  z-index: 20;\r\n  margin-bottom: 20px; /* 给头像下方增加间距 */\r\n}\r\n\r\n.card-avatar img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.card-title {\r\n  font-size: 22px;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin-bottom: 30px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.login-form {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.input-group {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.input-icon {\r\n  position: absolute;\r\n  left: 15px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2;\r\n}\r\n\r\n.input-group input {\r\n  width: 100%;\r\n  padding: 12px 15px 12px 45px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 25px; /* 胶囊圆角 */\r\n  font-size: 14px;\r\n  outline: none;\r\n  transition: all 0.3s;\r\n  background-color: white;\r\n  color: #333;\r\n}\r\n\r\n.input-group input:focus {\r\n  border-color: #2196F3;\r\n  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);\r\n}\r\n\r\n.input-group input::placeholder {\r\n  color: #bbb;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #0069D9; /* 鲜艳的蓝色 */\r\n  color: white;\r\n  border: none;\r\n  border-radius: 25px; /* 胶囊圆角 */\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  margin-top: 10px;\r\n  box-shadow: 0 4px 15px rgba(0, 105, 217, 0.3);\r\n}\r\n\r\n.login-btn:hover:not(:disabled) {\r\n  background-color: #0056b3;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 6px 20px rgba(0, 105, 217, 0.4);\r\n}\r\n\r\n.login-btn:active:not(:disabled) {\r\n  transform: translateY(1px);\r\n}\r\n\r\n.login-btn:disabled {\r\n  background-color: #ccc;\r\n  box-shadow: none;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.error-message {\r\n  color: #ff3b30;\r\n  font-size: 12px;\r\n  text-align: center;\r\n  background: rgba(255, 59, 48, 0.1);\r\n  padding: 8px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* 响应式适配 */\r\n@media (max-width: 800px) {\r\n  .content-wrapper {\r\n    flex-direction: column;\r\n    gap: 40px;\r\n  }\r\n  \r\n  .left-panel {\r\n    display: none; /* 小屏幕隐藏左侧 */\r\n  }\r\n  \r\n  .top-right-decor {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n}\r\n</style>"],"mappings":";;AA8EA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,SAAQ,MAAO,qBAAqB;AAE3C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,YAAY,EAAE,EAAE;MAChBC,gBAAgB,EAAE,KAAK;MACvBC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,SAAS,CAAC,MAAM;MACnB,IAAI,CAACC,KAAK,CAACC,aAAa,EAAEC,KAAK,CAAC,CAAC;IACnC,CAAC,CAAC;;IAEF;IACA,MAAMC,UAAS,GAAIC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;IACxD,MAAMC,KAAI,GAAIF,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,IAAIF,UAAS,KAAM,MAAK,IAAKG,KAAK,EAAE;MAClC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,kBAAkB,CAAC;IACvC;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,gBAAgBA,CAACC,CAAC,EAAE;MAClB;MACAA,CAAC,CAACC,MAAM,CAACC,GAAE,GAAI,0DAA0D;IAC3E,CAAC;IACD,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI,CAAC,IAAI,CAACtB,IAAI,CAACC,QAAO,IAAK,CAAC,IAAI,CAACD,IAAI,CAACE,QAAQ,EAAE;QAC9C,IAAI,CAACC,YAAW,GAAI,UAAU;QAC9B;MACF;MAEA,IAAI,CAACC,gBAAe,GAAI,IAAI;MAC5B,IAAI,CAACC,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACF,YAAW,GAAI,EAAE;MAEtB,IAAI;QACF,MAAMoB,aAAY,GAAI,MAAM3B,KAAK,CAAC4B,GAAG,CAAC3B,SAAS,CAAC4B,IAAI,CAACC,aAAa,EAAE;UAClEC,MAAM,EAAE;YACN1B,QAAQ,EAAE,IAAI,CAACD,IAAI,CAACC,QAAQ;YAC5BC,QAAQ,EAAE,IAAI,CAACF,IAAI,CAACE;UACtB;QACF,CAAC,CAAC;QAEF,IAAIqB,aAAa,CAACxB,IAAI,CAAC6B,IAAG,KAAM,CAAC,EAAE;UACjChB,YAAY,CAACiB,OAAO,CAAC,YAAY,EAAE,cAAa,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;UAC/DnB,YAAY,CAACiB,OAAO,CAAC,WAAW,EAAEG,IAAI,CAACC,SAAS,CAAC;YAC/ChC,QAAQ,EAAE,IAAI,CAACD,IAAI,CAACC,QAAQ;YAC5BiC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;UACpC,CAAC,CAAC,CAAC;UACHvB,YAAY,CAACiB,OAAO,CAAC,eAAe,EAAE,MAAM,CAAC;UAE7C,IAAI,CAACd,OAAO,CAACC,IAAI,CAAC,kBAAkB,CAAC;QACvC,OAAO;UACL,IAAI,CAACb,YAAW,GAAIoB,aAAa,CAACxB,IAAI,CAACqC,OAAM,IAAK,UAAU;UAC5D,IAAI,CAACpC,IAAI,CAACE,QAAO,GAAI,EAAE;QACzB;MACF,EAAE,OAAOmC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;QAC7B,IAAI,CAAClC,YAAW,GAAI,cAAc;QAClC,IAAI,CAACH,IAAI,CAACE,QAAO,GAAI,EAAE;MACzB,UAAU;QACR,IAAI,CAACE,gBAAe,GAAI,KAAK;QAC7B,IAAI,CAACC,SAAQ,GAAI,KAAK;MACxB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}