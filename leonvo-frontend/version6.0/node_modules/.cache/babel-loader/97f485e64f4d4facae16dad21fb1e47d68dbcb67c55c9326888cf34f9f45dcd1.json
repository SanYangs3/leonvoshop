{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport axios from 'axios';\nimport apiConfig from '@/config/api.config';\nexport default {\n  name: 'SearchView',\n  data() {\n    return {\n      searchKeyword: '',\n      loading: false,\n      selectedCategory: null,\n      selectedPriceRange: null,\n      sortBy: 'default',\n      currentPage: 1,\n      itemsPerPage: 12,\n      // åˆ†ç±»æ•°æ®\n      categories: [{\n        id: 1,\n        name: 'ç¬”è®°æœ¬ç”µè„‘',\n        icon: 'ğŸ’»',\n        count: 45\n      }, {\n        id: 2,\n        name: 'å°å¼ç”µè„‘',\n        icon: 'ğŸ–¥ï¸',\n        count: 23\n      }, {\n        id: 3,\n        name: 'å¹³æ¿ç”µè„‘',\n        icon: 'ğŸ“±',\n        count: 18\n      }, {\n        id: 4,\n        name: 'æ¸¸æˆæœ¬',\n        icon: 'ğŸ®',\n        count: 32\n      }, {\n        id: 5,\n        name: 'å•†åŠ¡æœ¬',\n        icon: 'ğŸ’¼',\n        count: 27\n      }, {\n        id: 6,\n        name: 'è½»è–„æœ¬',\n        icon: 'ğŸ“˜',\n        count: 21\n      }, {\n        id: 7,\n        name: 'å·¥ä½œç«™',\n        icon: 'âš™ï¸',\n        count: 15\n      }, {\n        id: 8,\n        name: 'é…ä»¶å‘¨è¾¹',\n        icon: 'ğŸ§',\n        count: 38\n      }],\n      // ä»·æ ¼åŒºé—´\n      priceRanges: [{\n        id: 1,\n        label: '3000å…ƒä»¥ä¸‹',\n        min: 0,\n        max: 3000\n      }, {\n        id: 2,\n        label: '3000-5000å…ƒ',\n        min: 3000,\n        max: 5000\n      }, {\n        id: 3,\n        label: '5000-8000å…ƒ',\n        min: 5000,\n        max: 8000\n      }, {\n        id: 4,\n        label: '8000å…ƒä»¥ä¸Š',\n        min: 8000,\n        max: Infinity\n      }],\n      // æ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå®é™…åº”è¯¥ä»åç«¯è·å–ï¼‰\n      allProducts: []\n    };\n  },\n  computed: {\n    // åŠ¨æ€è®¡ç®—æ¯ä¸ªåˆ†ç±»çš„å•†å“æ•°é‡\n    categoriesWithCount() {\n      return this.categories.map(category => {\n        // è®¡ç®—å½“å‰åˆ†ç±»çš„å®é™…å•†å“æ•°é‡\n        const count = this.allProducts.filter(product => this.checkCategoryMatch(product, category)).length;\n        return {\n          ...category,\n          count\n        };\n      });\n    },\n    // è¿‡æ»¤åçš„å•†å“\n    filteredProducts() {\n      let products = this.allProducts;\n\n      // å…³é”®è¯æœç´¢\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase().trim();\n        const cleanKeyword = keyword.replace(/[#\\s\\-]/g, ''); // å»é™¤ç‰¹æ®Šå­—ç¬¦\n\n        products = products.filter(product => {\n          try {\n            // 1. ä¼˜å…ˆåŒ¹é…åç§°ã€å“ç‰Œã€æè¿°ã€ç±»å‹\n            const name = (product.name || '').toLowerCase();\n            const brand = (product.brand || '').toLowerCase();\n            const desc = (product.description || '').toLowerCase();\n            const type = (product.type || '').toLowerCase();\n            if (name.includes(keyword) || brand.includes(keyword) || desc.includes(keyword) || type.includes(keyword)) return true;\n\n            // 2. åŒ¹é… ID (pid æˆ– id)\n            const pid = String(product.pid || product.id || '');\n            if (pid === keyword || pid === cleanKeyword) return true;\n\n            // 3. æš´åŠ›å…¨å­—æ®µåŒ¹é… (é˜²æ­¢æ¼ç½‘ä¹‹é±¼)\n            const allStr = JSON.stringify(product).toLowerCase();\n            return allStr.includes(keyword);\n          } catch (e) {\n            return false;\n          }\n        });\n      }\n\n      // åˆ†ç±»ç­›é€‰\n      if (this.selectedCategory) {\n        const category = this.categories.find(c => c.id === this.selectedCategory);\n        if (category) {\n          products = products.filter(product => this.checkCategoryMatch(product, category));\n        }\n      }\n\n      // ä»·æ ¼ç­›é€‰\n      if (this.selectedPriceRange) {\n        const range = this.priceRanges.find(r => r.id === this.selectedPriceRange);\n        if (range) {\n          products = products.filter(product => {\n            const price = Number(product.price);\n            // ç¡®ä¿ä»·æ ¼æ˜¯æœ‰æ•ˆæ•°å­—\n            if (isNaN(price)) return false;\n\n            // å·¦é—­å³å¼€åŒºé—´ [min, max)\n            // æœ€åä¸€ä¸ªåŒºé—´é€šå¸¸æ˜¯ [min, Infinity)\n            if (range.max === Infinity) {\n              return price >= range.min;\n            } else {\n              return price >= range.min && price < range.max;\n            }\n          });\n        }\n      }\n      return products;\n    },\n    // æ’åºåçš„å•†å“\n    sortedProducts() {\n      const products = [...this.filteredProducts];\n      switch (this.sortBy) {\n        case 'price_asc':\n          return products.sort((a, b) => a.price - b.price);\n        case 'price_desc':\n          return products.sort((a, b) => b.price - a.price);\n        case 'newest':\n          // æŒ‰IDé™åºæ¨¡æ‹Ÿæœ€æ–°ä¸Šæ¶\n          return products.sort((a, b) => b.id - a.id);\n        default:\n          // é»˜è®¤æŒ‰è¯„åˆ†é™åºæ’åº\n          return products.sort((a, b) => (b.rating || 0) - (a.rating || 0));\n      }\n    },\n    // åˆ†é¡µç›¸å…³è®¡ç®—\n    paginatedProducts() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.sortedProducts.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredProducts.length / this.itemsPerPage);\n    },\n    visiblePages() {\n      const pages = [];\n      const maxVisible = 5;\n      if (this.totalPages <= maxVisible) {\n        for (let i = 1; i <= this.totalPages; i++) {\n          pages.push(i);\n        }\n      } else {\n        let start = Math.max(1, this.currentPage - 2);\n        let end = Math.min(this.totalPages, start + maxVisible - 1);\n        if (end - start < maxVisible - 1) {\n          start = Math.max(1, end - maxVisible + 1);\n        }\n        for (let i = start; i <= end; i++) {\n          pages.push(i);\n        }\n      }\n      return pages;\n    },\n    showEllipsis() {\n      return this.totalPages > this.visiblePages[this.visiblePages.length - 1];\n    }\n  },\n  mounted() {\n    // ä»è·¯ç”±å‚æ•°è·å–æœç´¢å…³é”®è¯\n    if (this.$route.query.keyword) {\n      this.searchKeyword = this.$route.query.keyword;\n    }\n    this.fetchAllProducts();\n  },\n  watch: {\n    sortBy() {\n      this.currentPage = 1; // æ’åºåå›åˆ°ç¬¬ä¸€é¡µ\n    },\n    searchKeyword() {\n      this.currentPage = 1; // æœç´¢åå›åˆ°ç¬¬ä¸€é¡µ\n    },\n    selectedCategory() {\n      this.currentPage = 1; // åˆ†ç±»ç­›é€‰åå›åˆ°ç¬¬ä¸€é¡µ\n    },\n    selectedPriceRange() {\n      this.currentPage = 1; // ä»·æ ¼ç­›é€‰åå›åˆ°ç¬¬ä¸€é¡µ\n    }\n  },\n  methods: {\n    // ä»åç«¯è·å–æ‰€æœ‰å•†å“\n    async fetchAllProducts() {\n      this.loading = true;\n      try {\n        // ä½¿ç”¨é…ç½®çš„ API åœ°å€\n        const response = await axios.get(apiConfig.product.getAllProducts);\n        console.log('å•†å“APIå“åº”:', response.data); // è°ƒè¯•æ—¥å¿—\n\n        // ä¿®æ­£ï¼šåç«¯è¿”å›çš„æ˜¯ Result å¯¹è±¡ï¼Œæ•°æ®åœ¨ data å­—æ®µä¸­\n        // å…¼å®¹ code ä¸º 1, 200, 0 çš„æƒ…å†µ\n        const isSuccess = response.data.code === 1 || response.data.code === 200 || response.data.code === 0;\n        const productsData = isSuccess && response.data.data ? response.data.data : [];\n\n        // å…¼å®¹æ€§å¤„ç†ï¼šå¤šç§æ•°æ®ç»“æ„æ”¯æŒ\n        let finalData = [];\n        if (Array.isArray(response.data)) {\n          // Case 1: ç›´æ¥è¿”å›æ•°ç»„ [{}, {}]\n          finalData = response.data;\n        } else if (Array.isArray(productsData)) {\n          // Case 2: æ ‡å‡† Result { code: 1, data: [{}, {}] }\n          finalData = productsData;\n        } else if (productsData && Array.isArray(productsData.records)) {\n          // Case 3: åˆ†é¡µç»“æœ { code: 1, data: { records: [{}, {}], total: 100 } }\n          finalData = productsData.records;\n        } else if (response.data && Array.isArray(response.data.records)) {\n          // Case 4: ç›´æ¥è¿”å›åˆ†é¡µå¯¹è±¡ { records: [{}, {}], total: 100 }\n          finalData = response.data.records;\n        }\n        console.log('è§£æåçš„å•†å“åˆ—è¡¨:', finalData);\n        if (!Array.isArray(finalData)) {\n          console.error('åç«¯è¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œæ— æ³•è§£æä¸ºæ•°ç»„:', response.data);\n          // å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼Œå°è¯•ä»å¤‡ç”¨æ¥å£è·å–ï¼ˆæ¯”å¦‚é¦–é¡µæ¨èæ¥å£ï¼Œæˆ–è€…å¹²è„†æ˜¾ç¤ºç©ºï¼‰\n          this.allProducts = [];\n          return;\n        }\n        this.allProducts = finalData.map(product => ({\n          ...product,\n          // å…¼å®¹ä¸åŒå­—æ®µå (id/pid)\n          id: product.pid || product.id,\n          // ç¡®ä¿å…¶ä»–å­—æ®µå­˜åœ¨\n          brand: product.brand || 'è”æƒ³',\n          rating: product.rating || 5.0,\n          description: product.description || '',\n          price: Number(product.price) || 0,\n          // ç¡®ä¿ä»·æ ¼æ˜¯æ•°å­—\n          // å›¾ç‰‡å¤„ç†\n          imageUrl: product.picture || product.imageUrl || '/placeholder-image.jpg'\n        }));\n      } catch (error) {\n        console.error('è·å–å•†å“å¤±è´¥:', error);\n        // å‡ºé”™æ—¶ä¸ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œè€Œæ˜¯æç¤ºé”™è¯¯ï¼Œé¿å…è¯¯å¯¼\n        this.allProducts = [];\n      } finally {\n        this.loading = false;\n      }\n    },\n    // ç”Ÿæˆæ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå¤‡ç”¨ï¼‰\n    generateMockProducts() {\n      const mockProducts = [];\n      const brands = ['è”æƒ³', 'ThinkPad', 'IdeaPad', 'Yoga', 'Legion', 'ThinkBook'];\n      const categories = ['ç¬”è®°æœ¬ç”µè„‘', 'æ¸¸æˆæœ¬', 'å•†åŠ¡æœ¬', 'è½»è–„æœ¬', 'å·¥ä½œç«™'];\n      for (let i = 1; i <= 50; i++) {\n        mockProducts.push({\n          id: i,\n          name: `${brands[i % brands.length]} ${categories[i % categories.length]} ${i}ä»£`,\n          description: 'ç»¿è‰²ç¯ä¿è®¾è®¡ï¼Œé«˜æ€§èƒ½é…ç½®ï¼Œé€‚åˆå„ç§ä½¿ç”¨åœºæ™¯',\n          price: Math.floor(Math.random() * 10000) + 2000,\n          brand: brands[i % brands.length],\n          rating: 4 + Math.random(),\n          imageUrl: `https://picsum.photos/300/200?random=${i}`\n        });\n      }\n      this.allProducts = mockProducts;\n    },\n    // å¤„ç†æœç´¢\n    handleSearch() {\n      if (!this.searchKeyword.trim()) {\n        return;\n      }\n      this.loading = true;\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    // æ¸…ç©ºæœç´¢\n    clearSearch() {\n      this.searchKeyword = '';\n      this.selectedCategory = null;\n      this.selectedPriceRange = null;\n      this.sortBy = 'default';\n    },\n    // æ¸…ç©ºæ‰€æœ‰ç­›é€‰\n    clearAllFilters() {\n      this.selectedCategory = null;\n      this.selectedPriceRange = null;\n      this.sortBy = 'default';\n    },\n    // é€‰æ‹©åˆ†ç±»\n    selectCategory(categoryId) {\n      this.selectedCategory = this.selectedCategory === categoryId ? null : categoryId;\n    },\n    // é€‰æ‹©ä»·æ ¼åŒºé—´\n    selectPriceRange(rangeId) {\n      this.selectedPriceRange = this.selectedPriceRange === rangeId ? null : rangeId;\n    },\n    // åˆ†é¡µæ–¹æ³•\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    goToPage(page) {\n      this.currentPage = page;\n    },\n    // è·³è½¬åˆ°å•†å“è¯¦æƒ…\n    goToDetail(productId) {\n      this.$router.push(`/product/${productId}`);\n    },\n    // æ·»åŠ åˆ°è´­ç‰©è½¦ï¼ˆè°ƒç”¨åç«¯æ¥å£ï¼Œå¸¦ç¡®è®¤å¼¹çª—ï¼‰\n    async addToCart(product) {\n      event.stopPropagation();\n\n      // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      if (!isLoggedIn) {\n        alert('è¯·å…ˆç™»å½•æ‰èƒ½æ·»åŠ åˆ°è´­ç‰©è½¦ï¼');\n        this.$router.push('/login');\n        return;\n      }\n\n      // æ˜¾ç¤ºç¡®è®¤å¼¹çª—\n      if (!confirm(`ç¡®å®šè¦å°†\"${product.name}\"æ·»åŠ åˆ°è´­ç‰©è½¦å—ï¼Ÿ`)) {\n        return;\n      }\n      try {\n        const userId = localStorage.getItem('userId');\n        if (!userId) {\n          alert('æœªæ‰¾åˆ°ç”¨æˆ·IDï¼Œè¯·é‡æ–°ç™»å½•');\n          return;\n        }\n        const productId = product.pid || product.id;\n        const bid = product.bid || 1;\n\n        // å…ˆæ£€æŸ¥è´­ç‰©è½¦ä¸­æ˜¯å¦å·²æœ‰è¯¥å•†å“\n        try {\n          const cartResponse = await axios.get(apiConfig.user.getUserCart(userId));\n          if (cartResponse.data.code === 1 && cartResponse.data.data) {\n            const existingItem = cartResponse.data.data.find(item => item.pid == productId);\n            if (existingItem) {\n              // å¦‚æœå·²å­˜åœ¨ï¼Œæ›´æ–°æ•°é‡\n              const updateResponse = await axios.put(apiConfig.user.updateCartQuantity, {\n                uid: userId,\n                cid: existingItem.cid,\n                quantity: existingItem.quantity + 1\n              });\n              if (updateResponse.data.code === 1) {\n                this.showNotification('âœ…', `${product.name} å·²æ›´æ–°åˆ°è´­ç‰©è½¦ï¼ˆæ•°é‡+1ï¼‰`);\n              } else {\n                this.showNotification('âŒ', updateResponse.data.msg || 'æ›´æ–°å¤±è´¥');\n              }\n              return;\n            }\n          }\n        } catch (error) {\n          console.error('æ£€æŸ¥è´­ç‰©è½¦å¤±è´¥:', error);\n        }\n\n        // å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°å•†å“\n        const response = await axios.post(apiConfig.user.addToCart, {\n          uid: userId,\n          pid: productId,\n          bid: bid,\n          quantity: 1\n        });\n        if (response.data.code === 1) {\n          this.showNotification('âœ…', `${product.name} å·²åŠ å…¥è´­ç‰©è½¦`);\n        } else {\n          this.showNotification('âŒ', response.data.msg || 'æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥');\n        }\n      } catch (error) {\n        console.error('æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥:', error);\n        this.showNotification('âŒ', 'æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\n      }\n    },\n    // æ˜¾ç¤ºé€šçŸ¥\n    showNotification(icon, message) {\n      const notification = document.createElement('div');\n      notification.className = 'search-notification';\n      notification.innerHTML = `\n        <div class=\"notification-content\">\n          <span class=\"notification-icon\">${icon}</span>\n          <span>${message}</span>\n        </div>\n      `;\n      document.body.appendChild(notification);\n      setTimeout(() => {\n        notification.classList.add('show');\n      }, 10);\n      setTimeout(() => {\n        notification.classList.remove('show');\n        setTimeout(() => {\n          document.body.removeChild(notification);\n        }, 300);\n      }, 3000);\n    },\n    // æ£€æŸ¥å•†å“æ˜¯å¦åŒ¹é…åˆ†ç±»\n    checkCategoryMatch(product, category) {\n      const pType = (product.type || '').trim();\n      const pName = (product.name || '').toLowerCase();\n      const pDesc = (product.description || '').toLowerCase();\n      const cName = category.name;\n\n      // 1. ç²¾ç¡®/åŒ…å«åŒ¹é… type (æ•°æ®åº“å­—æ®µä¼˜å…ˆ)\n      if (pType) {\n        // å®Œå…¨åŒ¹é…\n        if (pType === cName) return true;\n\n        // ç‰¹æ®Šæ˜ å°„è§„åˆ™\n        if (cName === 'å°å¼ç”µè„‘' && (pType === 'å°å¼æœº' || pType === 'ä¸€ä½“æœº' || pType === 'åˆ›æ„è®¾è®¡PC')) return true;\n        if (cName === 'å¹³æ¿ç”µè„‘' && (pType === 'å¹³æ¿' || pType.includes('å¹³æ¿') || pType === 'äºŒåˆä¸€å¹³æ¿')) return true;\n        if (cName === 'é…ä»¶å‘¨è¾¹' && (pType === 'å¤–è®¾' || pType === 'é…ä»¶' || pType === 'æ™ºèƒ½å®¶å±…' || pType === 'VR/ARè®¾å¤‡' || pType === 'æ™ºæ…§å±')) return true;\n        if (cName === 'å·¥ä½œç«™' && (pType === 'åˆ›æ„è®¾è®¡PC' || pType.includes('å·¥ä½œç«™'))) return true;\n\n        // åŒ…å«åŒ¹é… (e.g. \"æ¸¸æˆæœ¬\" åŒ¹é… \"æ¸¸æˆæœ¬\")\n        if (pType.includes(cName)) return true;\n      }\n\n      // 2. åŒ¹é…åç§°æˆ–æè¿° (é’ˆå¯¹å•†åŠ¡æœ¬ã€è½»è–„æœ¬è¿™ç§éæ˜¾å¼typeçš„æƒ…å†µ)\n      const keyword = cName.replace('ç”µè„‘', '');\n      if (cName === 'å•†åŠ¡æœ¬') {\n        return pType === 'ç¬”è®°æœ¬ç”µè„‘' && (pName.includes('å•†åŠ¡') || pDesc.includes('å•†åŠ¡') || pName.includes('ThinkPad') || pName.includes('ThinkBook'));\n      }\n      if (cName === 'è½»è–„æœ¬') {\n        return pType === 'ç¬”è®°æœ¬ç”µè„‘' && (pName.includes('è½»è–„') || pDesc.includes('è½»è–„') || pName.includes('Air') || pName.includes('Slim') || pName.includes('X1'));\n      }\n\n      // 3. å…œåº•åŒ¹é…åç§°\n      if (pName.includes(keyword)) return true;\n      return false;\n    }\n  }\n};","map":{"version":3,"names":["axios","apiConfig","name","data","searchKeyword","loading","selectedCategory","selectedPriceRange","sortBy","currentPage","itemsPerPage","categories","id","icon","count","priceRanges","label","min","max","Infinity","allProducts","computed","categoriesWithCount","map","category","filter","product","checkCategoryMatch","length","filteredProducts","products","keyword","toLowerCase","trim","cleanKeyword","replace","brand","desc","description","type","includes","pid","String","allStr","JSON","stringify","e","find","c","range","r","price","Number","isNaN","sortedProducts","sort","a","b","rating","paginatedProducts","start","end","slice","totalPages","Math","ceil","visiblePages","pages","maxVisible","i","push","showEllipsis","mounted","$route","query","fetchAllProducts","watch","methods","response","get","getAllProducts","console","log","isSuccess","code","productsData","finalData","Array","isArray","records","error","imageUrl","picture","generateMockProducts","mockProducts","brands","floor","random","handleSearch","setTimeout","clearSearch","clearAllFilters","selectCategory","categoryId","selectPriceRange","rangeId","prevPage","nextPage","goToPage","page","goToDetail","productId","$router","addToCart","event","stopPropagation","isLoggedIn","localStorage","getItem","alert","confirm","userId","bid","cartResponse","user","getUserCart","existingItem","item","updateResponse","put","updateCartQuantity","uid","cid","quantity","showNotification","msg","post","message","notification","document","createElement","className","innerHTML","body","appendChild","classList","add","remove","removeChild","pType","pName","pDesc","cName"],"sources":["D:\\1_homework_file\\å¤§ä¸‰ä¸Š\\è½¯ä»¶å·¥ç¨‹\\é¡¹ç›®ç•™æ¡£\\1å‰ç«¯å¼€å‘_æˆ‘æ‰æ˜¯çœŸçš„\\version5.0\\src\\views\\user\\SearchView.vue"],"sourcesContent":["<template>\r\n  <div class=\"search-view\">\r\n    <!-- æœç´¢æ¡†éƒ¨åˆ† -->\r\n    <div class=\"search-box\">\r\n      <div class=\"search-header\">\r\n        <h1>å•†å“æœç´¢</h1>\r\n        <p class=\"subtitle\">ç»¿è‰²ç§‘æŠ€ Â· æ™ºèƒ½æœç´¢</p>\r\n      </div>\r\n      <div class=\"search-container\">\r\n        <input\r\n            type=\"text\"\r\n            v-model=\"searchKeyword\"\r\n            placeholder=\"è¯·è¾“å…¥å•†å“åç§°ã€å‹å·æˆ–å…³é”®è¯...\"\r\n            @keyup.enter=\"handleSearch\"\r\n            class=\"search-input\"\r\n        />\r\n        <button @click=\"handleSearch\" class=\"search-button\">\r\n          <span class=\"search-icon\">ğŸ”</span>\r\n          æœç´¢\r\n        </button>\r\n        <button @click=\"clearSearch\" class=\"clear-button\" v-if=\"searchKeyword\">\r\n          <span class=\"clear-icon\">Ã—</span>\r\n          æ¸…ç©º\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æœç´¢å†…å®¹åŒºåŸŸ -->\r\n    <div class=\"search-content\">\r\n      <!-- å·¦ä¾§åˆ†ç±»ç­›é€‰ -->\r\n      <div class=\"category-sidebar\">\r\n        <div class=\"category-header\">\r\n          <h3>å•†å“åˆ†ç±»</h3>\r\n          <div class=\"category-line\"></div>\r\n        </div>\r\n\r\n        <div class=\"category-list\">\r\n          <div\r\n              v-for=\"category in categoriesWithCount\"\r\n              :key=\"category.id\"\r\n              class=\"category-item\"\r\n              :class=\"{ active: selectedCategory === category.id }\"\r\n              @click=\"selectCategory(category.id)\"\r\n          >\r\n            <span class=\"category-icon\">{{ category.icon }}</span>\r\n            <span class=\"category-name\">{{ category.name }}</span>\r\n            <span class=\"category-count\">({{ category.count }})</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ä»·æ ¼ç­›é€‰ -->\r\n        <div class=\"price-filter\">\r\n          <div class=\"filter-header\">\r\n            <h4>ä»·æ ¼åŒºé—´</h4>\r\n            <div class=\"filter-line\"></div>\r\n          </div>\r\n          <div class=\"price-range\">\r\n            <div\r\n                v-for=\"range in priceRanges\"\r\n                :key=\"range.id\"\r\n                class=\"range-item\"\r\n                :class=\"{ active: selectedPriceRange === range.id }\"\r\n                @click=\"selectPriceRange(range.id)\"\r\n            >\r\n              {{ range.label }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- å³ä¾§å•†å“å±•ç¤º -->\r\n      <div class=\"product-results\">\r\n        <!-- æœç´¢ç»“æœä¿¡æ¯ -->\r\n        <div class=\"results-info\">\r\n          <div class=\"info-left\">\r\n            <span class=\"results-count\">\r\n              æ‰¾åˆ° <span class=\"highlight\">{{ filteredProducts.length }}</span> ä»¶å•†å“\r\n            </span>\r\n            <span v-if=\"searchKeyword\" class=\"keyword-info\">\r\n              å…³é”®è¯ï¼š<span class=\"keyword\">{{ searchKeyword }}</span>\r\n            </span>\r\n          </div>\r\n          <div class=\"sort-options\">\r\n            <select v-model=\"sortBy\" class=\"sort-select\">\r\n              <option value=\"default\">é»˜è®¤æ’åº</option>\r\n              <option value=\"price_asc\">ä»·æ ¼ä»ä½åˆ°é«˜</option>\r\n              <option value=\"price_desc\">ä»·æ ¼ä»é«˜åˆ°ä½</option>\r\n              <option value=\"newest\">æœ€æ–°ä¸Šæ¶</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- å•†å“åˆ—è¡¨ -->\r\n        <div v-if=\"loading\" class=\"loading\">\r\n          <div class=\"spinner-container\">\r\n            <div class=\"spinner\"></div>\r\n            <div class=\"spinner-inner\"></div>\r\n          </div>\r\n          <p>æœç´¢ä¸­...</p>\r\n        </div>\r\n\r\n        <div v-else>\r\n          <div v-if=\"filteredProducts.length === 0\" class=\"no-results\">\r\n            <div class=\"empty-state\">\r\n              <div class=\"empty-icon\">ğŸ”</div>\r\n              <h3>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“</h3>\r\n              <p>è¯·å°è¯•å…¶ä»–å…³é”®è¯æˆ–è°ƒæ•´ç­›é€‰æ¡ä»¶</p>\r\n              <button @click=\"clearAllFilters\" class=\"clear-filters-btn\">\r\n                <span class=\"clear-icon\">ğŸ”„</span>\r\n                æ¸…é™¤æ‰€æœ‰ç­›é€‰\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-else class=\"products-grid\">\r\n            <div\r\n                v-for=\"product in sortedProducts\"\r\n                :key=\"product.id\"\r\n                class=\"product-card\"\r\n                @click=\"goToDetail(product.id)\"\r\n            >\r\n              <div class=\"product-tag\">\r\n                <span class=\"tag\">ç»¿è‰²ç§‘æŠ€</span>\r\n                <span class=\"tag\">ç¯ä¿è®¤è¯</span>\r\n              </div>\r\n\r\n              <div class=\"image-container\">\r\n                <img\r\n                    :src=\"product.imageUrl\"\r\n                    :alt=\"product.name\"\r\n                    class=\"product-image\"\r\n                    referrerpolicy=\"no-referrer\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"product-info\">\r\n                <h3>{{ product.name }}</h3>\r\n                <p class=\"description\">{{ product.description || 'ç»¿è‰²ç¯ä¿äº§å“ï¼Œæ€§èƒ½å“è¶Š' }}</p>\r\n\r\n                <div class=\"product-meta\">\r\n                  <div class=\"company-info\">\r\n                    <div class=\"company\">\r\n                      <span class=\"company-icon\">ğŸ·ï¸</span>\r\n                      {{ product.brand || 'è”æƒ³' }}\r\n                    </div>\r\n                    <div class=\"rating\">\r\n                      <span class=\"stars\">â˜…â˜…â˜…â˜…â˜…</span>\r\n                      <span class=\"rating-value\">{{ product.rating || 4.5 }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"price-cart-row\">\r\n                  <div class=\"price-section\">\r\n                    <span class=\"price\">Â¥{{ product.price.toLocaleString() }}</span>\r\n                  </div>\r\n                  <button class=\"cart-button\" @click.stop=\"addToCart(product)\">\r\n                    <span class=\"cart-icon\">ğŸ›’</span>\r\n                    <span class=\"cart-text\">åŠ å…¥è´­ç‰©è½¦</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- åˆ†é¡µ -->\r\n          <div v-if=\"filteredProducts.length > 0\" class=\"pagination\">\r\n            <button\r\n                @click=\"prevPage\"\r\n                :disabled=\"currentPage === 1\"\r\n                class=\"page-btn prev-btn\"\r\n            >\r\n              ä¸Šä¸€é¡µ\r\n            </button>\r\n            <div class=\"page-numbers\">\r\n              <span\r\n                  v-for=\"page in visiblePages\"\r\n                  :key=\"page\"\r\n                  class=\"page-number\"\r\n                  :class=\"{ active: page === currentPage }\"\r\n                  @click=\"goToPage(page)\"\r\n              >\r\n                {{ page }}\r\n              </span>\r\n              <span v-if=\"showEllipsis\" class=\"ellipsis\">...</span>\r\n            </div>\r\n            <button\r\n                @click=\"nextPage\"\r\n                :disabled=\"currentPage === totalPages\"\r\n                class=\"page-btn next-btn\"\r\n            >\r\n              ä¸‹ä¸€é¡µ\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport apiConfig from '@/config/api.config';\r\n\r\nexport default {\r\n  name: 'SearchView',\r\n  data() {\r\n    return {\r\n      searchKeyword: '',\r\n      loading: false,\r\n      selectedCategory: null,\r\n      selectedPriceRange: null,\r\n      sortBy: 'default',\r\n      currentPage: 1,\r\n      itemsPerPage: 12,\r\n\r\n      // åˆ†ç±»æ•°æ®\r\n      categories: [\r\n        { id: 1, name: 'ç¬”è®°æœ¬ç”µè„‘', icon: 'ğŸ’»', count: 45 },\r\n        { id: 2, name: 'å°å¼ç”µè„‘', icon: 'ğŸ–¥ï¸', count: 23 },\r\n        { id: 3, name: 'å¹³æ¿ç”µè„‘', icon: 'ğŸ“±', count: 18 },\r\n        { id: 4, name: 'æ¸¸æˆæœ¬', icon: 'ğŸ®', count: 32 },\r\n        { id: 5, name: 'å•†åŠ¡æœ¬', icon: 'ğŸ’¼', count: 27 },\r\n        { id: 6, name: 'è½»è–„æœ¬', icon: 'ğŸ“˜', count: 21 },\r\n        { id: 7, name: 'å·¥ä½œç«™', icon: 'âš™ï¸', count: 15 },\r\n        { id: 8, name: 'é…ä»¶å‘¨è¾¹', icon: 'ğŸ§', count: 38 }\r\n      ],\r\n\r\n      // ä»·æ ¼åŒºé—´\r\n      priceRanges: [\r\n        { id: 1, label: '3000å…ƒä»¥ä¸‹', min: 0, max: 3000 },\r\n        { id: 2, label: '3000-5000å…ƒ', min: 3000, max: 5000 },\r\n        { id: 3, label: '5000-8000å…ƒ', min: 5000, max: 8000 },\r\n        { id: 4, label: '8000å…ƒä»¥ä¸Š', min: 8000, max: Infinity }\r\n      ],\r\n\r\n      // æ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå®é™…åº”è¯¥ä»åç«¯è·å–ï¼‰\r\n      allProducts: []\r\n    };\r\n  },\r\n  computed: {\r\n    // åŠ¨æ€è®¡ç®—æ¯ä¸ªåˆ†ç±»çš„å•†å“æ•°é‡\r\n    categoriesWithCount() {\r\n      return this.categories.map(category => {\r\n        // è®¡ç®—å½“å‰åˆ†ç±»çš„å®é™…å•†å“æ•°é‡\r\n        const count = this.allProducts.filter(product => \r\n          this.checkCategoryMatch(product, category)\r\n        ).length;\r\n        return { ...category, count };\r\n      });\r\n    },\r\n    \r\n    // è¿‡æ»¤åçš„å•†å“\r\n    filteredProducts() {\r\n      let products = this.allProducts;\r\n\r\n      // å…³é”®è¯æœç´¢\r\n      if (this.searchKeyword) {\r\n        const keyword = this.searchKeyword.toLowerCase().trim();\r\n        const cleanKeyword = keyword.replace(/[#\\s\\-]/g, ''); // å»é™¤ç‰¹æ®Šå­—ç¬¦\r\n\r\n        products = products.filter(product => {\r\n          try {\r\n            // 1. ä¼˜å…ˆåŒ¹é…åç§°ã€å“ç‰Œã€æè¿°ã€ç±»å‹\r\n            const name = (product.name || '').toLowerCase();\r\n            const brand = (product.brand || '').toLowerCase();\r\n            const desc = (product.description || '').toLowerCase();\r\n            const type = (product.type || '').toLowerCase();\r\n            \r\n            if (name.includes(keyword) || brand.includes(keyword) || desc.includes(keyword) || type.includes(keyword)) return true;\r\n            \r\n            // 2. åŒ¹é… ID (pid æˆ– id)\r\n            const pid = String(product.pid || product.id || '');\r\n            if (pid === keyword || pid === cleanKeyword) return true;\r\n\r\n            // 3. æš´åŠ›å…¨å­—æ®µåŒ¹é… (é˜²æ­¢æ¼ç½‘ä¹‹é±¼)\r\n            const allStr = JSON.stringify(product).toLowerCase();\r\n            return allStr.includes(keyword);\r\n          } catch (e) {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n      // åˆ†ç±»ç­›é€‰\r\n      if (this.selectedCategory) {\r\n        const category = this.categories.find(c => c.id === this.selectedCategory);\r\n        if (category) {\r\n          products = products.filter(product =>\r\n              this.checkCategoryMatch(product, category)\r\n          );\r\n        }\r\n      }\r\n\r\n      // ä»·æ ¼ç­›é€‰\r\n      if (this.selectedPriceRange) {\r\n        const range = this.priceRanges.find(r => r.id === this.selectedPriceRange);\r\n        if (range) {\r\n          products = products.filter(product => {\r\n            const price = Number(product.price);\r\n            // ç¡®ä¿ä»·æ ¼æ˜¯æœ‰æ•ˆæ•°å­—\r\n            if (isNaN(price)) return false;\r\n            \r\n            // å·¦é—­å³å¼€åŒºé—´ [min, max)\r\n            // æœ€åä¸€ä¸ªåŒºé—´é€šå¸¸æ˜¯ [min, Infinity)\r\n            if (range.max === Infinity) {\r\n                return price >= range.min;\r\n            } else {\r\n                return price >= range.min && price < range.max;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      return products;\r\n    },\r\n\r\n    // æ’åºåçš„å•†å“\r\n    sortedProducts() {\r\n      const products = [...this.filteredProducts];\r\n\r\n      switch (this.sortBy) {\r\n        case 'price_asc':\r\n          return products.sort((a, b) => a.price - b.price);\r\n        case 'price_desc':\r\n          return products.sort((a, b) => b.price - a.price);\r\n        case 'newest':\r\n          // æŒ‰IDé™åºæ¨¡æ‹Ÿæœ€æ–°ä¸Šæ¶\r\n          return products.sort((a, b) => b.id - a.id);\r\n        default:\r\n          // é»˜è®¤æŒ‰è¯„åˆ†é™åºæ’åº\r\n          return products.sort((a, b) => (b.rating || 0) - (a.rating || 0));\r\n      }\r\n    },\r\n\r\n    // åˆ†é¡µç›¸å…³è®¡ç®—\r\n    paginatedProducts() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      return this.sortedProducts.slice(start, end);\r\n    },\r\n\r\n    totalPages() {\r\n      return Math.ceil(this.filteredProducts.length / this.itemsPerPage);\r\n    },\r\n\r\n    visiblePages() {\r\n      const pages = [];\r\n      const maxVisible = 5;\r\n\r\n      if (this.totalPages <= maxVisible) {\r\n        for (let i = 1; i <= this.totalPages; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        let start = Math.max(1, this.currentPage - 2);\r\n        let end = Math.min(this.totalPages, start + maxVisible - 1);\r\n\r\n        if (end - start < maxVisible - 1) {\r\n          start = Math.max(1, end - maxVisible + 1);\r\n        }\r\n\r\n        for (let i = start; i <= end; i++) {\r\n          pages.push(i);\r\n        }\r\n      }\r\n\r\n      return pages;\r\n    },\r\n\r\n    showEllipsis() {\r\n      return this.totalPages > this.visiblePages[this.visiblePages.length - 1];\r\n    }\r\n  },\r\n  mounted() {\r\n    // ä»è·¯ç”±å‚æ•°è·å–æœç´¢å…³é”®è¯\r\n    if (this.$route.query.keyword) {\r\n      this.searchKeyword = this.$route.query.keyword;\r\n    }\r\n\r\n    this.fetchAllProducts();\r\n  },\r\n  watch: {\r\n    sortBy() {\r\n      this.currentPage = 1; // æ’åºåå›åˆ°ç¬¬ä¸€é¡µ\r\n    },\r\n    searchKeyword() {\r\n      this.currentPage = 1; // æœç´¢åå›åˆ°ç¬¬ä¸€é¡µ\r\n    },\r\n    selectedCategory() {\r\n      this.currentPage = 1; // åˆ†ç±»ç­›é€‰åå›åˆ°ç¬¬ä¸€é¡µ\r\n    },\r\n    selectedPriceRange() {\r\n      this.currentPage = 1; // ä»·æ ¼ç­›é€‰åå›åˆ°ç¬¬ä¸€é¡µ\r\n    }\r\n  },\r\n  methods: {\r\n    // ä»åç«¯è·å–æ‰€æœ‰å•†å“\r\n    async fetchAllProducts() {\r\n      this.loading = true;\r\n      try {\r\n        // ä½¿ç”¨é…ç½®çš„ API åœ°å€\r\n        const response = await axios.get(apiConfig.product.getAllProducts);\r\n        \r\n        console.log('å•†å“APIå“åº”:', response.data); // è°ƒè¯•æ—¥å¿—\r\n        \r\n        // ä¿®æ­£ï¼šåç«¯è¿”å›çš„æ˜¯ Result å¯¹è±¡ï¼Œæ•°æ®åœ¨ data å­—æ®µä¸­\r\n        // å…¼å®¹ code ä¸º 1, 200, 0 çš„æƒ…å†µ\r\n        const isSuccess = response.data.code === 1 || response.data.code === 200 || response.data.code === 0;\r\n        const productsData = (isSuccess && response.data.data) ? response.data.data : [];\r\n        \r\n        // å…¼å®¹æ€§å¤„ç†ï¼šå¤šç§æ•°æ®ç»“æ„æ”¯æŒ\r\n        let finalData = [];\r\n        \r\n        if (Array.isArray(response.data)) {\r\n            // Case 1: ç›´æ¥è¿”å›æ•°ç»„ [{}, {}]\r\n            finalData = response.data;\r\n        } else if (Array.isArray(productsData)) {\r\n            // Case 2: æ ‡å‡† Result { code: 1, data: [{}, {}] }\r\n            finalData = productsData;\r\n        } else if (productsData && Array.isArray(productsData.records)) {\r\n            // Case 3: åˆ†é¡µç»“æœ { code: 1, data: { records: [{}, {}], total: 100 } }\r\n            finalData = productsData.records;\r\n        } else if (response.data && Array.isArray(response.data.records)) {\r\n            // Case 4: ç›´æ¥è¿”å›åˆ†é¡µå¯¹è±¡ { records: [{}, {}], total: 100 }\r\n            finalData = response.data.records;\r\n        }\r\n        \r\n        console.log('è§£æåçš„å•†å“åˆ—è¡¨:', finalData);\r\n        \r\n        if (!Array.isArray(finalData)) {\r\n           console.error('åç«¯è¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œæ— æ³•è§£æä¸ºæ•°ç»„:', response.data);\r\n           // å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼Œå°è¯•ä»å¤‡ç”¨æ¥å£è·å–ï¼ˆæ¯”å¦‚é¦–é¡µæ¨èæ¥å£ï¼Œæˆ–è€…å¹²è„†æ˜¾ç¤ºç©ºï¼‰\r\n           this.allProducts = [];\r\n           return;\r\n        }\r\n\r\n        this.allProducts = finalData.map(product => ({\r\n          ...product,\r\n          // å…¼å®¹ä¸åŒå­—æ®µå (id/pid)\r\n          id: product.pid || product.id,\r\n          // ç¡®ä¿å…¶ä»–å­—æ®µå­˜åœ¨\r\n          brand: product.brand || 'è”æƒ³',\r\n          rating: product.rating || 5.0,\r\n          description: product.description || '',\r\n          price: Number(product.price) || 0, // ç¡®ä¿ä»·æ ¼æ˜¯æ•°å­—\r\n          // å›¾ç‰‡å¤„ç†\r\n          imageUrl: product.picture || product.imageUrl || '/placeholder-image.jpg'\r\n        }));\r\n      } catch (error) {\r\n        console.error('è·å–å•†å“å¤±è´¥:', error);\r\n        // å‡ºé”™æ—¶ä¸ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œè€Œæ˜¯æç¤ºé”™è¯¯ï¼Œé¿å…è¯¯å¯¼\r\n        this.allProducts = [];\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // ç”Ÿæˆæ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå¤‡ç”¨ï¼‰\r\n    generateMockProducts() {\r\n      const mockProducts = [];\r\n      const brands = ['è”æƒ³', 'ThinkPad', 'IdeaPad', 'Yoga', 'Legion', 'ThinkBook'];\r\n      const categories = ['ç¬”è®°æœ¬ç”µè„‘', 'æ¸¸æˆæœ¬', 'å•†åŠ¡æœ¬', 'è½»è–„æœ¬', 'å·¥ä½œç«™'];\r\n\r\n      for (let i = 1; i <= 50; i++) {\r\n        mockProducts.push({\r\n          id: i,\r\n          name: `${brands[i % brands.length]} ${categories[i % categories.length]} ${i}ä»£`,\r\n          description: 'ç»¿è‰²ç¯ä¿è®¾è®¡ï¼Œé«˜æ€§èƒ½é…ç½®ï¼Œé€‚åˆå„ç§ä½¿ç”¨åœºæ™¯',\r\n          price: Math.floor(Math.random() * 10000) + 2000,\r\n          brand: brands[i % brands.length],\r\n          rating: 4 + Math.random(),\r\n          imageUrl: `https://picsum.photos/300/200?random=${i}`\r\n        });\r\n      }\r\n\r\n      this.allProducts = mockProducts;\r\n    },\r\n\r\n    // å¤„ç†æœç´¢\r\n    handleSearch() {\r\n      if (!this.searchKeyword.trim()) {\r\n        return;\r\n      }\r\n      this.loading = true;\r\n      setTimeout(() => {\r\n        this.loading = false;\r\n      }, 500);\r\n    },\r\n\r\n    // æ¸…ç©ºæœç´¢\r\n    clearSearch() {\r\n      this.searchKeyword = '';\r\n      this.selectedCategory = null;\r\n      this.selectedPriceRange = null;\r\n      this.sortBy = 'default';\r\n    },\r\n\r\n    // æ¸…ç©ºæ‰€æœ‰ç­›é€‰\r\n    clearAllFilters() {\r\n      this.selectedCategory = null;\r\n      this.selectedPriceRange = null;\r\n      this.sortBy = 'default';\r\n    },\r\n\r\n    // é€‰æ‹©åˆ†ç±»\r\n    selectCategory(categoryId) {\r\n      this.selectedCategory = this.selectedCategory === categoryId ? null : categoryId;\r\n    },\r\n\r\n    // é€‰æ‹©ä»·æ ¼åŒºé—´\r\n    selectPriceRange(rangeId) {\r\n      this.selectedPriceRange = this.selectedPriceRange === rangeId ? null : rangeId;\r\n    },\r\n\r\n    // åˆ†é¡µæ–¹æ³•\r\n    prevPage() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage--;\r\n      }\r\n    },\r\n\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.currentPage++;\r\n      }\r\n    },\r\n\r\n    goToPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n\r\n    // è·³è½¬åˆ°å•†å“è¯¦æƒ…\r\n    goToDetail(productId) {\r\n      this.$router.push(`/product/${productId}`);\r\n    },\r\n\r\n    // æ·»åŠ åˆ°è´­ç‰©è½¦ï¼ˆè°ƒç”¨åç«¯æ¥å£ï¼Œå¸¦ç¡®è®¤å¼¹çª—ï¼‰\r\n    async addToCart(product) {\r\n      event.stopPropagation();\r\n\r\n      // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•\r\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\r\n      if (!isLoggedIn) {\r\n        alert('è¯·å…ˆç™»å½•æ‰èƒ½æ·»åŠ åˆ°è´­ç‰©è½¦ï¼');\r\n        this.$router.push('/login');\r\n        return;\r\n      }\r\n\r\n      // æ˜¾ç¤ºç¡®è®¤å¼¹çª—\r\n      if (!confirm(`ç¡®å®šè¦å°†\"${product.name}\"æ·»åŠ åˆ°è´­ç‰©è½¦å—ï¼Ÿ`)) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const userId = localStorage.getItem('userId');\r\n        if (!userId) {\r\n          alert('æœªæ‰¾åˆ°ç”¨æˆ·IDï¼Œè¯·é‡æ–°ç™»å½•');\r\n          return;\r\n        }\r\n\r\n        const productId = product.pid || product.id;\r\n        const bid = product.bid || 1;\r\n\r\n        // å…ˆæ£€æŸ¥è´­ç‰©è½¦ä¸­æ˜¯å¦å·²æœ‰è¯¥å•†å“\r\n        try {\r\n          const cartResponse = await axios.get(apiConfig.user.getUserCart(userId));\r\n          if (cartResponse.data.code === 1 && cartResponse.data.data) {\r\n            const existingItem = cartResponse.data.data.find(item => item.pid == productId);\r\n            if (existingItem) {\r\n              // å¦‚æœå·²å­˜åœ¨ï¼Œæ›´æ–°æ•°é‡\r\n              const updateResponse = await axios.put(apiConfig.user.updateCartQuantity, {\r\n                uid: userId,\r\n                cid: existingItem.cid,\r\n                quantity: existingItem.quantity + 1\r\n              });\r\n              if (updateResponse.data.code === 1) {\r\n                this.showNotification('âœ…', `${product.name} å·²æ›´æ–°åˆ°è´­ç‰©è½¦ï¼ˆæ•°é‡+1ï¼‰`);\r\n              } else {\r\n                this.showNotification('âŒ', updateResponse.data.msg || 'æ›´æ–°å¤±è´¥');\r\n              }\r\n              return;\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('æ£€æŸ¥è´­ç‰©è½¦å¤±è´¥:', error);\r\n        }\r\n\r\n        // å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°å•†å“\r\n        const response = await axios.post(apiConfig.user.addToCart, {\r\n          uid: userId,\r\n          pid: productId,\r\n          bid: bid,\r\n          quantity: 1\r\n        });\r\n\r\n        if (response.data.code === 1) {\r\n          this.showNotification('âœ…', `${product.name} å·²åŠ å…¥è´­ç‰©è½¦`);\r\n        } else {\r\n          this.showNotification('âŒ', response.data.msg || 'æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥');\r\n        }\r\n      } catch (error) {\r\n        console.error('æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥:', error);\r\n        this.showNotification('âŒ', 'æ·»åŠ åˆ°è´­ç‰©è½¦å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\r\n      }\r\n    },\r\n\r\n    // æ˜¾ç¤ºé€šçŸ¥\r\n    showNotification(icon, message) {\r\n      const notification = document.createElement('div');\r\n      notification.className = 'search-notification';\r\n      notification.innerHTML = `\r\n        <div class=\"notification-content\">\r\n          <span class=\"notification-icon\">${icon}</span>\r\n          <span>${message}</span>\r\n        </div>\r\n      `;\r\n      document.body.appendChild(notification);\r\n\r\n      setTimeout(() => {\r\n        notification.classList.add('show');\r\n      }, 10);\r\n\r\n      setTimeout(() => {\r\n        notification.classList.remove('show');\r\n        setTimeout(() => {\r\n          document.body.removeChild(notification);\r\n        }, 300);\r\n      }, 3000);\r\n    },\r\n\r\n    // æ£€æŸ¥å•†å“æ˜¯å¦åŒ¹é…åˆ†ç±»\r\n    checkCategoryMatch(product, category) {\r\n      const pType = (product.type || '').trim();\r\n      const pName = (product.name || '').toLowerCase();\r\n      const pDesc = (product.description || '').toLowerCase();\r\n      const cName = category.name;\r\n      \r\n      // 1. ç²¾ç¡®/åŒ…å«åŒ¹é… type (æ•°æ®åº“å­—æ®µä¼˜å…ˆ)\r\n      if (pType) {\r\n          // å®Œå…¨åŒ¹é…\r\n          if (pType === cName) return true;\r\n          \r\n          // ç‰¹æ®Šæ˜ å°„è§„åˆ™\r\n          if (cName === 'å°å¼ç”µè„‘' && (pType === 'å°å¼æœº' || pType === 'ä¸€ä½“æœº' || pType === 'åˆ›æ„è®¾è®¡PC')) return true;\r\n          if (cName === 'å¹³æ¿ç”µè„‘' && (pType === 'å¹³æ¿' || pType.includes('å¹³æ¿') || pType === 'äºŒåˆä¸€å¹³æ¿')) return true;\r\n          if (cName === 'é…ä»¶å‘¨è¾¹' && (pType === 'å¤–è®¾' || pType === 'é…ä»¶' || pType === 'æ™ºèƒ½å®¶å±…' || pType === 'VR/ARè®¾å¤‡' || pType === 'æ™ºæ…§å±')) return true;\r\n          if (cName === 'å·¥ä½œç«™' && (pType === 'åˆ›æ„è®¾è®¡PC' || pType.includes('å·¥ä½œç«™'))) return true;\r\n          \r\n          // åŒ…å«åŒ¹é… (e.g. \"æ¸¸æˆæœ¬\" åŒ¹é… \"æ¸¸æˆæœ¬\")\r\n          if (pType.includes(cName)) return true;\r\n      }\r\n      \r\n      // 2. åŒ¹é…åç§°æˆ–æè¿° (é’ˆå¯¹å•†åŠ¡æœ¬ã€è½»è–„æœ¬è¿™ç§éæ˜¾å¼typeçš„æƒ…å†µ)\r\n      const keyword = cName.replace('ç”µè„‘', '');\r\n      \r\n      if (cName === 'å•†åŠ¡æœ¬') {\r\n          return pType === 'ç¬”è®°æœ¬ç”µè„‘' && (pName.includes('å•†åŠ¡') || pDesc.includes('å•†åŠ¡') || pName.includes('ThinkPad') || pName.includes('ThinkBook'));\r\n      }\r\n      \r\n      if (cName === 'è½»è–„æœ¬') {\r\n          return pType === 'ç¬”è®°æœ¬ç”µè„‘' && (pName.includes('è½»è–„') || pDesc.includes('è½»è–„') || pName.includes('Air') || pName.includes('Slim') || pName.includes('X1'));\r\n      }\r\n\r\n      // 3. å…œåº•åŒ¹é…åç§°\r\n      if (pName.includes(keyword)) return true;\r\n      \r\n      return false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-view {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  min-height: calc(100vh - 200px);\r\n}\r\n\r\n/* æœç´¢æ¡†éƒ¨åˆ† */\r\n.search-box {\r\n  background: linear-gradient(135deg, #1565c0 0%, #1976d2 50%, #2196f3 100%);\r\n  color: white;\r\n  padding: 40px 20px;\r\n  border-radius: 0;\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n  box-shadow: 0 8px 32px rgba(21, 101, 192, 0.2);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.search-box::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" opacity=\"0.1\"><path fill=\"white\" d=\"M50,50 Q60,30 80,50 T100,50 Q90,70 70,50 T50,50Z\"/></svg>');\r\n  background-size: 200px;\r\n}\r\n\r\n.search-header h1 {\r\n  margin: 0 0 10px 0;\r\n  font-size: 36px;\r\n  font-weight: 700;\r\n  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.subtitle {\r\n  font-size: 16px;\r\n  opacity: 0.9;\r\n  margin-bottom: 30px;\r\n  font-weight: 300;\r\n}\r\n\r\n.search-container {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  gap: 15px;\r\n  position: relative; /* ç¡®ä¿åœ¨èƒŒæ™¯ä¹‹ä¸Š */\r\n  z-index: 5;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  padding: 16px 25px;\r\n  border: none;\r\n  border-radius: 0;\r\n  font-size: 16px;\r\n  outline: none;\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.1);\r\n  transition: all 0.3s ease;\r\n  background: rgba(255,255,255,0.95);\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.search-input:focus {\r\n  border-color: #90caf9;\r\n  box-shadow: 0 4px 25px rgba(144, 202, 249, 0.4);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.search-button {\r\n  background: linear-gradient(135deg, rgba(144, 202, 249, 0.4) 0%, rgb(66, 133, 244) 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 16px 30px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  box-shadow: 0 4px 20px rgba(144, 202, 249, 0.4);\r\n}\r\n\r\n.search-button:hover {\r\n  background: linear-gradient(135deg, rgba(144, 202, 249, 0.4) 0%, #4285f4 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 25px rgba(144, 202, 249, 0.4);\r\n}\r\n\r\n.search-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.clear-button {\r\n  background: linear-gradient(135deg, #78909c 0%, #546e7a 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 16px 25px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.clear-button:hover {\r\n  background: linear-gradient(135deg, #90a4ae 0%, #607d8b 100%);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.clear-icon {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n}\r\n\r\n/* æœç´¢å†…å®¹åŒºåŸŸ */\r\n.search-content {\r\n  display: flex;\r\n  gap: 30px;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* å·¦ä¾§åˆ†ç±»æ  */\r\n.category-sidebar {\r\n  width: 260px; /* ç¨å¾®å‡å°å®½åº¦ */\r\n  flex-shrink: 0;\r\n  background: linear-gradient(135deg, #ffffff 0%, #f0f7ff 100%);\r\n  border-radius: 0;\r\n  padding: 15px; /* å‡å°å†…è¾¹è· */\r\n  box-shadow: 0 8px 30px rgba(33, 150, 243, 0.1);\r\n  border: 2px solid #bbdefb;\r\n  position: sticky;\r\n  top: 20px;\r\n  align-self: flex-start;\r\n  /* ç§»é™¤å›ºå®šé«˜åº¦å’Œæ»šåŠ¨æ¡ */\r\n  /* max-height: calc(100vh - 200px); */\r\n  /* overflow-y: auto; */\r\n}\r\n\r\n.category-header {\r\n  margin-bottom: 15px; /* å‡å°é—´è· */\r\n  position: relative;\r\n}\r\n\r\n.category-header h3 {\r\n  color: #1565c0;\r\n  margin: 0 0 10px 0;\r\n  font-size: 18px; /* å‡å°æ ‡é¢˜å­—å· */\r\n  font-weight: 700;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.category-line {\r\n  width: 60px;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #2196f3, #90caf9);\r\n  border-radius: 0;\r\n}\r\n\r\n.category-list {\r\n  margin-bottom: 20px; /* å‡å°é—´è· */\r\n}\r\n\r\n.category-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 14px; /* å‡å°å†…è¾¹è· */\r\n  margin-bottom: 8px; /* å‡å°é—´è· */\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  border: 2px solid transparent;\r\n  background: #e3f2fd;\r\n}\r\n\r\n.category-item:hover {\r\n  background: #bbdefb;\r\n  transform: translateX(5px);\r\n  border-color: #90caf9;\r\n}\r\n\r\n.category-item.active {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  border-color: #1565c0;\r\n  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);\r\n}\r\n\r\n.category-item.active .category-icon,\r\n.category-item.active .category-name,\r\n.category-item.active .category-count {\r\n  color: white;\r\n}\r\n\r\n.category-icon {\r\n  font-size: 16px; /* å‡å°å›¾æ ‡ */\r\n  margin-right: 10px;\r\n  color: #2196f3;\r\n}\r\n\r\n.category-name {\r\n  flex: 1;\r\n  font-weight: 600;\r\n  color: #333;\r\n  font-size: 14px; /* æ˜ç¡®å­—ä½“å¤§å° */\r\n}\r\n\r\n.category-count {\r\n  font-size: 12px;\r\n  color: #81c784;\r\n  font-weight: 600;\r\n}\r\n\r\n/* ç­›é€‰å™¨ */\r\n.filter-header {\r\n  margin-bottom: 15px; /* å‡å°é—´è· */\r\n}\r\n\r\n.filter-header h4 {\r\n  color: #1b5e20;\r\n  margin: 0 0 8px 0;\r\n  font-size: 16px; /* å‡å°æ ‡é¢˜ */\r\n  font-weight: 600;\r\n}\r\n\r\n.filter-line {\r\n  width: 40px;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, #90caf9, #bbdefb);\r\n  border-radius: 0;\r\n}\r\n\r\n.price-filter,\r\n.brand-filter {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.price-range {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px; /* å‡å°é—´è· */\r\n}\r\n\r\n.range-item {\r\n  padding: 8px 12px; /* å‡å°å†…è¾¹è· */\r\n  border-radius: 0;\r\n  background: #f0f7ff;\r\n  border: 2px solid #bbdefb;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-size: 13px; /* å‡å°å­—ä½“ */\r\n  font-weight: 500;\r\n  color: #555;\r\n  text-align: center;\r\n}\r\n\r\n.range-item:hover {\r\n  background: #e3f2fd;\r\n  transform: translateX(3px);\r\n}\r\n\r\n.range-item.active {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  border-color: #1565c0;\r\n  box-shadow: 0 3px 10px rgba(33, 150, 243, 0.2);\r\n}\r\n\r\n.brand-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.brand-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  background: #f0f7ff;\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.brand-item:hover {\r\n  background: #e3f2fd;\r\n  transform: translateX(3px);\r\n}\r\n\r\n.brand-item.active {\r\n  background: #e3f2fd;\r\n  border-color: #90caf9;\r\n}\r\n\r\n.brand-checkbox {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #90caf9;\r\n  border-radius: 0;\r\n  margin-right: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.brand-item.active .brand-checkbox {\r\n  background: #2196f3;\r\n  border-color: #2196f3;\r\n}\r\n\r\n.check-icon {\r\n  color: white;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.brand-name {\r\n  font-size: 14px;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n/* å³ä¾§å•†å“ç»“æœåŒºåŸŸ */\r\n.product-results {\r\n  flex: 1;\r\n  min-width: 0; /* é˜²æ­¢flexå…ƒç´ æº¢å‡º */\r\n}\r\n\r\n.results-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #ffffff 0%, #f0f7ff 100%);\r\n  border-radius: 0;\r\n  margin-bottom: 25px;\r\n  border: 2px solid #bbdefb;\r\n  box-shadow: 0 5px 20px rgba(33, 150, 243, 0.1);\r\n}\r\n\r\n.info-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.results-count {\r\n  font-size: 18px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.highlight {\r\n  color: #2196f3;\r\n  font-weight: 800;\r\n  font-size: 24px;\r\n}\r\n\r\n.keyword-info {\r\n  background: rgba(33, 150, 243, 0.1);\r\n  padding: 8px 16px;\r\n  border-radius: 0;\r\n  font-size: 14px;\r\n  color: #1565c0;\r\n}\r\n\r\n.keyword {\r\n  font-weight: 700;\r\n  color: #0d47a1;\r\n}\r\n\r\n.sort-options {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.sort-select {\r\n  padding: 10px 20px;\r\n  border: 2px solid #bbdefb;\r\n  border-radius: 0;\r\n  background: white;\r\n  color: #333;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  outline: none;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.sort-select:focus {\r\n  border-color: #2196f3;\r\n  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);\r\n}\r\n\r\n/* å•†å“ç½‘æ ¼ */\r\n.products-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 25px;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.product-card {\r\n  background: linear-gradient(135deg, #ffffff 0%, #f0f7ff 100%);\r\n  border: 1px solid #bbdefb;\r\n  border-radius: 0;\r\n  overflow: hidden;\r\n  box-shadow: 0 6px 20px rgba(187, 222, 251, 0.2);\r\n  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 380px;\r\n  position: relative;\r\n}\r\n\r\n.product-card:hover {\r\n  transform: translateY(-10px) scale(1.02);\r\n  box-shadow: 0 15px 35px rgba(33, 150, 243, 0.15);\r\n  border-color: #90caf9;\r\n}\r\n\r\n.product-tag {\r\n  position: absolute;\r\n  top: 12px;\r\n  left: 12px;\r\n  z-index: 2;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.tag {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  padding: 4px 12px;\r\n  border-radius: 0;\r\n  font-size: 11px;\r\n  font-weight: 600;\r\n  backdrop-filter: blur(10px);\r\n  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);\r\n}\r\n\r\n.image-container {\r\n  height: 180px;\r\n  overflow: hidden;\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  position: relative;\r\n}\r\n\r\n.image-container::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #2196f3, #90caf9, #2196f3);\r\n}\r\n\r\n.product-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n  transition: transform 0.6s ease;\r\n}\r\n\r\n.product-card:hover .product-image {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.product-info {\r\n  padding: 20px;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-info h3 {\r\n  margin: 0 0 10px 0;\r\n  color: #1565c0;\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n  line-height: 1.4;\r\n  height: 44px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.description {\r\n  color: #666;\r\n  font-size: 13px;\r\n  line-height: 1.6;\r\n  margin: 0 0 15px 0;\r\n  flex: 1;\r\n  height: 40px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.product-meta {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.company-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.company {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  color: #4a4a4a;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n}\r\n\r\n.company-icon {\r\n  font-size: 14px;\r\n  opacity: 0.8;\r\n}\r\n\r\n.rating {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.stars {\r\n  color: #ffb300;\r\n  font-size: 14px;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.rating-value {\r\n  color: #666;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n}\r\n\r\n.price-cart-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: auto;\r\n  padding-top: 15px;\r\n  border-top: 1px solid #e8f5e9;\r\n}\r\n\r\n.price-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.price {\r\n  color: #e91e63;\r\n  font-size: 22px;\r\n  font-weight: 800;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.cart-button {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 18px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  white-space: nowrap;\r\n  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);\r\n}\r\n\r\n.cart-button:hover {\r\n  background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);\r\n}\r\n\r\n.cart-icon {\r\n  font-size: 16px;\r\n}\r\n\r\n.cart-text {\r\n  font-weight: 600;\r\n}\r\n\r\n/* åŠ è½½çŠ¶æ€ */\r\n.loading {\r\n  text-align: center;\r\n  padding: 80px 20px;\r\n}\r\n\r\n.spinner-container {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.spinner {\r\n  width: 60px;\r\n  height: 60px;\r\n  border: 3px solid #e0f2f1;\r\n  border-top: 3px solid #1b5e20;\r\n  border-radius: 50%;\r\n  animation: spin 1.5s linear infinite;\r\n}\r\n\r\n.spinner-inner {\r\n  position: absolute;\r\n  top: 15px;\r\n  left: 15px;\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 2px solid #c8e6c9;\r\n  border-top: 2px solid #4caf50;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite reverse;\r\n}\r\n\r\n.loading p {\r\n  color: #1565c0;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* æ— ç»“æœçŠ¶æ€ */\r\n.no-results {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n}\r\n\r\n.empty-state {\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\r\n  padding: 40px;\r\n  border-radius: 0;\r\n  display: inline-block;\r\n  border: 2px dashed #90caf9;\r\n  max-width: 500px;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 80px;\r\n  margin-bottom: 20px;\r\n  color: #81c784;\r\n  animation: bounce 2s infinite;\r\n}\r\n\r\n@keyframes bounce {\r\n  0%, 100% { transform: translateY(0); }\r\n  50% { transform: translateY(-10px); }\r\n}\r\n\r\n.no-results h3 {\r\n  color: #1565c0;\r\n  margin-bottom: 15px;\r\n  font-size: 24px;\r\n}\r\n\r\n.no-results p {\r\n  color: #666;\r\n  margin-bottom: 25px;\r\n  font-size: 16px;\r\n}\r\n\r\n.clear-filters-btn {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 12px 25px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.clear-filters-btn:hover {\r\n  background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);\r\n}\r\n\r\n/* åˆ†é¡µ */\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 15px;\r\n  padding: 30px 0;\r\n  border-top: 1px solid #e8f5e9;\r\n}\r\n\r\n.page-btn {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 0;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n  min-width: 80px;\r\n}\r\n\r\n.page-btn:hover:not(:disabled) {\r\n  background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);\r\n}\r\n\r\n.page-btn:disabled {\r\n  background: #cccccc;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.page-numbers {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.page-number {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 0;\r\n  background: #e3f2fd;\r\n  color: #333;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.page-number:hover {\r\n  background: #bbdefb;\r\n  transform: translateY(-2px);\r\n  border-color: #90caf9;\r\n}\r\n\r\n.page-number.active {\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);\r\n}\r\n\r\n.ellipsis {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #81c784;\r\n  font-weight: bold;\r\n}\r\n\r\n/* é€šçŸ¥æ ·å¼ */\r\n.search-notification {\r\n  position: fixed;\r\n  top: 100px;\r\n  right: 30px;\r\n  background: linear-gradient(135deg, #2196f3 0%, #1565c0 100%);\r\n  color: white;\r\n  padding: 15px 25px;\r\n  border-radius: 0;\r\n  box-shadow: 0 8px 30px rgba(33, 150, 243, 0.4);\r\n  z-index: 9999;\r\n  transform: translateX(120%);\r\n  transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n}\r\n\r\n.search-notification.show {\r\n  transform: translateX(0);\r\n}\r\n\r\n.notification-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.notification-icon {\r\n  font-size: 20px;\r\n}\r\n\r\n/* å“åº”å¼è®¾è®¡ */\r\n@media (max-width: 1200px) {\r\n  .products-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n  }\r\n}\r\n\r\n@media (max-width: 992px) {\r\n  .search-content {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .category-sidebar {\r\n    width: 100%;\r\n    position: static;\r\n    max-height: none;\r\n  }\r\n\r\n  .category-list {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n    gap: 15px;\r\n  }\r\n\r\n  .category-item {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .search-container {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .search-input,\r\n  .search-button,\r\n  .clear-button {\r\n    width: 100%;\r\n  }\r\n\r\n  .search-header h1 {\r\n    font-size: 28px;\r\n  }\r\n\r\n  .results-info {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    text-align: center;\r\n  }\r\n\r\n  .info-left {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n\r\n  .products-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n    gap: 15px;\r\n  }\r\n\r\n  .pagination {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .search-view {\r\n    padding: 10px;\r\n  }\r\n\r\n  .search-box {\r\n    padding: 30px 15px;\r\n  }\r\n\r\n  .category-sidebar {\r\n    padding: 20px 15px;\r\n  }\r\n\r\n  .products-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .page-numbers {\r\n    display: none;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}