{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport apiConfig from '@/config/api.config';\nimport axios from 'axios';\n\n// 模拟数据 - 备用\nconst MOCK_USERS = [{\n  uid: 1,\n  username: 'zhangsan',\n  email: 'zhangsan@example.com',\n  phone: '13800138000',\n  status: 1,\n  role: 'user',\n  createTime: '2023-11-01'\n}, {\n  uid: 2,\n  username: 'lisi',\n  email: 'lisi@example.com',\n  phone: '13900139000',\n  status: 1,\n  role: 'admin',\n  createTime: '2023-11-02'\n}, {\n  uid: 3,\n  username: 'wangwu',\n  email: 'wangwu@example.com',\n  phone: '13700137000',\n  status: 0,\n  role: 'user',\n  createTime: '2023-11-03'\n}, {\n  uid: 4,\n  username: 'zhaoliu',\n  email: 'zhaoliu@example.com',\n  phone: '13600136000',\n  status: 1,\n  role: 'user',\n  createTime: '2023-11-04'\n}, {\n  uid: 5,\n  username: 'sunqi',\n  email: 'sunqi@example.com',\n  phone: '13500135000',\n  status: 1,\n  role: 'user',\n  createTime: '2023-11-05'\n}];\nexport default {\n  name: 'AdminUsers',\n  data() {\n    return {\n      // 搜索\n      userSearch: '',\n      currentPage: 1,\n      pageSize: 20,\n      showAddUserModal: false,\n      showEditUserModal: false,\n      showDetailModal: false,\n      selectedUser: null,\n      loading: false,\n      error: null,\n      isMockData: false,\n      newUser: {\n        username: '',\n        password: '',\n        email: '',\n        phone: '',\n        role: 'user',\n        status: 1\n      },\n      // 用户数据 - 初始为空，从API加载\n      users: []\n    };\n  },\n  computed: {\n    // 前端搜索和排序\n    filteredUsers() {\n      let result = this.users;\n      if (this.userSearch) {\n        const search = this.userSearch.toLowerCase();\n        result = result.filter(user => user.username.toLowerCase().includes(search) || user.email && user.email.toLowerCase().includes(search) || user.phone && user.phone.includes(search));\n      }\n\n      // ID 降序排列\n      return result.sort((a, b) => b.uid - a.uid);\n    },\n    // 分页\n    totalPages() {\n      return Math.ceil(this.filteredUsers.length / this.pageSize);\n    },\n    paginatedUsers() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      return this.filteredUsers.slice(start, start + this.pageSize);\n    }\n  },\n  mounted() {\n    this.loadUsers();\n  },\n  methods: {\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++;\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--;\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return '-';\n      try {\n        const date = new Date(dateString);\n        return date.toLocaleDateString('zh-CN');\n      } catch {\n        return dateString;\n      }\n    },\n    // 加载用户数据\n    async loadUsers() {\n      this.loading = true;\n      this.error = null;\n      try {\n        // 尝试从API获取数据\n        const response = await axios.get(apiConfig.user.getAllUsers);\n        console.log('User API Response:', response.data); // 调试日志\n\n        if (response.data.code === 1) {\n          // 定义变量\n          let userList = [];\n\n          // 1. 尝试标准格式 response.data.data (Array)\n          if (response.data && Array.isArray(response.data.data)) {\n            userList = response.data.data;\n          }\n          // 2. 尝试直接返回数组 response.data (Array)\n          else if (Array.isArray(response.data)) {\n            userList = response.data;\n          }\n          // 3. 尝试 response.data.data 是对象但包含 list 字段? (常见变体)\n          else if (response.data.data && Array.isArray(response.data.data.list)) {\n            userList = response.data.data.list;\n          }\n          console.log('Parsed User List:', userList);\n\n          // API请求成功，使用真实数据\n          this.users = userList.map(user => ({\n            uid: user.uid || user.id,\n            // 兼容 id\n            username: user.username,\n            password: user.password,\n            // 保存密码用于更新\n            email: user.email || '',\n            phone: user.phone || '',\n            status: user.status !== undefined ? user.status : 1,\n            role: user.role || 'user',\n            avatar: user.avatar,\n            createTime: user.createTime || '-'\n          }));\n          this.isMockData = false;\n        } else {\n          // API返回错误\n          // 修正：后端返回字段为 msg 而不是 message\n          throw new Error(response.data.msg || `API返回错误 (code=${response.data.code})`);\n        }\n      } catch (error) {\n        console.error('加载用户数据失败详情:', error);\n        // 显示详细错误信息以便调试\n        const errorMsg = error.response ? `Status: ${error.response.status} ${error.response.statusText}` : error.message;\n        this.error = `API连接失败 (${errorMsg})，已显示模拟数据`;\n\n        // API调用失败，使用模拟数据\n        this.users = [...MOCK_USERS];\n        this.isMockData = true;\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 检查用户名是否重复\n    async checkUsername(username) {\n      try {\n        const response = await axios.get(apiConfig.user.checkUsername, {\n          params: {\n            username\n          }\n        });\n        return response.data.code === 1; // 返回true表示可用\n      } catch {\n        return true; // 如果API失败，假设用户名可用\n      }\n    },\n    // 检查手机号是否重复\n    async checkPhone(phone) {\n      try {\n        const response = await axios.get(apiConfig.user.checkPhone, {\n          params: {\n            phone\n          }\n        });\n        return response.data.code === 1; // 返回true表示可用\n      } catch {\n        return true; // 如果API失败，假设手机号可用\n      }\n    },\n    // 编辑用户\n    editUser(user) {\n      this.selectedUser = {\n        ...user\n      };\n      this.showEditUserModal = true;\n    },\n    // 提交编辑用户\n    async submitEditUser() {\n      // 构造更新数据\n      const updateData = {\n        uid: this.selectedUser.uid,\n        username: this.selectedUser.username,\n        email: this.selectedUser.email,\n        phone: this.selectedUser.phone,\n        role: this.selectedUser.role,\n        // 补全后端User实体需要的字段，防止更新时被置空\n        status: this.selectedUser.status,\n        avatar: this.selectedUser.avatar || '',\n        password: this.selectedUser.password,\n        // 注意：如果后端updateById会覆盖密码，这里需要传原密码\n        createTime: this.selectedUser.createTime,\n        updateTime: new Date().toISOString() // 假设需要更新时间\n      };\n      try {\n        const response = await axios.post(apiConfig.user.updateUser, updateData);\n        if (response.data.code === 1) {\n          alert('用户信息更新成功！');\n          this.showEditUserModal = false;\n          await this.loadUsers(); // 重新加载列表\n        } else {\n          alert('更新失败：' + response.data.msg);\n        }\n      } catch (error) {\n        console.error('更新用户信息失败:', error);\n        alert('更新失败（API调用异常）');\n      }\n    },\n    // 切换用户状态 (禁用/启用)\n    async toggleUserStatus(user) {\n      // 判断当前动作\n      const action = user.status === 1 ? '禁用' : '启用';\n      const confirmMsg = user.status === 1 ? `确定要禁用用户\"${user.username}\"吗？\\n(操作将设置状态为禁用)` : `确定要启用用户\"${user.username}\"吗？\\n(操作将恢复用户为正常状态)`;\n      if (confirm(confirmMsg)) {\n        try {\n          // 注意：后端接口是 /admin/user/status/{id}\n          // 根据之前提供的代码：@PostMapping(\"/status/{id}\") ... userService.updateStatus(id)\n          // 需要确认后端逻辑是 \"toggle\"(切换) 还是 \"set to 0\"(只禁用)\n          // 假设后端是 updateStatus(id) -> update user set status = 0 where uid = id (如果是这样，则只能禁用)\n          // 但通常命名为 updateStatus 且只传ID，可能是切换。\n          // 如果后端只能注销(设为0)，那么我们需要请求后端修改，或者看是否有其他接口。\n          // 根据你刚才提供的 UserMapper: update user set status = 0 where uid = #{id}\n          // **发现后端目前只能注销(设为0)**。\n\n          // 如果要启用，需要调用 update 接口手动设置 status=1\n          if (user.status === 0) {\n            // 启用逻辑：调用 updateUser 接口\n            const updateData = {\n              ...user,\n              status: 1,\n              // 强制设为1\n              updateTime: new Date().toISOString()\n            };\n            // 确保传所有必要字段，因为我们复用了 submitEditUser 的逻辑\n            // 但这里直接调接口\n            const res = await axios.post(apiConfig.user.updateUser, updateData);\n            if (res.data.code === 1) {\n              user.status = 1;\n              alert('已启用用户');\n            } else {\n              alert('启用失败：' + res.data.msg);\n            }\n          } else {\n            // 禁用逻辑：调用原有的 status 接口 (因为它只能设为0)\n            const response = await axios.post(apiConfig.user.deactivateUser(user.uid));\n            if (response.data.code === 1) {\n              user.status = 0;\n              alert(`已禁用用户`);\n            } else {\n              alert(`操作失败：` + response.data.msg);\n            }\n          }\n        } catch (error) {\n          console.error(`${action}用户失败:`, error);\n          alert(`操作失败（API调用失败）`);\n        }\n      }\n    },\n    // 查看用户详情\n    viewUserDetail(user) {\n      this.selectedUser = {\n        ...user\n      };\n      this.showDetailModal = true;\n    },\n    // 添加用户\n    async addUser() {\n      if (!this.newUser.username.trim()) {\n        alert('请输入用户名');\n        return;\n      }\n      if (!this.newUser.password.trim()) {\n        alert('请输入密码');\n        return;\n      }\n\n      // 验证用户名是否重复\n      const isUsernameAvailable = await this.checkUsername(this.newUser.username);\n      if (!isUsernameAvailable) {\n        alert('用户名已存在！');\n        return;\n      }\n\n      // 验证手机号是否重复（如果有手机号）\n      if (this.newUser.phone) {\n        const isPhoneAvailable = await this.checkPhone(this.newUser.phone);\n        if (!isPhoneAvailable) {\n          alert('手机号已存在！');\n          return;\n        }\n      }\n\n      // 构建用户数据\n      const userData = {\n        username: this.newUser.username,\n        password: this.newUser.password,\n        email: this.newUser.email || '',\n        phone: this.newUser.phone || '',\n        role: this.newUser.role,\n        status: 1\n      };\n\n      // 尝试调用API添加用户\n      try {\n        const response = await axios.post(apiConfig.user.addUser, userData);\n        if (response.data.code === 1) {\n          // 添加成功后重新加载用户列表\n          await this.loadUsers();\n\n          // 清空表单\n          this.resetNewUserForm();\n          this.showAddUserModal = false;\n          alert('用户添加成功！');\n        } else {\n          alert('添加失败：' + response.data.message);\n        }\n      } catch (error) {\n        console.error('添加用户失败:', error);\n        alert('用户添加成功（API调用失败）');\n      }\n    },\n    // 重置新用户表单\n    resetNewUserForm() {\n      this.newUser = {\n        username: '',\n        password: '',\n        email: '',\n        phone: '',\n        role: 'user',\n        status: 1\n      };\n    }\n  }\n};","map":{"version":3,"names":["apiConfig","axios","MOCK_USERS","uid","username","email","phone","status","role","createTime","name","data","userSearch","currentPage","pageSize","showAddUserModal","showEditUserModal","showDetailModal","selectedUser","loading","error","isMockData","newUser","password","users","computed","filteredUsers","result","search","toLowerCase","filter","user","includes","sort","a","b","totalPages","Math","ceil","length","paginatedUsers","start","slice","mounted","loadUsers","methods","nextPage","prevPage","formatDate","dateString","date","Date","toLocaleDateString","response","get","getAllUsers","console","log","code","userList","Array","isArray","list","map","id","undefined","avatar","Error","msg","errorMsg","statusText","message","checkUsername","params","checkPhone","editUser","submitEditUser","updateData","updateTime","toISOString","post","updateUser","alert","toggleUserStatus","action","confirmMsg","confirm","res","deactivateUser","viewUserDetail","addUser","trim","isUsernameAvailable","isPhoneAvailable","userData","resetNewUserForm"],"sources":["D:\\1_homework_file\\大三上\\软件工程\\项目留档\\1前端开发_我才是真的\\version5.0\\src\\views\\admin\\Admin2Users.vue"],"sourcesContent":["<template>\r\n  <div class=\"management-section\">\r\n    <!-- 已移除顶部数据来源提示 -->\r\n\r\n    <div class=\"section-header\">\r\n      <h3>用户管理 <span class=\"simulation-badge\" v-if=\"isMockData\">模拟数据</span></h3>\r\n      <div class=\"section-actions\">\r\n        <!-- 添加用户按钮 -->\r\n        <button class=\"btn-primary\" @click=\"showAddUserModal = true\">\r\n          <span class=\"btn-icon\">+</span>\r\n          添加用户\r\n        </button>\r\n\r\n        <!-- 前端搜索功能 -->\r\n        <div class=\"search-box\">\r\n          <input\r\n              type=\"text\"\r\n              v-model=\"userSearch\"\r\n              placeholder=\"搜索用户名、邮箱或电话...\"\r\n              class=\"search-input\"\r\n          />\r\n          <span class=\"search-icon\">搜</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"spinner\"></div>\r\n      正在加载用户数据...\r\n    </div>\r\n\r\n    <!-- 错误状态 -->\r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      加载失败：{{ error }}\r\n      <button @click=\"loadUsers\" class=\"btn-retry\">重试</button>\r\n    </div>\r\n\r\n    <div v-else class=\"table-container\">\r\n      <table class=\"data-table\">\r\n        <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th class=\"text-left\">用户名</th>\r\n          <th class=\"text-left\">邮箱</th>\r\n          <th class=\"text-left\">电话</th>\r\n          <th>状态</th>\r\n          <th>角色</th>\r\n          <th class=\"text-left\">注册时间</th>\r\n          <th>操作</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"user in paginatedUsers\" :key=\"user.uid\">\r\n          <td><span class=\"id-text\">#{{ user.uid }}</span></td>\r\n          <td class=\"text-left\">\r\n            <div class=\"user-cell\">\r\n              <div class=\"user-avatar-sm\">{{ user.username?.charAt(0) }}</div>\r\n              <span class=\"username-text\">{{ user.username }}</span>\r\n            </div>\r\n          </td>\r\n          <td class=\"text-left\">{{ user.email || '-' }}</td>\r\n          <td class=\"text-left\">{{ user.phone || '-' }}</td>\r\n          <td>\r\n              <span :class=\"['status-badge', user.status ? 'active' : 'inactive']\">\r\n                {{ user.status ? '正常' : '禁用' }}\r\n              </span>\r\n          </td>\r\n          <td>\r\n              <span :class=\"['role-badge', user.role === 'admin' ? 'admin' : 'user']\">\r\n                {{ user.role === 'admin' ? '管理员' : '普通用户' }}\r\n              </span>\r\n          </td>\r\n          <td>{{ formatDate(user.createTime) }}</td>\r\n          <td>\r\n            <div class=\"action-buttons center-content\">\r\n              <!-- 编辑按钮 -->\r\n              <button class=\"btn-edit\" @click=\"editUser(user)\">\r\n                编辑\r\n              </button>\r\n\r\n              <!-- 状态切换按钮 -->\r\n              <button\r\n                  :class=\"['btn-status', user.status ? 'btn-disable' : 'btn-enable']\"\r\n                  @click=\"toggleUserStatus(user)\"\r\n              >\r\n                {{ user.status ? '禁用' : '启用' }}\r\n              </button>\r\n\r\n              <!-- 查看详情按钮 -->\r\n              <button class=\"btn-view\" @click=\"viewUserDetail(user)\">\r\n                查看详情\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div class=\"table-footer\">\r\n      <div class=\"pagination-info\">\r\n        显示 {{ filteredUsers.length }} 条记录中的 {{ filteredUsers.length > 0 ? (currentPage - 1) * pageSize + 1 : 0 }}-{{ Math.min(currentPage * pageSize, filteredUsers.length) }} 条\r\n        <span v-if=\"isMockData\" class=\"mock-hint\">【当前为模拟数据】</span>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <button class=\"pagination-btn\" :disabled=\"currentPage === 1\" @click=\"prevPage\">上一页</button>\r\n        <span class=\"pagination-current\">{{ currentPage }} / {{ totalPages || 1 }}</span>\r\n        <button class=\"pagination-btn\" :disabled=\"currentPage === totalPages || totalPages === 0\" @click=\"nextPage\">下一页</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加用户模态框 -->\r\n    <div v-if=\"showAddUserModal\" class=\"modal-overlay\">\r\n      <div class=\"modal\">\r\n        <div class=\"modal-header\">\r\n          <h3>添加用户</h3>\r\n          <button class=\"modal-close\" @click=\"showAddUserModal = false\">×</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"modal-form\">\r\n            <div class=\"form-group\">\r\n              <label>用户名：</label>\r\n              <input type=\"text\" v-model=\"newUser.username\" placeholder=\"请输入用户名\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>密码：</label>\r\n              <input type=\"password\" v-model=\"newUser.password\" placeholder=\"请输入密码\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>邮箱：</label>\r\n              <input type=\"email\" v-model=\"newUser.email\" placeholder=\"请输入邮箱\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>电话：</label>\r\n              <input type=\"tel\" v-model=\"newUser.phone\" placeholder=\"请输入电话\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>角色：</label>\r\n              <select v-model=\"newUser.role\" class=\"form-input\">\r\n                <option value=\"user\">普通用户</option>\r\n                <option value=\"admin\">管理员</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-actions\">\r\n              <button class=\"btn-cancel\" @click=\"showAddUserModal = false\">取消</button>\r\n              <button class=\"btn-submit\" @click=\"addUser\">添加用户</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 编辑用户模态框 -->\r\n    <div v-if=\"showEditUserModal\" class=\"modal-overlay\">\r\n      <div class=\"modal\">\r\n        <div class=\"modal-header\">\r\n          <h3>编辑用户</h3>\r\n          <button class=\"modal-close\" @click=\"showEditUserModal = false\">×</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"modal-form\">\r\n            <div class=\"form-group\">\r\n              <label>ID (不可修改)：</label>\r\n              <input type=\"text\" v-model=\"selectedUser.uid\" class=\"form-input\" disabled style=\"background:#f5f5f5;\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>用户名：</label>\r\n              <input type=\"text\" v-model=\"selectedUser.username\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>邮箱：</label>\r\n              <input type=\"email\" v-model=\"selectedUser.email\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>电话：</label>\r\n              <input type=\"tel\" v-model=\"selectedUser.phone\" class=\"form-input\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>角色：</label>\r\n              <select v-model=\"selectedUser.role\" class=\"form-input\">\r\n                <option value=\"user\">普通用户</option>\r\n                <option value=\"admin\">管理员</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-actions\">\r\n              <button class=\"btn-cancel\" @click=\"showEditUserModal = false\">取消</button>\r\n              <button class=\"btn-submit\" @click=\"submitEditUser\">保存修改</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 用户详情模态框 -->\r\n    <div v-if=\"showDetailModal\" class=\"modal-overlay\">\r\n      <div class=\"modal modal-lg\">\r\n        <div class=\"modal-header\">\r\n          <h3>用户详情</h3>\r\n          <button class=\"modal-close\" @click=\"showDetailModal = false\">×</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"user-detail\">\r\n            <div class=\"detail-section\">\r\n              <h4>基本信息</h4>\r\n              <div class=\"detail-grid\">\r\n                <div class=\"detail-item\">\r\n                  <label>用户ID：</label>\r\n                  <span>{{ selectedUser.uid }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>用户名：</label>\r\n                  <span>{{ selectedUser.username }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>邮箱：</label>\r\n                  <span>{{ selectedUser.email || '-' }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>电话：</label>\r\n                  <span>{{ selectedUser.phone || '-' }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>状态：</label>\r\n                  <span :class=\"['status-badge', selectedUser.status ? 'active' : 'inactive']\">\r\n                    {{ selectedUser.status ? '正常' : '禁用' }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>角色：</label>\r\n                  <span :class=\"['role-badge', selectedUser.role === 'admin' ? 'admin' : 'user']\">\r\n                    {{ selectedUser.role === 'admin' ? '管理员' : '普通用户' }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <label>注册时间：</label>\r\n                  <span>{{ formatDate(selectedUser.createTime) }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiConfig from '@/config/api.config'\r\nimport axios from 'axios';\r\n\r\n// 模拟数据 - 备用\r\nconst MOCK_USERS = [\r\n  { uid: 1, username: 'zhangsan', email: 'zhangsan@example.com', phone: '13800138000', status: 1, role: 'user', createTime: '2023-11-01' },\r\n  { uid: 2, username: 'lisi', email: 'lisi@example.com', phone: '13900139000', status: 1, role: 'admin', createTime: '2023-11-02' },\r\n  { uid: 3, username: 'wangwu', email: 'wangwu@example.com', phone: '13700137000', status: 0, role: 'user', createTime: '2023-11-03' },\r\n  { uid: 4, username: 'zhaoliu', email: 'zhaoliu@example.com', phone: '13600136000', status: 1, role: 'user', createTime: '2023-11-04' },\r\n  { uid: 5, username: 'sunqi', email: 'sunqi@example.com', phone: '13500135000', status: 1, role: 'user', createTime: '2023-11-05' }\r\n];\r\n\r\nexport default {\r\n  name: 'AdminUsers',\r\n  data() {\r\n    return {\r\n      // 搜索\r\n      userSearch: '',\r\n      currentPage: 1,\r\n      pageSize: 20,\r\n      \r\n      showAddUserModal: false,\r\n      showEditUserModal: false,\r\n      showDetailModal: false,\r\n      selectedUser: null,\r\n      loading: false,\r\n      error: null,\r\n      isMockData: false,\r\n\r\n      newUser: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        phone: '',\r\n        role: 'user',\r\n        status: 1\r\n      },\r\n\r\n      // 用户数据 - 初始为空，从API加载\r\n      users: []\r\n    }\r\n  },\r\n  computed: {\r\n    // 前端搜索和排序\r\n    filteredUsers() {\r\n      let result = this.users;\r\n      \r\n      if (this.userSearch) {\r\n        const search = this.userSearch.toLowerCase();\r\n        result = result.filter(user =>\r\n            user.username.toLowerCase().includes(search) ||\r\n            (user.email && user.email.toLowerCase().includes(search)) ||\r\n            (user.phone && user.phone.includes(search))\r\n        );\r\n      }\r\n      \r\n      // ID 降序排列\r\n      return result.sort((a, b) => b.uid - a.uid);\r\n    },\r\n    \r\n    // 分页\r\n    totalPages() {\r\n      return Math.ceil(this.filteredUsers.length / this.pageSize);\r\n    },\r\n    \r\n    paginatedUsers() {\r\n      const start = (this.currentPage - 1) * this.pageSize;\r\n      return this.filteredUsers.slice(start, start + this.pageSize);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadUsers();\r\n  },\r\n  methods: {\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) this.currentPage++;\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) this.currentPage--;\r\n    },\r\n    // 格式化日期\r\n    formatDate(dateString) {\r\n      if (!dateString) return '-';\r\n      try {\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('zh-CN');\r\n      } catch {\r\n        return dateString;\r\n      }\r\n    },\r\n\r\n    // 加载用户数据\r\n    async loadUsers() {\r\n      this.loading = true;\r\n      this.error = null;\r\n\r\n      try {\r\n        // 尝试从API获取数据\r\n        const response = await axios.get(apiConfig.user.getAllUsers);\r\n        console.log('User API Response:', response.data); // 调试日志\r\n\r\n        if (response.data.code === 1) {\r\n          // 定义变量\r\n          let userList = [];\r\n\r\n          // 1. 尝试标准格式 response.data.data (Array)\r\n          if (response.data && Array.isArray(response.data.data)) {\r\n             userList = response.data.data;\r\n          } \r\n          // 2. 尝试直接返回数组 response.data (Array)\r\n          else if (Array.isArray(response.data)) {\r\n             userList = response.data;\r\n          }\r\n          // 3. 尝试 response.data.data 是对象但包含 list 字段? (常见变体)\r\n          else if (response.data.data && Array.isArray(response.data.data.list)) {\r\n             userList = response.data.data.list;\r\n          }\r\n          \r\n          console.log('Parsed User List:', userList);\r\n\r\n          // API请求成功，使用真实数据\r\n          this.users = userList.map(user => ({\r\n            uid: user.uid || user.id, // 兼容 id\r\n            username: user.username,\r\n            password: user.password, // 保存密码用于更新\r\n            email: user.email || '',\r\n            phone: user.phone || '',\r\n            status: user.status !== undefined ? user.status : 1,\r\n            role: user.role || 'user',\r\n            avatar: user.avatar,\r\n            createTime: user.createTime || '-'\r\n          }));\r\n          this.isMockData = false;\r\n        } else {\r\n          // API返回错误\r\n          // 修正：后端返回字段为 msg 而不是 message\r\n          throw new Error(response.data.msg || `API返回错误 (code=${response.data.code})`);\r\n        }\r\n      } catch (error) {\r\n        console.error('加载用户数据失败详情:', error);\r\n        // 显示详细错误信息以便调试\r\n        const errorMsg = error.response ? \r\n            `Status: ${error.response.status} ${error.response.statusText}` : \r\n            error.message;\r\n            \r\n        this.error = `API连接失败 (${errorMsg})，已显示模拟数据`;\r\n        \r\n        // API调用失败，使用模拟数据\r\n        this.users = [...MOCK_USERS];\r\n        this.isMockData = true;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // 检查用户名是否重复\r\n    async checkUsername(username) {\r\n      try {\r\n        const response = await axios.get(apiConfig.user.checkUsername, {\r\n          params: { username }\r\n        });\r\n        return response.data.code === 1; // 返回true表示可用\r\n      } catch {\r\n        return true; // 如果API失败，假设用户名可用\r\n      }\r\n    },\r\n\r\n    // 检查手机号是否重复\r\n    async checkPhone(phone) {\r\n      try {\r\n        const response = await axios.get(apiConfig.user.checkPhone, {\r\n          params: { phone }\r\n        });\r\n        return response.data.code === 1; // 返回true表示可用\r\n      } catch {\r\n        return true; // 如果API失败，假设手机号可用\r\n      }\r\n    },\r\n\r\n    // 编辑用户\r\n    editUser(user) {\r\n      this.selectedUser = { ...user };\r\n      this.showEditUserModal = true;\r\n    },\r\n\r\n    // 提交编辑用户\r\n     async submitEditUser() {\r\n       // 构造更新数据\r\n       const updateData = {\r\n         uid: this.selectedUser.uid,\r\n         username: this.selectedUser.username,\r\n         email: this.selectedUser.email,\r\n         phone: this.selectedUser.phone,\r\n         role: this.selectedUser.role,\r\n         // 补全后端User实体需要的字段，防止更新时被置空\r\n         status: this.selectedUser.status,\r\n         avatar: this.selectedUser.avatar || '',\r\n         password: this.selectedUser.password, // 注意：如果后端updateById会覆盖密码，这里需要传原密码\r\n         createTime: this.selectedUser.createTime,\r\n         updateTime: new Date().toISOString() // 假设需要更新时间\r\n       };\r\n\r\n       try {\r\n         const response = await axios.post(apiConfig.user.updateUser, updateData);\r\n\r\n         if (response.data.code === 1) {\r\n           alert('用户信息更新成功！');\r\n           this.showEditUserModal = false;\r\n           await this.loadUsers(); // 重新加载列表\r\n         } else {\r\n           alert('更新失败：' + response.data.msg);\r\n         }\r\n       } catch (error) {\r\n         console.error('更新用户信息失败:', error);\r\n         alert('更新失败（API调用异常）');\r\n       }\r\n     },\r\n\r\n    // 切换用户状态 (禁用/启用)\r\n    async toggleUserStatus(user) {\r\n      // 判断当前动作\r\n      const action = user.status === 1 ? '禁用' : '启用';\r\n      const confirmMsg = user.status === 1 \r\n          ? `确定要禁用用户\"${user.username}\"吗？\\n(操作将设置状态为禁用)`\r\n          : `确定要启用用户\"${user.username}\"吗？\\n(操作将恢复用户为正常状态)`;\r\n\r\n      if (confirm(confirmMsg)) {\r\n        try {\r\n          // 注意：后端接口是 /admin/user/status/{id}\r\n          // 根据之前提供的代码：@PostMapping(\"/status/{id}\") ... userService.updateStatus(id)\r\n          // 需要确认后端逻辑是 \"toggle\"(切换) 还是 \"set to 0\"(只禁用)\r\n          // 假设后端是 updateStatus(id) -> update user set status = 0 where uid = id (如果是这样，则只能禁用)\r\n          // 但通常命名为 updateStatus 且只传ID，可能是切换。\r\n          // 如果后端只能注销(设为0)，那么我们需要请求后端修改，或者看是否有其他接口。\r\n          // 根据你刚才提供的 UserMapper: update user set status = 0 where uid = #{id}\r\n          // **发现后端目前只能注销(设为0)**。\r\n          \r\n          // 如果要启用，需要调用 update 接口手动设置 status=1\r\n          if (user.status === 0) {\r\n             // 启用逻辑：调用 updateUser 接口\r\n             const updateData = {\r\n               ...user,\r\n               status: 1, // 强制设为1\r\n               updateTime: new Date().toISOString()\r\n             };\r\n             // 确保传所有必要字段，因为我们复用了 submitEditUser 的逻辑\r\n             // 但这里直接调接口\r\n             const res = await axios.post(apiConfig.user.updateUser, updateData);\r\n             if (res.data.code === 1) {\r\n                user.status = 1;\r\n                alert('已启用用户');\r\n             } else {\r\n                alert('启用失败：' + res.data.msg);\r\n             }\r\n          } else {\r\n             // 禁用逻辑：调用原有的 status 接口 (因为它只能设为0)\r\n             const response = await axios.post(apiConfig.user.deactivateUser(user.uid));\r\n             if (response.data.code === 1) {\r\n               user.status = 0;\r\n               alert(`已禁用用户`);\r\n             } else {\r\n               alert(`操作失败：` + response.data.msg);\r\n             }\r\n          }\r\n        } catch (error) {\r\n          console.error(`${action}用户失败:`, error);\r\n          alert(`操作失败（API调用失败）`);\r\n        }\r\n      }\r\n    },\r\n\r\n    // 查看用户详情\r\n    viewUserDetail(user) {\r\n      this.selectedUser = { ...user };\r\n      this.showDetailModal = true;\r\n    },\r\n\r\n    // 添加用户\r\n    async addUser() {\r\n      if (!this.newUser.username.trim()) {\r\n        alert('请输入用户名');\r\n        return;\r\n      }\r\n\r\n      if (!this.newUser.password.trim()) {\r\n        alert('请输入密码');\r\n        return;\r\n      }\r\n\r\n      // 验证用户名是否重复\r\n      const isUsernameAvailable = await this.checkUsername(this.newUser.username);\r\n      if (!isUsernameAvailable) {\r\n        alert('用户名已存在！');\r\n        return;\r\n      }\r\n\r\n      // 验证手机号是否重复（如果有手机号）\r\n      if (this.newUser.phone) {\r\n        const isPhoneAvailable = await this.checkPhone(this.newUser.phone);\r\n        if (!isPhoneAvailable) {\r\n          alert('手机号已存在！');\r\n          return;\r\n        }\r\n      }\r\n\r\n      // 构建用户数据\r\n      const userData = {\r\n        username: this.newUser.username,\r\n        password: this.newUser.password,\r\n        email: this.newUser.email || '',\r\n        phone: this.newUser.phone || '',\r\n        role: this.newUser.role,\r\n        status: 1\r\n      };\r\n\r\n      // 尝试调用API添加用户\r\n      try {\r\n        const response = await axios.post(apiConfig.user.addUser, userData);\r\n\r\n        if (response.data.code === 1) {\r\n          // 添加成功后重新加载用户列表\r\n          await this.loadUsers();\r\n\r\n          // 清空表单\r\n          this.resetNewUserForm();\r\n\r\n          this.showAddUserModal = false;\r\n          alert('用户添加成功！');\r\n        } else {\r\n          alert('添加失败：' + response.data.message);\r\n        }\r\n      } catch (error) {\r\n        console.error('添加用户失败:', error);\r\n        alert('用户添加成功（API调用失败）');\r\n      }\r\n    },\r\n\r\n    // 重置新用户表单\r\n    resetNewUserForm() {\r\n      this.newUser = {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        phone: '',\r\n        role: 'user',\r\n        status: 1\r\n      };\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 基础容器 */\r\n.management-section {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* 模拟数据标记 */\r\n.simulation-badge {\r\n  background: #bbdefb;\r\n  color: #0d47a1;\r\n  padding: 2px 8px;\r\n  font-size: 12px;\r\n  margin-left: 8px;\r\n  border-radius: 2px;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-state {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  color: #666;\r\n  background: #fafafa;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 3px solid #f3f3f3;\r\n  border-top: 3px solid #1a237e;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* 错误状态 */\r\n.error-state {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  color: #c62828;\r\n  background: #ffebee;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.btn-retry {\r\n  padding: 6px 16px;\r\n  background: #1a237e;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 2px;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n}\r\n\r\n.btn-retry:hover {\r\n  background: #283593;\r\n}\r\n\r\n/* 头部区域 */\r\n.section-header {\r\n  padding: 16px;\r\n  border-bottom: none;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.section-header h3 {\r\n  margin: 0;\r\n  color: #1a237e;\r\n  font-size: 34px;\r\n}\r\n\r\n.section-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: center;\r\n}\r\n\r\n/* 按钮样式 */\r\n.btn-primary {\r\n  background: #1a237e;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-weight: 500;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #283593;\r\n}\r\n\r\n/* 搜索框 */\r\n.search-box {\r\n  position: relative;\r\n}\r\n\r\n.search-input {\r\n  padding: 8px 32px 8px 12px;\r\n  border: 1px solid #d0d0d0;\r\n  width: 250px;\r\n  font-size: 14px;\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #1a237e;\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  right: 12px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 表格样式 */\r\n.table-container {\r\n  overflow-x: auto;\r\n  min-height: 400px;\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\n\r\n.data-table th {\r\n  background: #f8f9ff;\r\n  padding: 12px;\r\n  text-align: center;\r\n  font-weight: 600;\r\n  color: #1a237e;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  border-top: 1px solid #e0e0e0; /* ← 添加这一行 */\r\n\r\n  white-space: nowrap;\r\n}\r\n\r\n.data-table td {\r\n  padding: 12px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n}\r\n\r\n.text-left {\r\n  text-align: left !important;\r\n  justify-content: flex-start !important;\r\n}\r\n\r\n.data-table tbody tr:hover {\r\n  background: #f8f9ff;\r\n}\r\n\r\n/* 用户单元格 */\r\n.user-cell {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.id-text {\r\n  font-weight: bold;\r\n}\r\n\r\n.username-text {\r\n  font-weight: bold;\r\n}\r\n\r\n.user-avatar-sm {\r\n  width: 32px;\r\n  height: 32px;\r\n  background: #3949ab;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  border-radius: 2px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* 状态徽章 */\r\n.status-badge {\r\n  padding: 4px 10px;\r\n  font-size: 12px;\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-badge.active {\r\n  background: #e8f5e8;\r\n  color: #2e7d32;\r\n}\r\n\r\n.status-badge.inactive {\r\n  background: #ffebee;\r\n  color: #c62828;\r\n}\r\n\r\n/* 角色徽章 */\r\n.role-badge {\r\n  padding: 4px 10px;\r\n  font-size: 12px;\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  font-weight: 500;\r\n}\r\n\r\n.role-badge.admin {\r\n  background: #e3f2fd;\r\n  color: #1565c0;\r\n}\r\n\r\n.role-badge.user {\r\n  background: #f3e5f5;\r\n  color: #7b1fa2;\r\n}\r\n\r\n/* 操作按钮 */\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-edit, .btn-status, .btn-view {\r\n  padding: 6px 12px;\r\n  border: none;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  font-weight: 500;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-edit {\r\n  background: #e3f2fd;\r\n  color: #1976d2;\r\n}\r\n\r\n.btn-edit:hover {\r\n  background: #bbdefb;\r\n}\r\n\r\n.btn-status {\r\n  min-width: 60px;\r\n}\r\n\r\n.btn-status.btn-disable {\r\n  background: #ffebee;\r\n  color: #d32f2f;\r\n}\r\n\r\n.btn-status.btn-disable:hover {\r\n  background: #ffcdd2;\r\n}\r\n\r\n.btn-status.btn-enable {\r\n  background: #e8f5e8;\r\n  color: #2e7d32;\r\n}\r\n\r\n.btn-status.btn-enable:hover {\r\n  background: #c8e6c9;\r\n}\r\n\r\n.btn-view {\r\n  background: #f5f5f5;\r\n  color: #616161;\r\n}\r\n\r\n.btn-view:hover {\r\n  background: #e0e0e0;\r\n}\r\n\r\n/* 表格底部 */\r\n.table-footer {\r\n  padding: 16px;\r\n  border-top: 1px solid #f0f0f0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #fafafa;\r\n}\r\n\r\n.pagination-info {\r\n  color: #666;\r\n  font-size: 13px;\r\n}\r\n\r\n.pagination-hint {\r\n  color: #999;\r\n  font-size: 11px;\r\n  margin-left: 8px;\r\n  font-style: italic;\r\n}\r\n\r\n.mock-hint {\r\n  color: #f57c00;\r\n  margin-left: 8px;\r\n  font-weight: 500;\r\n  font-size: 11px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.pagination-btn {\r\n  padding: 6px 12px;\r\n  border: 1px solid #d0d0d0;\r\n  background: white;\r\n  cursor: not-allowed;\r\n  color: #999;\r\n  font-size: 13px;\r\n}\r\n\r\n.pagination-current {\r\n  padding: 6px 12px;\r\n  background: #1a237e;\r\n  color: white;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 模态框 */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal {\r\n  background: white;\r\n  width: 500px;\r\n  max-width: 90%;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  border-radius: 2px;\r\n}\r\n\r\n.modal-lg {\r\n  width: 700px;\r\n}\r\n\r\n.modal-header {\r\n  padding: 16px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #f8f9ff;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #1a237e;\r\n}\r\n\r\n.modal-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  color: #666;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 2px;\r\n}\r\n\r\n.modal-close:hover {\r\n  background: #f0f0f0;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n/* 表单样式 */\r\n.modal-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.form-group label {\r\n  font-size: 13px;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-input {\r\n  padding: 8px 12px;\r\n  border: 1px solid #d0d0d0;\r\n  font-size: 14px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.form-input:focus {\r\n  outline: none;\r\n  border-color: #1a237e;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-cancel {\r\n  padding: 8px 16px;\r\n  border: 1px solid #d0d0d0;\r\n  background: white;\r\n  color: #333;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background: #f5f5f5;\r\n}\r\n\r\n.btn-submit {\r\n  padding: 8px 16px;\r\n  background: #1a237e;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.btn-submit:hover {\r\n  background: #283593;\r\n}\r\n\r\n/* 用户详情样式 */\r\n.user-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.detail-section h4 {\r\n  margin: 0 0 16px 0;\r\n  color: #1a237e;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n}\r\n\r\n.detail-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 16px;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.detail-item label {\r\n  font-size: 13px;\r\n  color: #666;\r\n  min-width: 80px;\r\n}\r\n\r\n.detail-item span {\r\n  font-size: 13px;\r\n  color: #333;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .section-actions {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 12px;\r\n  }\r\n\r\n  .search-input {\r\n    width: 100%;\r\n  }\r\n\r\n  .action-buttons {\r\n    flex-direction: column;\r\n    gap: 4px;\r\n  }\r\n\r\n  .btn-edit, .btn-status, .btn-view {\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n\r\n  .table-footer {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  .detail-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .modal {\r\n    width: 95%;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .section-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n\r\n  .data-table {\r\n    font-size: 13px;\r\n  }\r\n\r\n  .data-table th,\r\n  .data-table td {\r\n    padding: 8px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}