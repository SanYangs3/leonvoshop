{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"student-auth-page\"\n};\nconst _hoisted_2 = {\n  class: \"auth-card\"\n};\nconst _hoisted_3 = {\n  class: \"auth-header\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"preview-image\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 1,\n  class: \"upload-placeholder\"\n};\nconst _hoisted_10 = {\n  class: \"actions\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_13 = {\n  key: 1,\n  class: \"success-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"title\"\n  }, [_createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"üéì\"), _createElementVNode(\"div\", null, [_createElementVNode(\"h2\", null, \"Â≠¶ÁîüËÆ§ËØÅ\"), _createElementVNode(\"p\", null, \"Êèê‰∫§Â≠¶Áîü‰ø°ÊÅØÔºå‰∫´ÂèóÂ≠¶Áîü‰∏ìÂ±û‰ºòÊÉ†88ÊäòÔºÅ\")])], -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"back-btn\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.back())\n  }, \"ËøîÂõû\")]), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Â≠¶Ê†°ÂêçÁß∞\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.studentForm.school = $event),\n    type: \"text\",\n    placeholder: \"ËØ∑ËæìÂÖ•Â≠¶Ê†°ÂÖ®Áß∞\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.studentForm.school]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Â≠¶Âè∑\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.studentForm.studentId = $event),\n    type: \"text\",\n    placeholder: \"ËØ∑ËæìÂÖ•Â≠¶Âè∑\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.studentForm.studentId]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"Â≠¶ÁîüËØÅ/ÂΩïÂèñÈÄöÁü•‰π¶\", -1 /* CACHED */)), _createElementVNode(\"div\", {\n    class: \"upload-box\",\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.$refs.cardInput.click())\n  }, [$data.studentForm.cardImage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n    src: $data.studentForm.cardImage,\n    alt: \"Â≠¶ÁîüËØÅÈ¢ÑËßà\"\n  }, null, 8 /* PROPS */, _hoisted_8), _cache[9] || (_cache[9] = _createElementVNode(\"span\", {\n    class: \"reupload-text\"\n  }, \"ÁÇπÂáªÈáçÊñ∞‰∏ä‰º†\", -1 /* CACHED */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [...(_cache[10] || (_cache[10] = [_createElementVNode(\"span\", {\n    class: \"upload-icon\"\n  }, \"üì∑\", -1 /* CACHED */), _createElementVNode(\"span\", null, \"ÁÇπÂáª‰∏ä‰º†\", -1 /* CACHED */)]))]))]), _createElementVNode(\"input\", {\n    ref: \"cardInput\",\n    type: \"file\",\n    accept: \"image/*\",\n    style: {\n      \"display\": \"none\"\n    },\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.handleStudentCardUpload && $options.handleStudentCardUpload(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    class: \"submit-btn\",\n    disabled: $data.verifying,\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.submitStudentVerify && $options.submitStudentVerify(...args))\n  }, _toDisplayString($data.verifying ? 'Êèê‰∫§‰∏≠...' : 'Êèê‰∫§ËÆ§ËØÅ'), 9 /* TEXT, PROPS */, _hoisted_11)]), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.successMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$event","_ctx","$router","back","_hoisted_4","$data","studentForm","school","type","placeholder","_hoisted_5","studentId","_hoisted_6","$refs","cardInput","click","cardImage","_hoisted_7","src","alt","_hoisted_9","ref","accept","style","onChange","args","$options","handleStudentCardUpload","_hoisted_10","disabled","verifying","submitStudentVerify","_hoisted_11","errorMessage","_hoisted_12","_toDisplayString","successMessage","_hoisted_13"],"sources":["D:\\1_homework_file\\Â§ß‰∏â‰∏ä\\ËΩØ‰ª∂Â∑•Á®ã\\È°πÁõÆÁïôÊ°£\\1ÂâçÁ´ØÂºÄÂèë_ÊàëÊâçÊòØÁúüÁöÑ\\version5.0\\src\\views\\user\\StudentAuth.vue"],"sourcesContent":["<template>\r\n  <div class=\"student-auth-page\">\r\n    <div class=\"auth-card\">\r\n      <div class=\"auth-header\">\r\n        <div class=\"title\">\r\n          <span class=\"icon\">üéì</span>\r\n          <div>\r\n            <h2>Â≠¶ÁîüËÆ§ËØÅ</h2>\r\n            <p>Êèê‰∫§Â≠¶Áîü‰ø°ÊÅØÔºå‰∫´ÂèóÂ≠¶Áîü‰∏ìÂ±û‰ºòÊÉ†88ÊäòÔºÅ</p>\r\n          </div>\r\n        </div>\r\n        <button class=\"back-btn\" @click=\"$router.back()\">ËøîÂõû</button>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Â≠¶Ê†°ÂêçÁß∞</label>\r\n        <input v-model=\"studentForm.school\" type=\"text\" placeholder=\"ËØ∑ËæìÂÖ•Â≠¶Ê†°ÂÖ®Áß∞\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Â≠¶Âè∑</label>\r\n        <input v-model=\"studentForm.studentId\" type=\"text\" placeholder=\"ËØ∑ËæìÂÖ•Â≠¶Âè∑\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Â≠¶ÁîüËØÅ/ÂΩïÂèñÈÄöÁü•‰π¶</label>\r\n        <div class=\"upload-box\" @click=\"$refs.cardInput.click()\">\r\n          <div v-if=\"studentForm.cardImage\" class=\"preview-image\">\r\n            <img :src=\"studentForm.cardImage\" alt=\"Â≠¶ÁîüËØÅÈ¢ÑËßà\" />\r\n            <span class=\"reupload-text\">ÁÇπÂáªÈáçÊñ∞‰∏ä‰º†</span>\r\n          </div>\r\n          <div v-else class=\"upload-placeholder\">\r\n            <span class=\"upload-icon\">üì∑</span>\r\n            <span>ÁÇπÂáª‰∏ä‰º†</span>\r\n          </div>\r\n        </div>\r\n        <input\r\n          ref=\"cardInput\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          style=\"display: none\"\r\n          @change=\"handleStudentCardUpload\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"actions\">\r\n        <button class=\"submit-btn\" :disabled=\"verifying\" @click=\"submitStudentVerify\">\r\n          {{ verifying ? 'Êèê‰∫§‰∏≠...' : 'Êèê‰∫§ËÆ§ËØÅ' }}\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n      <div v-if=\"successMessage\" class=\"success-message\">{{ successMessage }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport apiConfig from '@/config/api.config';\r\n\r\nexport default {\r\n  name: 'StudentAuth',\r\n  data() {\r\n    return {\r\n      studentForm: {\r\n        school: '',\r\n        studentId: '',\r\n        cardImage: ''\r\n      },\r\n      verifying: false,\r\n      errorMessage: '',\r\n      successMessage: '',\r\n      status: -1 // -1: none, 0: pending, 1: approved, 2: rejected\r\n    };\r\n  },\r\n  methods: {\r\n    handleStudentCardUpload(event) {\r\n      const file = event.target.files && event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        this.studentForm.cardImage = reader.result;\r\n      };\r\n      reader.readAsDataURL(file);\r\n    },\r\n\r\n    async submitStudentVerify() {\r\n      this.errorMessage = '';\r\n      this.successMessage = '';\r\n\r\n      if (!this.studentForm.school || !this.studentForm.studentId || !this.studentForm.cardImage) {\r\n        this.errorMessage = 'ËØ∑ÂÆåÂñÑÂ≠¶Ê†°ÂêçÁß∞„ÄÅÂ≠¶Âè∑Âπ∂‰∏ä‰º†Â≠¶ÁîüËØÅÁÖßÁâá';\r\n        return;\r\n      }\r\n      \r\n      const user = JSON.parse(localStorage.getItem('userInfo') || '{}');\r\n      if (!user.uid && !user.id) {\r\n        this.errorMessage = 'ËØ∑ÂÖàÁôªÂΩï';\r\n        return;\r\n      }\r\n\r\n      this.verifying = true;\r\n      try {\r\n        const res = await axios.post(apiConfig.student.verify, {\r\n            uid: user.uid || user.id,\r\n            school: this.studentForm.school,\r\n            studentId: this.studentForm.studentId,\r\n            cardImage: this.studentForm.cardImage\r\n        });\r\n\r\n        if (res.data.code === 1) {\r\n            this.successMessage = 'ËÆ§ËØÅÂ∑≤Êèê‰∫§ÔºåÊ≠£Âú®ÂÆ°Ê†∏‰∏≠';\r\n            this.status = 0;\r\n        } else {\r\n            this.errorMessage = res.data.msg || 'Êèê‰∫§Â§±Ë¥•';\r\n        }\r\n      } catch (error) {\r\n        console.error('Êèê‰∫§Â≠¶ÁîüËÆ§ËØÅÂ§±Ë¥•:', error);\r\n        this.errorMessage = 'Êèê‰∫§Â≠¶ÁîüËÆ§ËØÅÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï';\r\n      } finally {\r\n        this.verifying = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.student-auth-page {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 30%, #90caf9 70%, #64b5f6 100%);\r\n  padding: 20px;\r\n}\r\n\r\n.auth-card {\r\n  background: #fff;\r\n  width: 480px;\r\n  padding: 28px;\r\n  border-radius: 6px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);\r\n  border: 1px solid #d0ddff;\r\n}\r\n\r\n.auth-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.title h2 {\r\n  margin: 0;\r\n  color: #182848;\r\n}\r\n\r\n.title p {\r\n  margin: 2px 0 0;\r\n  color: #4b6cb7;\r\n}\r\n\r\n.icon {\r\n  font-size: 26px;\r\n}\r\n\r\n.back-btn {\r\n  background: #182848;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 8px 14px;\r\n  cursor: pointer;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  margin-bottom: 14px;\r\n}\r\n\r\n.form-group label {\r\n  color: #182848;\r\n  font-weight: 600;\r\n}\r\n\r\n.form-group input {\r\n  padding: 12px;\r\n  border: 1px solid #d0ddff;\r\n  border-radius: 4px;\r\n  background: #f8fbff;\r\n}\r\n\r\n.upload-box {\r\n  height: 160px;\r\n  border: 2px dashed #bbdefb;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  background: #f8fbff;\r\n  overflow: hidden;\r\n}\r\n\r\n.upload-box:hover {\r\n  border-color: #4b6cb7;\r\n  background: #e3f2fd;\r\n}\r\n\r\n.upload-placeholder {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: #64b5f6;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 28px;\r\n}\r\n\r\n.preview-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.preview-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n}\r\n\r\n.reupload-text {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  color: white;\r\n  text-align: center;\r\n  padding: 8px;\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.preview-image:hover .reupload-text {\r\n  opacity: 1;\r\n}\r\n\r\n.actions {\r\n  margin-top: 12px;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background: linear-gradient(135deg, #4b6cb7, #182848);\r\n  color: #fff;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.submit-btn:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.error-message {\r\n  color: #f44336;\r\n  margin-top: 10px;\r\n  background: #ffebee;\r\n  padding: 8px;\r\n}\r\n\r\n.success-message {\r\n  color: #4caf50;\r\n  margin-top: 10px;\r\n  background: #e8f5e9;\r\n  padding: 8px;\r\n}\r\n</style>\r\n\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EACvBA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAa;;EAWnBA,KAAK,EAAC;AAAY;;EAKlBA,KAAK,EAAC;AAAY;;EAKlBA,KAAK,EAAC;AAAY;;;EAGeA,KAAK,EAAC;;;;;EAI5BA,KAAK,EAAC;;;EAcjBA,KAAK,EAAC;AAAS;;;;EAMKA,KAAK,EAAC;;;;EACJA,KAAK,EAAC;;;uBAnDrCC,mBAAA,CAqDM,OArDNC,UAqDM,GApDJC,mBAAA,CAmDM,OAnDNC,UAmDM,GAlDJD,mBAAA,CASM,OATNE,UASM,G,0BARJF,mBAAA,CAMM;IANDH,KAAK,EAAC;EAAO,IAChBG,mBAAA,CAA4B;IAAtBH,KAAK,EAAC;EAAM,GAAC,IAAE,GACrBG,mBAAA,CAGM,cAFJA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAA0B,WAAvB,qBAAmB,E,uBAG1BA,mBAAA,CAA4D;IAApDH,KAAK,EAAC,UAAU;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;KAAI,IAAE,E,GAGrDR,mBAAA,CAGM,OAHNS,UAGM,G,0BAFJT,mBAAA,CAAmB,eAAZ,MAAI,qB,gBACXA,mBAAA,CAAwE;+DAAxDU,KAAA,CAAAC,WAAW,CAACC,MAAM,GAAAP,MAAA;IAAEQ,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA5CJ,KAAA,CAAAC,WAAW,CAACC,MAAM,E,KAGpCZ,mBAAA,CAGM,OAHNe,UAGM,G,0BAFJf,mBAAA,CAAiB,eAAV,IAAE,qB,gBACTA,mBAAA,CAAyE;+DAAzDU,KAAA,CAAAC,WAAW,CAACK,SAAS,GAAAX,MAAA;IAAEQ,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA/CJ,KAAA,CAAAC,WAAW,CAACK,SAAS,E,KAGvChB,mBAAA,CAmBM,OAnBNiB,UAmBM,G,4BAlBJjB,mBAAA,CAAwB,eAAjB,WAAS,qBAChBA,mBAAA,CASM;IATDH,KAAK,EAAC,YAAY;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAY,KAAK,CAACC,SAAS,CAACC,KAAK;MACxCV,KAAA,CAAAC,WAAW,CAACU,SAAS,I,cAAhCvB,mBAAA,CAGM,OAHNwB,UAGM,GAFJtB,mBAAA,CAAgD;IAA1CuB,GAAG,EAAEb,KAAA,CAAAC,WAAW,CAACU,SAAS;IAAEG,GAAG,EAAC;iEACtCxB,mBAAA,CAAyC;IAAnCH,KAAK,EAAC;EAAe,GAAC,QAAM,oB,oBAEpCC,mBAAA,CAGM,OAHN2B,UAGM,OAAArB,MAAA,SAAAA,MAAA,QAFJJ,mBAAA,CAAmC;IAA7BH,KAAK,EAAC;EAAa,GAAC,IAAE,oBAC5BG,mBAAA,CAAiB,cAAX,MAAI,mB,SAGdA,mBAAA,CAME;IALA0B,GAAG,EAAC,WAAW;IACfb,IAAI,EAAC,MAAM;IACXc,MAAM,EAAC,SAAS;IAChBC,KAAqB,EAArB;MAAA;IAAA,CAAqB;IACpBC,QAAM,EAAAzB,MAAA,QAAAA,MAAA,UAAA0B,IAAA,KAAEC,QAAA,CAAAC,uBAAA,IAAAD,QAAA,CAAAC,uBAAA,IAAAF,IAAA,CAAuB;oDAIpC9B,mBAAA,CAIM,OAJNiC,WAIM,GAHJjC,mBAAA,CAES;IAFDH,KAAK,EAAC,YAAY;IAAEqC,QAAQ,EAAExB,KAAA,CAAAyB,SAAS;IAAGhC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAA0B,IAAA,KAAEC,QAAA,CAAAK,mBAAA,IAAAL,QAAA,CAAAK,mBAAA,IAAAN,IAAA,CAAmB;sBACvEpB,KAAA,CAAAyB,SAAS,4CAAAE,WAAA,E,GAIL3B,KAAA,CAAA4B,YAAY,I,cAAvBxC,mBAAA,CAAuE,OAAvEyC,WAAuE,EAAAC,gBAAA,CAArB9B,KAAA,CAAA4B,YAAY,oB,mCACnD5B,KAAA,CAAA+B,cAAc,I,cAAzB3C,mBAAA,CAA6E,OAA7E4C,WAA6E,EAAAF,gBAAA,CAAvB9B,KAAA,CAAA+B,cAAc,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}