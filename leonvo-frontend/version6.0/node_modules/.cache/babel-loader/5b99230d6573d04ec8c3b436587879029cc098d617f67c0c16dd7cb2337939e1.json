{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport Chart from 'chart.js/auto';\nimport axios from 'axios';\nimport apiConfig from '@/config/api.config';\nexport default {\n  name: 'BusinessStatistics',\n  data() {\n    const today = new Date();\n    const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n    return {\n      loading: false,\n      dateRange: 'week',\n      startDate: weekAgo.toISOString().split('T')[0],\n      endDate: today.toISOString().split('T')[0],\n      chartType: 'line',\n      dataType: 'sales',\n      stats: {\n        total_sales: 0,\n        sales_change: 0,\n        total_orders: 0,\n        orders_change: 0,\n        avg_order_value: 0,\n        avg_change: 0,\n        total_customers: 0,\n        customers_change: 0\n      },\n      productRankings: [],\n      dailyData: [],\n      selectedDay: null,\n      trendChart: null,\n      distributionChart: null\n    };\n  },\n  mounted() {\n    this.loadStatistics();\n  },\n  beforeDestroy() {\n    if (this.trendChart) {\n      this.trendChart.destroy();\n    }\n    if (this.distributionChart) {\n      this.distributionChart.destroy();\n    }\n  },\n  methods: {\n    formatNumber(num) {\n      if (!num) return '0';\n      if (num >= 10000) {\n        return (num / 10000).toFixed(1) + 'ä¸‡';\n      }\n      return num.toLocaleString();\n    },\n    getChangeClass(change) {\n      if (change > 0) return 'positive';\n      if (change < 0) return 'negative';\n      return 'neutral';\n    },\n    getRankClass(rank) {\n      if (rank === 1) return 'first';\n      if (rank === 2) return 'second';\n      if (rank === 3) return 'third';\n      return 'other';\n    },\n    formatDateRange() {\n      const start = new Date(this.startDate);\n      const end = new Date(this.endDate);\n      if (this.dateRange === 'custom') {\n        return `${start.toLocaleDateString('zh-CN')} - ${end.toLocaleDateString('zh-CN')}`;\n      }\n      const ranges = {\n        'week': 'æœ€è¿‘7å¤©',\n        'month': 'æœ€è¿‘30å¤©',\n        'quarter': 'æœ€è¿‘3ä¸ªæœˆ',\n        'year': 'ä»Šå¹´'\n      };\n      return ranges[this.dateRange] || 'æœ€è¿‘7å¤©';\n    },\n    // è·å–å•†å®¶ID\n    getBusinessId() {\n      const businessInfo = JSON.parse(localStorage.getItem('businessInfo'));\n      if (!businessInfo) return null;\n      return businessInfo.bid || businessInfo.id;\n    },\n    // ä¿®æ”¹loadStatisticsæ–¹æ³•ï¼Œä½¿ç”¨apiConfig\n    async loadStatistics() {\n      this.loading = true;\n      const businessInfo = JSON.parse(localStorage.getItem('businessInfo'));\n      const bid = businessInfo?.bid || businessInfo?.id;\n      if (!bid) {\n        console.error('æœªæ‰¾åˆ°å•†å®¶ä¿¡æ¯');\n        this.$router.push('/business/login');\n        return;\n      }\n      try {\n        // 1. è·å–å•†å“æ•°æ® - ä½¿ç”¨apiConfig\n        const productsResponse = await axios.get(apiConfig.business.getProducts(bid));\n        let products = [];\n        if (productsResponse.data.code === 1) {\n          products = productsResponse.data.data || [];\n        }\n\n        // 2. è·å–è®¢å•æ•°æ® - ä½¿ç”¨apiConfig\n        const ordersResponse = await axios.get(apiConfig.business.getOrders(bid));\n        let orders = [];\n        if (ordersResponse.data.code === 1) {\n          orders = ordersResponse.data.data || [];\n        }\n\n        // 3. è®¡ç®—ç»Ÿè®¡æ¦‚è§ˆ\n        const totalSales = orders.reduce((sum, order) => sum + (order.amount || 0), 0);\n        const totalOrders = orders.length;\n        const avgOrderValue = totalOrders > 0 ? (totalSales / totalOrders).toFixed(2) : 0;\n\n        // è®¡ç®—å˜åŒ–ç‡ï¼ˆä½¿ç”¨çœŸå®æ•°æ®ï¼Œæ¯”è¾ƒå½“å‰ä¸å‰ä¸€å‘¨æœŸï¼‰\n        // åˆå§‹åŒ–å˜åŒ–ç‡ä¸º0\n        this.stats = {\n          total_sales: totalSales,\n          sales_change: 0,\n          // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\n          total_orders: totalOrders,\n          orders_change: 0,\n          // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\n          avg_order_value: avgOrderValue,\n          avg_change: 0,\n          // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\n          total_customers: new Set(orders.map(order => order.uid)).size,\n          customers_change: 0 // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\n        };\n\n        // 4. è·å–é”€å”®è¶‹åŠ¿ - æ ¹æ®æ—¥æœŸèŒƒå›´ç¡®å®šå¤©æ•°\n        let days = 7;\n        if (this.dateRange === 'month') {\n          days = 30;\n        } else if (this.dateRange === 'quarter') {\n          days = 90;\n        } else if (this.dateRange === 'year') {\n          days = 365;\n        } else if (this.dateRange === 'custom') {\n          // è®¡ç®—è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´å†…çš„å¤©æ•°\n          const start = new Date(this.startDate);\n          const end = new Date(this.endDate);\n          days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\n        }\n        const trendData = await this.calculateSalesTrend(bid, days);\n        this.renderTrendChart(trendData);\n\n        // 5. è·å–å•†å“æ’è¡Œ\n        this.productRankings = products.filter(p => p.status === 1).sort((a, b) => (b.sales_count || 0) - (a.sales_count || 0)).slice(0, 10).map((product, index) => ({\n          id: product.pid,\n          name: product.name,\n          sku: `SKU${product.pid}`,\n          sales_amount: (product.price || 0) * (product.sales_count || 0),\n          orders_count: product.sales_count || 0,\n          percentage: 0\n        }));\n\n        // è®¡ç®—å æ¯”\n        const totalProductSales = this.productRankings.reduce((sum, p) => sum + p.sales_amount, 0);\n        this.productRankings = this.productRankings.map(p => ({\n          ...p,\n          percentage: totalProductSales > 0 ? (p.sales_amount / totalProductSales * 100).toFixed(1) : '0.0'\n        }));\n\n        // 6. ç”Ÿæˆè®¢å•çŠ¶æ€åˆ†å¸ƒ\n        const statusDistribution = {\n          labels: ['å¾…ä»˜æ¬¾', 'å¾…å‘è´§', 'å·²å‘è´§', 'å·²å®Œæˆ', 'å·²å–æ¶ˆ'],\n          values: [0, 0, 0, 0, 0]\n        };\n        orders.forEach(order => {\n          if (order.status >= 0 && order.status <= 4) {\n            statusDistribution.values[order.status]++;\n          }\n        });\n        this.renderDistributionChart(statusDistribution);\n\n        // 7. ç”Ÿæˆæ¯æ—¥æ•°æ®\n        this.generateDailyData(orders);\n      } catch (error) {\n        console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);\n        this.useMockData();\n      } finally {\n        this.loading = false;\n      }\n    },\n    // æ·»åŠ calculateSalesTrendæ–¹æ³•\n    async calculateSalesTrend(bid, days) {\n      try {\n        // è·å–è®¢å•æ•°æ®\n        const ordersResponse = await axios.get(apiConfig.business.getOrders(bid));\n        let orders = [];\n        if (ordersResponse.data.code === 1) {\n          orders = ordersResponse.data.data || [];\n        }\n\n        // ç”Ÿæˆé”€å”®æ•°æ®çš„æ—¥æœŸèŒƒå›´\n        const labels = [];\n        const sales = [];\n        const ordersCount = [];\n        const customersCount = [];\n        let startDate, endDate;\n\n        // æ ¹æ®æ—¥æœŸèŒƒå›´ç±»å‹ç¡®å®šèµ·å§‹å’Œç»“æŸæ—¥æœŸ\n        if (this.dateRange === 'custom') {\n          // ä½¿ç”¨è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´\n          startDate = new Date(this.startDate);\n          endDate = new Date(this.endDate);\n        } else {\n          // ä½¿ç”¨ç›¸å¯¹æ—¥æœŸèŒƒå›´\n          endDate = new Date();\n          startDate = new Date(endDate.getTime() - (days - 1) * 24 * 60 * 60 * 1000);\n        }\n\n        // ç”Ÿæˆæ—¥æœŸèŒƒå›´å†…çš„æ¯ä¸€å¤©æ•°æ®\n        const currentDate = new Date(startDate);\n        while (currentDate <= endDate) {\n          const dateStr = `${currentDate.getMonth() + 1}/${currentDate.getDate()}`;\n          labels.push(dateStr);\n\n          // è¿‡æ»¤å½“å¤©çš„è®¢å•\n          const dayOrders = orders.filter(order => {\n            const orderDate = new Date(order.orderTime);\n            return orderDate.toDateString() === currentDate.toDateString();\n          });\n          sales.push(dayOrders.reduce((sum, order) => sum + (order.amount || 0), 0));\n          ordersCount.push(dayOrders.length);\n          customersCount.push(new Set(dayOrders.map(order => order.uid)).size);\n\n          // ç§»åŠ¨åˆ°ä¸‹ä¸€å¤©\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n        return {\n          labels,\n          sales,\n          orders: ordersCount,\n          customers: customersCount\n        };\n      } catch (error) {\n        console.error('è·å–é”€å”®è¶‹åŠ¿å¤±è´¥:', error);\n        // å‘ç”Ÿé”™è¯¯æ—¶è¿”å›ç©ºæ•°æ®ï¼Œä¸ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n        return {\n          labels: [],\n          sales: [],\n          orders: [],\n          customers: []\n        };\n      }\n    },\n    // ä¿®æ”¹generateDailyDataæ–¹æ³•ï¼Œæ ¹æ®startDateå’ŒendDateç”Ÿæˆæ•°æ®ï¼Œåªæ˜¾ç¤ºæœ‰é”€å”®é¢çš„æ—¥æœŸ\n    generateDailyData(orders) {\n      const today = new Date();\n      let startDate, endDate;\n\n      // æ ¹æ®dateRangeç¡®å®šæ—¥æœŸèŒƒå›´\n      if (this.dateRange === 'custom') {\n        startDate = new Date(this.startDate);\n        endDate = new Date(this.endDate);\n      } else {\n        // é»˜è®¤ç”Ÿæˆæœ€è¿‘7å¤©çš„æ•°æ®\n        endDate = today;\n        startDate = new Date(today.getTime() - 6 * 24 * 60 * 60 * 1000);\n      }\n      const tempData = [];\n\n      // è®¡ç®—æ—¥æœŸèŒƒå›´å†…çš„æ€»å¤©æ•°\n      const daysDiff = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\n\n      // ç”Ÿæˆæ—¥æœŸèŒƒå›´å†…çš„æ•°æ®\n      for (let i = 0; i < daysDiff; i++) {\n        const date = new Date(startDate);\n        date.setDate(startDate.getDate() + i);\n        const dayStr = date.toLocaleDateString('zh-CN', {\n          month: '2-digit',\n          day: '2-digit'\n        });\n\n        // è¿‡æ»¤å½“å¤©çš„è®¢å•\n        const dayOrders = orders.filter(order => {\n          const orderDate = new Date(order.orderTime);\n          return orderDate.toDateString() === date.toDateString();\n        });\n        const sales = dayOrders.reduce((sum, order) => sum + (order.amount || 0), 0);\n        const customers = new Set(dayOrders.map(order => order.uid)).size;\n\n        // åªæ·»åŠ é”€å”®é¢å¤§äº0çš„æ•°æ®\n        if (sales > 0) {\n          tempData.push({\n            date: dayStr,\n            sales: sales,\n            orders: dayOrders.length,\n            customers: customers,\n            avg_order_value: dayOrders.length > 0 ? Math.round(sales / dayOrders.length) : 0,\n            // è½¬åŒ–ç‡ï¼šè®¢å•æ•° / é¡¾å®¢æ•° * 100%ï¼ˆå³æ¯ä¸ªé¡¾å®¢å¹³å‡ä¸‹å•æ•°ç™¾åˆ†æ¯”ï¼‰\n            // å®é™…é¡¹ç›®ä¸­åº”ä»åç«¯è·å–çœŸå®çš„è®¿å®¢æ•°æ®ï¼Œè¿™é‡Œä½¿ç”¨è´­ä¹°é¡¾å®¢æ•°ä½œä¸ºæ›¿ä»£\n            conversion_rate: customers > 0 ? (dayOrders.length / customers * 100).toFixed(1) : '0.0'\n          });\n        }\n      }\n\n      // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œæ·»åŠ æç¤ºä¿¡æ¯\n      if (tempData.length === 0) {\n        this.dailyData = [];\n      } else {\n        this.dailyData = tempData;\n      }\n    },\n    renderTrendChart(data) {\n      const ctx = this.$refs.trendChart;\n      if (!ctx) return;\n      if (this.trendChart) {\n        this.trendChart.destroy();\n      }\n      const chartType = this.chartType === 'bar' ? 'bar' : 'line';\n      let dataSet;\n      if (this.dataType === 'sales' && data.sales) {\n        dataSet = {\n          label: 'é”€å”®é¢',\n          data: data.sales,\n          borderColor: '#667eea',\n          backgroundColor: chartType === 'bar' ? '#667eea' : 'rgba(102, 126, 234, 0.1)',\n          yAxisID: 'y'\n        };\n      } else if (this.dataType === 'orders' && data.orders) {\n        dataSet = {\n          label: 'è®¢å•æ•°',\n          data: data.orders,\n          borderColor: '#ed8936',\n          backgroundColor: chartType === 'bar' ? '#ed8936' : 'rgba(237, 137, 54, 0.1)',\n          yAxisID: 'y1'\n        };\n      } else if (this.dataType === 'customers' && data.customers) {\n        dataSet = {\n          label: 'é¡¾å®¢æ•°',\n          data: data.customers,\n          borderColor: '#48bb78',\n          backgroundColor: chartType === 'bar' ? '#48bb78' : 'rgba(72, 187, 120, 0.1)',\n          yAxisID: 'y1'\n        };\n      } else {\n        // é»˜è®¤æ˜¾ç¤ºé”€å”®é¢ï¼Œä½¿ç”¨ç©ºæ•°æ®\n        dataSet = {\n          label: 'é”€å”®é¢',\n          data: data.values || data.sales || [],\n          borderColor: '#667eea',\n          backgroundColor: chartType === 'bar' ? '#667eea' : 'rgba(102, 126, 234, 0.1)',\n          yAxisID: 'y'\n        };\n      }\n      const chartData = {\n        labels: data.labels || data.dates || [],\n        datasets: [{\n          ...dataSet,\n          borderWidth: chartType === 'bar' ? 0 : 2,\n          fill: chartType !== 'bar',\n          tension: 0.4\n        }]\n      };\n      this.trendChart = new Chart(ctx, {\n        type: chartType,\n        data: chartData,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              display: true,\n              position: 'top'\n            }\n          },\n          scales: {\n            y: {\n              type: 'linear',\n              display: this.dataType === 'sales',\n              position: 'left',\n              beginAtZero: true,\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              },\n              ticks: {\n                callback: function (value) {\n                  return 'Â¥' + value;\n                }\n              }\n            },\n            y1: {\n              type: 'linear',\n              display: this.dataType !== 'sales',\n              position: 'right',\n              beginAtZero: true,\n              grid: {\n                drawOnChartArea: false\n              }\n            },\n            x: {\n              grid: {\n                color: 'rgba(0, 0, 0, 0.05)'\n              }\n            }\n          }\n        }\n      });\n    },\n    renderDistributionChart(data) {\n      const ctx = this.$refs.distributionChart;\n      if (!ctx) return;\n      if (this.distributionChart) {\n        this.distributionChart.destroy();\n      }\n      const chartData = {\n        labels: data.labels || [],\n        datasets: [{\n          data: data.values || [],\n          backgroundColor: ['#ff9800', '#2196f3', '#4caf50', '#9c27b0', '#f44336'],\n          borderWidth: 0\n        }]\n      };\n      this.distributionChart = new Chart(ctx, {\n        type: 'doughnut',\n        data: chartData,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'right'\n            }\n          },\n          cutout: '70%'\n        }\n      });\n    },\n    // åˆ é™¤æ¨¡æ‹Ÿæ•°æ®ï¼Œæ”¹ä¸ºä½¿ç”¨ç©ºæ•°æ®\n    useMockData() {\n      // åªæœ‰åœ¨APIè°ƒç”¨å¤±è´¥æ—¶ä½¿ç”¨ç©ºæ•°æ®\n      this.stats = {\n        total_sales: 0,\n        sales_change: 0,\n        total_orders: 0,\n        orders_change: 0,\n        avg_order_value: 0,\n        avg_change: 0,\n        total_customers: 0,\n        customers_change: 0\n      };\n      this.productRankings = [];\n      this.dailyData = [];\n\n      // æ¸²æŸ“ç©ºå›¾è¡¨ï¼Œä¸ä½¿ç”¨ä»»ä½•æ¨¡æ‹Ÿæ•°æ®\n      setTimeout(() => {\n        this.renderTrendChart({\n          labels: [],\n          values: []\n        });\n        this.renderDistributionChart({\n          labels: [],\n          values: []\n        });\n      }, 100);\n    },\n    viewAllProducts() {\n      this.$router.push('/business/products');\n    },\n    viewDayDetail(day) {\n      // è¿™é‡Œå¯ä»¥è°ƒç”¨APIè·å–å½“æ—¥è¯¦æƒ…\n      this.selectedDay = {\n        ...day,\n        order_details: [] // å®é™…é¡¹ç›®ä¸­åº”è¯¥ä»APIè·å–\n      };\n    },\n    exportStatistics() {\n      // å¯¼å‡ºç»Ÿè®¡æŠ¥è¡¨\n      const data = {\n        ç»Ÿè®¡æ—¶é—´æ®µ: this.formatDateRange(),\n        æ€»é”€å”®é¢: `Â¥${this.formatNumber(this.stats.total_sales)}`,\n        æ€»è®¢å•æ•°: this.stats.total_orders,\n        æ€»é¡¾å®¢æ•°: this.stats.total_customers,\n        å®¢å•ä»·: `Â¥${this.stats.avg_order_value}`,\n        é”€å”®é¢å˜åŒ–: `${this.stats.sales_change > 0 ? '+' : ''}${this.stats.sales_change}%`,\n        è®¢å•å˜åŒ–: `${this.stats.orders_change > 0 ? '+' : ''}${this.stats.orders_change}%`\n      };\n      const csvContent = \"data:text/csv;charset=utf-8,\" + Object.entries(data).map(([key, value]) => `${key},${value}`).join(\"\\n\");\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", `é”€å”®ç»Ÿè®¡_${new Date().toLocaleDateString()}.csv`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  },\n  watch: {\n    dateRange() {\n      const today = new Date();\n      let startDate;\n      switch (this.dateRange) {\n        case 'week':\n          startDate = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n          break;\n        case 'month':\n          startDate = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);\n          break;\n        case 'quarter':\n          startDate = new Date(today.getTime() - 90 * 24 * 60 * 60 * 1000);\n          break;\n        case 'year':\n          startDate = new Date(today.getFullYear(), 0, 1);\n          break;\n        default:\n          return;\n      }\n      this.startDate = startDate.toISOString().split('T')[0];\n      this.endDate = today.toISOString().split('T')[0];\n      if (this.dateRange !== 'custom') {\n        this.loadStatistics();\n      }\n    },\n    // æ·»åŠ æ—¥æœŸéªŒè¯ï¼Œç¡®ä¿æ—¥æœŸèŒƒå›´æœ‰æ•ˆ\n    startDate(newVal, oldVal) {\n      if (this.dateRange === 'custom') {\n        // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ—©äº1900å¹´\n        const minDate = new Date('1900-01-01');\n        const startDate = new Date(newVal);\n        if (startDate < minDate) {\n          this.startDate = '1900-01-01';\n          return;\n        }\n\n        // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ™šäºç»“æŸæ—¥æœŸ\n        const endDate = new Date(this.endDate);\n        if (startDate > endDate) {\n          this.startDate = this.endDate;\n          return;\n        }\n        this.loadStatistics();\n      }\n    },\n    endDate(newVal, oldVal) {\n      if (this.dateRange === 'custom') {\n        // ç¡®ä¿ç»“æŸæ—¥æœŸä¸æ—©äºå¼€å§‹æ—¥æœŸ\n        const startDate = new Date(this.startDate);\n        const endDate = new Date(newVal);\n        if (endDate < startDate) {\n          this.endDate = this.startDate;\n          return;\n        }\n\n        // ç¡®ä¿ç»“æŸæ—¥æœŸä¸æ™šäºä»Šå¤©\n        const today = new Date();\n        if (endDate > today) {\n          this.endDate = today.toISOString().split('T')[0];\n          return;\n        }\n        this.loadStatistics();\n      }\n    },\n    chartType() {\n      if (this.trendChart) {\n        this.loadStatistics();\n      }\n    },\n    dataType() {\n      if (this.trendChart) {\n        this.loadStatistics();\n      }\n    }\n  }\n};","map":{"version":3,"names":["Chart","axios","apiConfig","name","data","today","Date","weekAgo","getTime","loading","dateRange","startDate","toISOString","split","endDate","chartType","dataType","stats","total_sales","sales_change","total_orders","orders_change","avg_order_value","avg_change","total_customers","customers_change","productRankings","dailyData","selectedDay","trendChart","distributionChart","mounted","loadStatistics","beforeDestroy","destroy","methods","formatNumber","num","toFixed","toLocaleString","getChangeClass","change","getRankClass","rank","formatDateRange","start","end","toLocaleDateString","ranges","getBusinessId","businessInfo","JSON","parse","localStorage","getItem","bid","id","console","error","$router","push","productsResponse","get","business","getProducts","products","code","ordersResponse","getOrders","orders","totalSales","reduce","sum","order","amount","totalOrders","length","avgOrderValue","Set","map","uid","size","days","Math","ceil","trendData","calculateSalesTrend","renderTrendChart","filter","p","status","sort","a","b","sales_count","slice","product","index","pid","sku","sales_amount","price","orders_count","percentage","totalProductSales","statusDistribution","labels","values","forEach","renderDistributionChart","generateDailyData","useMockData","sales","ordersCount","customersCount","currentDate","dateStr","getMonth","getDate","dayOrders","orderDate","orderTime","toDateString","setDate","customers","tempData","daysDiff","i","date","dayStr","month","day","round","conversion_rate","ctx","$refs","dataSet","label","borderColor","backgroundColor","yAxisID","chartData","dates","datasets","borderWidth","fill","tension","type","options","responsive","maintainAspectRatio","plugins","legend","display","position","scales","y","beginAtZero","grid","color","ticks","callback","value","y1","drawOnChartArea","x","cutout","setTimeout","viewAllProducts","viewDayDetail","order_details","exportStatistics","ç»Ÿè®¡æ—¶é—´æ®µ","æ€»é”€å”®é¢","æ€»è®¢å•æ•°","æ€»é¡¾å®¢æ•°","å®¢å•ä»·","é”€å”®é¢å˜åŒ–","è®¢å•å˜åŒ–","csvContent","Object","entries","key","join","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","removeChild","watch","getFullYear","newVal","oldVal","minDate"],"sources":["D:\\1_homework_file\\å¤§ä¸‰ä¸Š\\è½¯ä»¶å·¥ç¨‹\\é¡¹ç›®ç•™æ¡£\\1å‰ç«¯å¼€å‘_æˆ‘æ‰æ˜¯çœŸçš„\\version5.0\\src\\views\\business\\BusinessStatistic.vue"],"sourcesContent":["<template>\r\n  <div class=\"merchant-statistics\">\r\n    <!-- é¡µé¢å¤´éƒ¨ -->\r\n    <div class=\"page-header\">\r\n      <h2>é”€å”®ç»Ÿè®¡</h2>\r\n      <div class=\"header-actions\">\r\n        <select v-model=\"dateRange\" class=\"filter-select\">\r\n          <option value=\"week\">æœ€è¿‘7å¤©</option>\r\n          <option value=\"month\">æœ€è¿‘30å¤©</option>\r\n          <option value=\"quarter\">æœ€è¿‘3ä¸ªæœˆ</option>\r\n          <option value=\"year\">ä»Šå¹´</option>\r\n          <option value=\"custom\">è‡ªå®šä¹‰</option>\r\n        </select>\r\n\r\n        <div v-if=\"dateRange === 'custom'\" class=\"custom-date\">\r\n          <input type=\"date\" v-model=\"startDate\" :min=\"'1900-01-01'\" :max=\"endDate\">\r\n          <span>è‡³</span>\r\n          <input type=\"date\" v-model=\"endDate\" :min=\"startDate\" :max=\"new Date().toISOString().split('T')[0]\">\r\n        </div>\r\n\r\n        <button class=\"btn-export\" @click=\"exportStatistics\">\r\n          <span class=\"export-icon\">ğŸ“¥</span>\r\n          å¯¼å‡ºæŠ¥è¡¨\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ç»Ÿè®¡æ¦‚è§ˆ -->\r\n    <div class=\"stats-overview\">\r\n      <div class=\"overview-card\">\r\n        <div class=\"overview-icon sales\">\r\n          <span>ğŸ’°</span>\r\n        </div>\r\n        <div class=\"overview-content\">\r\n          <div class=\"overview-value\">Â¥{{ formatNumber(stats.total_sales) }}</div>\r\n          <div class=\"overview-label\">æ€»é”€å”®é¢</div>\r\n          <div class=\"overview-change\" :class=\"getChangeClass(stats.sales_change)\">\r\n            {{ stats.sales_change > 0 ? '+' : '' }}{{ stats.sales_change }}%\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"overview-card\">\r\n        <div class=\"overview-icon orders\">\r\n          <span>ğŸ“¦</span>\r\n        </div>\r\n        <div class=\"overview-content\">\r\n          <div class=\"overview-value\">{{ stats.total_orders }}</div>\r\n          <div class=\"overview-label\">æ€»è®¢å•æ•°</div>\r\n          <div class=\"overview-change\" :class=\"getChangeClass(stats.orders_change)\">\r\n            {{ stats.orders_change > 0 ? '+' : '' }}{{ stats.orders_change }}%\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"overview-card\">\r\n        <div class=\"overview-icon avg\">\r\n          <span>ğŸ“Š</span>\r\n        </div>\r\n        <div class=\"overview-content\">\r\n          <div class=\"overview-value\">Â¥{{ stats.avg_order_value }}</div>\r\n          <div class=\"overview-label\">å®¢å•ä»·</div>\r\n          <div class=\"overview-change\" :class=\"getChangeClass(stats.avg_change)\">\r\n            {{ stats.avg_change > 0 ? '+' : '' }}{{ stats.avg_change }}%\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"overview-card\">\r\n        <div class=\"overview-icon customers\">\r\n          <span>ğŸ‘¥</span>\r\n        </div>\r\n        <div class=\"overview-content\">\r\n          <div class=\"overview-value\">{{ stats.total_customers }}</div>\r\n          <div class=\"overview-label\">é¡¾å®¢æ•°</div>\r\n          <div class=\"overview-change\" :class=\"getChangeClass(stats.customers_change)\">\r\n            {{ stats.customers_change > 0 ? '+' : '' }}{{ stats.customers_change }}%\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- é”€å”®è¶‹åŠ¿å›¾è¡¨ -->\r\n    <div class=\"chart-section\">\r\n      <div class=\"chart-card\">\r\n        <div class=\"chart-header\">\r\n          <h3>é”€å”®è¶‹åŠ¿</h3>\r\n          <div class=\"chart-actions\">\r\n            <select v-model=\"chartType\" class=\"chart-select\">\r\n              <option value=\"line\">æŠ˜çº¿å›¾</option>\r\n              <option value=\"bar\">æŸ±çŠ¶å›¾</option>\r\n            </select>\r\n            <select v-model=\"dataType\" class=\"chart-select\">\r\n              <option value=\"sales\">é”€å”®é¢</option>\r\n              <option value=\"orders\">è®¢å•æ•°</option>\r\n              <option value=\"customers\">é¡¾å®¢æ•°</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"chart-container\">\r\n          <canvas ref=\"trendChart\"></canvas>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- é”€å”®æ’è¡Œ -->\r\n    <div class=\"ranking-section\">\r\n      <div class=\"ranking-card\">\r\n        <div class=\"ranking-header\">\r\n          <h3>å•†å“é”€å”®æ’è¡Œ</h3>\r\n          <button class=\"btn-view-all\" @click=\"viewAllProducts\">æŸ¥çœ‹å…¨éƒ¨</button>\r\n        </div>\r\n        <div class=\"ranking-table\">\r\n          <table>\r\n            <thead>\r\n            <tr>\r\n              <th>æ’å</th>\r\n              <th>å•†å“</th>\r\n              <th>é”€å”®é¢</th>\r\n              <th>è®¢å•æ•°</th>\r\n              <th>å æ¯”</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr v-for=\"(product, index) in productRankings\" :key=\"product.id\">\r\n              <td>\r\n                  <span :class=\"['rank-badge', getRankClass(index + 1)]\">\r\n                    {{ index + 1 }}\r\n                  </span>\r\n              </td>\r\n              <td>\r\n                <div class=\"product-info\">\r\n                  <div class=\"product-name\">{{ product.name }}</div>\r\n                  <div class=\"product-sku\">{{ product.sku }}</div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"sales-amount\">Â¥{{ product.sales_amount }}</div>\r\n              </td>\r\n              <td>\r\n                <div class=\"orders-count\">{{ product.orders_count }}</div>\r\n              </td>\r\n              <td>\r\n                <div class=\"percentage\">\r\n                  <div class=\"percentage-bar\">\r\n                    <div\r\n                        class=\"percentage-fill\"\r\n                        :style=\"{ width: product.percentage + '%' }\"\r\n                    ></div>\r\n                  </div>\r\n                  <span class=\"percentage-value\">{{ product.percentage }}%</span>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"productRankings.length === 0\">\r\n              <td colspan=\"5\" class=\"no-data\">æš‚æ— é”€å”®æ•°æ®</td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"ranking-card\">\r\n        <div class=\"ranking-header\">\r\n          <h3>è®¢å•çŠ¶æ€åˆ†å¸ƒ</h3>\r\n        </div>\r\n        <div class=\"distribution-chart\">\r\n          <canvas ref=\"distributionChart\"></canvas>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è¯¦ç»†æ•°æ®è¡¨æ ¼ -->\r\n    <div class=\"detail-section\">\r\n      <div class=\"detail-header\">\r\n        <h3>è¯¦ç»†é”€å”®æ•°æ®</h3>\r\n        <div class=\"date-range-info\">\r\n          {{ formatDateRange() }}\r\n        </div>\r\n      </div>\r\n      <div class=\"detail-table\">\r\n        <table>\r\n          <thead>\r\n          <tr>\r\n            <th>æ—¥æœŸ</th>\r\n            <th>é”€å”®é¢</th>\r\n            <th>è®¢å•æ•°</th>\r\n            <th>é¡¾å®¢æ•°</th>\r\n            <th>å®¢å•ä»·</th>\r\n            <th>è½¬åŒ–ç‡</th>\r\n            <th>è¯¦æƒ…</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr v-for=\"day in dailyData\" :key=\"day.date\">\r\n            <td>{{ day.date }}</td>\r\n            <td>Â¥{{ day.sales }}</td>\r\n            <td>{{ day.orders }}</td>\r\n            <td>{{ day.customers }}</td>\r\n            <td>Â¥{{ day.avg_order_value }}</td>\r\n            <td>{{ day.conversion_rate }}%</td>\r\n            <td>\r\n              <button class=\"btn-detail\" @click=\"viewDayDetail(day)\">\r\n                æŸ¥çœ‹\r\n              </button>\r\n            </td>\r\n          </tr>\r\n          <tr v-if=\"dailyData.length === 0\">\r\n            <td colspan=\"7\" class=\"no-data\">æš‚æ— æ•°æ®</td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ—¥æœŸè¯¦æƒ…æ¨¡æ€æ¡† -->\r\n    <div v-if=\"selectedDay\" class=\"modal-overlay\" @click.self=\"selectedDay = null\">\r\n      <div class=\"modal modal-lg\">\r\n        <div class=\"modal-header\">\r\n          <h3>{{ selectedDay.date }} é”€å”®è¯¦æƒ…</h3>\r\n          <button class=\"modal-close\" @click=\"selectedDay = null\">Ã—</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"day-detail\">\r\n            <div class=\"day-stats\">\r\n              <div class=\"stat-item\">\r\n                <div class=\"stat-value\">Â¥{{ selectedDay.sales }}</div>\r\n                <div class=\"stat-label\">é”€å”®é¢</div>\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <div class=\"stat-value\">{{ selectedDay.orders }}</div>\r\n                <div class=\"stat-label\">è®¢å•æ•°</div>\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <div class=\"stat-value\">{{ selectedDay.customers }}</div>\r\n                <div class=\"stat-label\">é¡¾å®¢æ•°</div>\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <div class=\"stat-value\">Â¥{{ selectedDay.avg_order_value }}</div>\r\n                <div class=\"stat-label\">å®¢å•ä»·</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"day-orders\" v-if=\"selectedDay.order_details\">\r\n              <h4>å½“æ—¥è®¢å•</h4>\r\n              <div class=\"orders-list\">\r\n                <div v-for=\"order in selectedDay.order_details\" :key=\"order.id\" class=\"order-item\">\r\n                  <div class=\"order-id\">#{{ order.id }}</div>\r\n                  <div class=\"order-amount\">Â¥{{ order.amount }}</div>\r\n                  <div class=\"order-status\">{{ getStatusText(order.status) }}</div>\r\n                  <div class=\"order-time\">{{ order.time }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Chart from 'chart.js/auto';\r\nimport axios from 'axios';\r\nimport apiConfig from '@/config/api.config';\r\n\r\nexport default {\r\n  name: 'BusinessStatistics',\r\n  data() {\r\n    const today = new Date();\r\n    const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n\r\n    return {\r\n      loading: false,\r\n      dateRange: 'week',\r\n      startDate: weekAgo.toISOString().split('T')[0],\r\n      endDate: today.toISOString().split('T')[0],\r\n      chartType: 'line',\r\n      dataType: 'sales',\r\n\r\n      stats: {\r\n        total_sales: 0,\r\n        sales_change: 0,\r\n        total_orders: 0,\r\n        orders_change: 0,\r\n        avg_order_value: 0,\r\n        avg_change: 0,\r\n        total_customers: 0,\r\n        customers_change: 0\r\n      },\r\n\r\n      productRankings: [],\r\n      dailyData: [],\r\n      selectedDay: null,\r\n\r\n      trendChart: null,\r\n      distributionChart: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadStatistics();\r\n  },\r\n  beforeDestroy() {\r\n    if (this.trendChart) {\r\n      this.trendChart.destroy();\r\n    }\r\n    if (this.distributionChart) {\r\n      this.distributionChart.destroy();\r\n    }\r\n  },\r\n  methods: {\r\n    formatNumber(num) {\r\n      if (!num) return '0';\r\n      if (num >= 10000) {\r\n        return (num / 10000).toFixed(1) + 'ä¸‡';\r\n      }\r\n      return num.toLocaleString();\r\n    },\r\n\r\n    getChangeClass(change) {\r\n      if (change > 0) return 'positive';\r\n      if (change < 0) return 'negative';\r\n      return 'neutral';\r\n    },\r\n\r\n    getRankClass(rank) {\r\n      if (rank === 1) return 'first';\r\n      if (rank === 2) return 'second';\r\n      if (rank === 3) return 'third';\r\n      return 'other';\r\n    },\r\n\r\n    formatDateRange() {\r\n      const start = new Date(this.startDate);\r\n      const end = new Date(this.endDate);\r\n\r\n      if (this.dateRange === 'custom') {\r\n        return `${start.toLocaleDateString('zh-CN')} - ${end.toLocaleDateString('zh-CN')}`;\r\n      }\r\n\r\n      const ranges = {\r\n        'week': 'æœ€è¿‘7å¤©',\r\n        'month': 'æœ€è¿‘30å¤©',\r\n        'quarter': 'æœ€è¿‘3ä¸ªæœˆ',\r\n        'year': 'ä»Šå¹´'\r\n      };\r\n\r\n      return ranges[this.dateRange] || 'æœ€è¿‘7å¤©';\r\n    },\r\n\r\n    // è·å–å•†å®¶ID\r\n    getBusinessId() {\r\n      const businessInfo = JSON.parse(localStorage.getItem('businessInfo'));\r\n      if (!businessInfo) return null;\r\n      return businessInfo.bid || businessInfo.id;\r\n    },\r\n\r\n    // ä¿®æ”¹loadStatisticsæ–¹æ³•ï¼Œä½¿ç”¨apiConfig\r\n    async loadStatistics() {\r\n      this.loading = true;\r\n      const businessInfo = JSON.parse(localStorage.getItem('businessInfo'));\r\n      const bid = businessInfo?.bid || businessInfo?.id;\r\n\r\n      if (!bid) {\r\n        console.error('æœªæ‰¾åˆ°å•†å®¶ä¿¡æ¯');\r\n        this.$router.push('/business/login');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // 1. è·å–å•†å“æ•°æ® - ä½¿ç”¨apiConfig\r\n        const productsResponse = await axios.get(apiConfig.business.getProducts(bid));\r\n        let products = [];\r\n        if (productsResponse.data.code === 1) {\r\n          products = productsResponse.data.data || [];\r\n        }\r\n\r\n        // 2. è·å–è®¢å•æ•°æ® - ä½¿ç”¨apiConfig\r\n        const ordersResponse = await axios.get(apiConfig.business.getOrders(bid));\r\n        let orders = [];\r\n        if (ordersResponse.data.code === 1) {\r\n          orders = ordersResponse.data.data || [];\r\n        }\r\n\r\n        // 3. è®¡ç®—ç»Ÿè®¡æ¦‚è§ˆ\r\n        const totalSales = orders.reduce((sum, order) => sum + (order.amount || 0), 0);\r\n        const totalOrders = orders.length;\r\n        const avgOrderValue = totalOrders > 0 ? (totalSales / totalOrders).toFixed(2) : 0;\r\n\r\n        // è®¡ç®—å˜åŒ–ç‡ï¼ˆä½¿ç”¨çœŸå®æ•°æ®ï¼Œæ¯”è¾ƒå½“å‰ä¸å‰ä¸€å‘¨æœŸï¼‰\r\n        // åˆå§‹åŒ–å˜åŒ–ç‡ä¸º0\r\n        this.stats = {\r\n          total_sales: totalSales,\r\n          sales_change: 0, // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\r\n          total_orders: totalOrders,\r\n          orders_change: 0, // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\r\n          avg_order_value: avgOrderValue,\r\n          avg_change: 0, // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\r\n          total_customers: new Set(orders.map(order => order.uid)).size,\r\n          customers_change: 0 // åˆå§‹åŒ–ä¸º0ï¼Œå®é™…é¡¹ç›®ä¸­åº”æ ¹æ®å†å²æ•°æ®è®¡ç®—\r\n        };\r\n\r\n        // 4. è·å–é”€å”®è¶‹åŠ¿ - æ ¹æ®æ—¥æœŸèŒƒå›´ç¡®å®šå¤©æ•°\r\n        let days = 7;\r\n        if (this.dateRange === 'month') {\r\n          days = 30;\r\n        } else if (this.dateRange === 'quarter') {\r\n          days = 90;\r\n        } else if (this.dateRange === 'year') {\r\n          days = 365;\r\n        } else if (this.dateRange === 'custom') {\r\n          // è®¡ç®—è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´å†…çš„å¤©æ•°\r\n          const start = new Date(this.startDate);\r\n          const end = new Date(this.endDate);\r\n          days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\r\n        }\r\n        const trendData = await this.calculateSalesTrend(bid, days);\r\n        this.renderTrendChart(trendData);\r\n\r\n        // 5. è·å–å•†å“æ’è¡Œ\r\n        this.productRankings = products\r\n            .filter(p => p.status === 1)\r\n            .sort((a, b) => (b.sales_count || 0) - (a.sales_count || 0))\r\n            .slice(0, 10)\r\n            .map((product, index) => ({\r\n              id: product.pid,\r\n              name: product.name,\r\n              sku: `SKU${product.pid}`,\r\n              sales_amount: (product.price || 0) * (product.sales_count || 0),\r\n              orders_count: product.sales_count || 0,\r\n              percentage: 0\r\n            }));\r\n\r\n        // è®¡ç®—å æ¯”\r\n        const totalProductSales = this.productRankings.reduce((sum, p) => sum + p.sales_amount, 0);\r\n        this.productRankings = this.productRankings.map(p => ({\r\n          ...p,\r\n          percentage: totalProductSales > 0 ? ((p.sales_amount / totalProductSales) * 100).toFixed(1) : '0.0'\r\n        }));\r\n\r\n        // 6. ç”Ÿæˆè®¢å•çŠ¶æ€åˆ†å¸ƒ\r\n        const statusDistribution = {\r\n          labels: ['å¾…ä»˜æ¬¾', 'å¾…å‘è´§', 'å·²å‘è´§', 'å·²å®Œæˆ', 'å·²å–æ¶ˆ'],\r\n          values: [0, 0, 0, 0, 0]\r\n        };\r\n\r\n        orders.forEach(order => {\r\n          if (order.status >= 0 && order.status <= 4) {\r\n            statusDistribution.values[order.status]++;\r\n          }\r\n        });\r\n        this.renderDistributionChart(statusDistribution);\r\n\r\n        // 7. ç”Ÿæˆæ¯æ—¥æ•°æ®\r\n        this.generateDailyData(orders);\r\n\r\n      } catch (error) {\r\n        console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);\r\n        this.useMockData();\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // æ·»åŠ calculateSalesTrendæ–¹æ³•\r\n    async calculateSalesTrend(bid, days) {\r\n      try {\r\n        // è·å–è®¢å•æ•°æ®\r\n        const ordersResponse = await axios.get(apiConfig.business.getOrders(bid));\r\n        let orders = [];\r\n        if (ordersResponse.data.code === 1) {\r\n          orders = ordersResponse.data.data || [];\r\n        }\r\n\r\n        // ç”Ÿæˆé”€å”®æ•°æ®çš„æ—¥æœŸèŒƒå›´\r\n        const labels = [];\r\n        const sales = [];\r\n        const ordersCount = [];\r\n        const customersCount = [];\r\n\r\n        let startDate, endDate;\r\n        \r\n        // æ ¹æ®æ—¥æœŸèŒƒå›´ç±»å‹ç¡®å®šèµ·å§‹å’Œç»“æŸæ—¥æœŸ\r\n        if (this.dateRange === 'custom') {\r\n          // ä½¿ç”¨è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´\r\n          startDate = new Date(this.startDate);\r\n          endDate = new Date(this.endDate);\r\n        } else {\r\n          // ä½¿ç”¨ç›¸å¯¹æ—¥æœŸèŒƒå›´\r\n          endDate = new Date();\r\n          startDate = new Date(endDate.getTime() - (days - 1) * 24 * 60 * 60 * 1000);\r\n        }\r\n\r\n        // ç”Ÿæˆæ—¥æœŸèŒƒå›´å†…çš„æ¯ä¸€å¤©æ•°æ®\r\n        const currentDate = new Date(startDate);\r\n        while (currentDate <= endDate) {\r\n          const dateStr = `${currentDate.getMonth() + 1}/${currentDate.getDate()}`;\r\n          labels.push(dateStr);\r\n\r\n          // è¿‡æ»¤å½“å¤©çš„è®¢å•\r\n          const dayOrders = orders.filter(order => {\r\n            const orderDate = new Date(order.orderTime);\r\n            return orderDate.toDateString() === currentDate.toDateString();\r\n          });\r\n\r\n          sales.push(dayOrders.reduce((sum, order) => sum + (order.amount || 0), 0));\r\n          ordersCount.push(dayOrders.length);\r\n          customersCount.push(new Set(dayOrders.map(order => order.uid)).size);\r\n\r\n          // ç§»åŠ¨åˆ°ä¸‹ä¸€å¤©\r\n          currentDate.setDate(currentDate.getDate() + 1);\r\n        }\r\n\r\n        return {\r\n          labels,\r\n          sales,\r\n          orders: ordersCount,\r\n          customers: customersCount\r\n        };\r\n      } catch (error) {\r\n        console.error('è·å–é”€å”®è¶‹åŠ¿å¤±è´¥:', error);\r\n        // å‘ç”Ÿé”™è¯¯æ—¶è¿”å›ç©ºæ•°æ®ï¼Œä¸ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\r\n        return {\r\n          labels: [],\r\n          sales: [],\r\n          orders: [],\r\n          customers: []\r\n        };\r\n      }\r\n    },\r\n\r\n    // ä¿®æ”¹generateDailyDataæ–¹æ³•ï¼Œæ ¹æ®startDateå’ŒendDateç”Ÿæˆæ•°æ®ï¼Œåªæ˜¾ç¤ºæœ‰é”€å”®é¢çš„æ—¥æœŸ\r\n    generateDailyData(orders) {\r\n      const today = new Date();\r\n      let startDate, endDate;\r\n\r\n      // æ ¹æ®dateRangeç¡®å®šæ—¥æœŸèŒƒå›´\r\n      if (this.dateRange === 'custom') {\r\n        startDate = new Date(this.startDate);\r\n        endDate = new Date(this.endDate);\r\n      } else {\r\n        // é»˜è®¤ç”Ÿæˆæœ€è¿‘7å¤©çš„æ•°æ®\r\n        endDate = today;\r\n        startDate = new Date(today.getTime() - 6 * 24 * 60 * 60 * 1000);\r\n      }\r\n\r\n      const tempData = [];\r\n\r\n      // è®¡ç®—æ—¥æœŸèŒƒå›´å†…çš„æ€»å¤©æ•°\r\n      const daysDiff = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n      // ç”Ÿæˆæ—¥æœŸèŒƒå›´å†…çš„æ•°æ®\r\n      for (let i = 0; i < daysDiff; i++) {\r\n        const date = new Date(startDate);\r\n        date.setDate(startDate.getDate() + i);\r\n        const dayStr = date.toLocaleDateString('zh-CN', { month: '2-digit', day: '2-digit' });\r\n\r\n        // è¿‡æ»¤å½“å¤©çš„è®¢å•\r\n        const dayOrders = orders.filter(order => {\r\n          const orderDate = new Date(order.orderTime);\r\n          return orderDate.toDateString() === date.toDateString();\r\n        });\r\n\r\n        const sales = dayOrders.reduce((sum, order) => sum + (order.amount || 0), 0);\r\n        const customers = new Set(dayOrders.map(order => order.uid)).size;\r\n\r\n        // åªæ·»åŠ é”€å”®é¢å¤§äº0çš„æ•°æ®\r\n        if (sales > 0) {\r\n          tempData.push({\r\n            date: dayStr,\r\n            sales: sales,\r\n            orders: dayOrders.length,\r\n            customers: customers,\r\n            avg_order_value: dayOrders.length > 0 ? Math.round(sales / dayOrders.length) : 0,\r\n            // è½¬åŒ–ç‡ï¼šè®¢å•æ•° / é¡¾å®¢æ•° * 100%ï¼ˆå³æ¯ä¸ªé¡¾å®¢å¹³å‡ä¸‹å•æ•°ç™¾åˆ†æ¯”ï¼‰\r\n            // å®é™…é¡¹ç›®ä¸­åº”ä»åç«¯è·å–çœŸå®çš„è®¿å®¢æ•°æ®ï¼Œè¿™é‡Œä½¿ç”¨è´­ä¹°é¡¾å®¢æ•°ä½œä¸ºæ›¿ä»£\r\n            conversion_rate: customers > 0 ? ((dayOrders.length / customers) * 100).toFixed(1) : '0.0'\r\n          });\r\n        }\r\n      }\r\n\r\n      // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œæ·»åŠ æç¤ºä¿¡æ¯\r\n      if (tempData.length === 0) {\r\n        this.dailyData = [];\r\n      } else {\r\n        this.dailyData = tempData;\r\n      }\r\n    },\r\n\r\n    renderTrendChart(data) {\r\n      const ctx = this.$refs.trendChart;\r\n      if (!ctx) return;\r\n\r\n      if (this.trendChart) {\r\n        this.trendChart.destroy();\r\n      }\r\n\r\n      const chartType = this.chartType === 'bar' ? 'bar' : 'line';\r\n\r\n      let dataSet;\r\n      if (this.dataType === 'sales' && data.sales) {\r\n        dataSet = {\r\n          label: 'é”€å”®é¢',\r\n          data: data.sales,\r\n          borderColor: '#667eea',\r\n          backgroundColor: chartType === 'bar' ? '#667eea' : 'rgba(102, 126, 234, 0.1)',\r\n          yAxisID: 'y'\r\n        };\r\n      } else if (this.dataType === 'orders' && data.orders) {\r\n        dataSet = {\r\n          label: 'è®¢å•æ•°',\r\n          data: data.orders,\r\n          borderColor: '#ed8936',\r\n          backgroundColor: chartType === 'bar' ? '#ed8936' : 'rgba(237, 137, 54, 0.1)',\r\n          yAxisID: 'y1'\r\n        };\r\n      } else if (this.dataType === 'customers' && data.customers) {\r\n        dataSet = {\r\n          label: 'é¡¾å®¢æ•°',\r\n          data: data.customers,\r\n          borderColor: '#48bb78',\r\n          backgroundColor: chartType === 'bar' ? '#48bb78' : 'rgba(72, 187, 120, 0.1)',\r\n          yAxisID: 'y1'\r\n        };\r\n      } else {\r\n        // é»˜è®¤æ˜¾ç¤ºé”€å”®é¢ï¼Œä½¿ç”¨ç©ºæ•°æ®\r\n        dataSet = {\r\n          label: 'é”€å”®é¢',\r\n          data: data.values || data.sales || [],\r\n          borderColor: '#667eea',\r\n          backgroundColor: chartType === 'bar' ? '#667eea' : 'rgba(102, 126, 234, 0.1)',\r\n          yAxisID: 'y'\r\n        };\r\n      }\r\n\r\n      const chartData = {\r\n        labels: data.labels || data.dates || [],\r\n        datasets: [{\r\n          ...dataSet,\r\n          borderWidth: chartType === 'bar' ? 0 : 2,\r\n          fill: chartType !== 'bar',\r\n          tension: 0.4\r\n        }]\r\n      };\r\n\r\n      this.trendChart = new Chart(ctx, {\r\n        type: chartType,\r\n        data: chartData,\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: true,\r\n              position: 'top'\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              type: 'linear',\r\n              display: this.dataType === 'sales',\r\n              position: 'left',\r\n              beginAtZero: true,\r\n              grid: {\r\n                color: 'rgba(0, 0, 0, 0.05)'\r\n              },\r\n              ticks: {\r\n                callback: function(value) {\r\n                  return 'Â¥' + value;\r\n                }\r\n              }\r\n            },\r\n            y1: {\r\n              type: 'linear',\r\n              display: this.dataType !== 'sales',\r\n              position: 'right',\r\n              beginAtZero: true,\r\n              grid: {\r\n                drawOnChartArea: false,\r\n              }\r\n            },\r\n            x: {\r\n              grid: {\r\n                color: 'rgba(0, 0, 0, 0.05)'\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    renderDistributionChart(data) {\r\n      const ctx = this.$refs.distributionChart;\r\n      if (!ctx) return;\r\n\r\n      if (this.distributionChart) {\r\n        this.distributionChart.destroy();\r\n      }\r\n\r\n      const chartData = {\r\n        labels: data.labels || [],\r\n        datasets: [{\r\n          data: data.values || [],\r\n          backgroundColor: [\r\n            '#ff9800',\r\n            '#2196f3',\r\n            '#4caf50',\r\n            '#9c27b0',\r\n            '#f44336'\r\n          ],\r\n          borderWidth: 0\r\n        }]\r\n      };\r\n\r\n      this.distributionChart = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: chartData,\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              position: 'right'\r\n            }\r\n          },\r\n          cutout: '70%'\r\n        }\r\n      });\r\n    },\r\n\r\n    // åˆ é™¤æ¨¡æ‹Ÿæ•°æ®ï¼Œæ”¹ä¸ºä½¿ç”¨ç©ºæ•°æ®\r\n    useMockData() {\r\n      // åªæœ‰åœ¨APIè°ƒç”¨å¤±è´¥æ—¶ä½¿ç”¨ç©ºæ•°æ®\r\n      this.stats = {\r\n        total_sales: 0,\r\n        sales_change: 0,\r\n        total_orders: 0,\r\n        orders_change: 0,\r\n        avg_order_value: 0,\r\n        avg_change: 0,\r\n        total_customers: 0,\r\n        customers_change: 0\r\n      };\r\n\r\n      this.productRankings = [];\r\n      this.dailyData = [];\r\n\r\n      // æ¸²æŸ“ç©ºå›¾è¡¨ï¼Œä¸ä½¿ç”¨ä»»ä½•æ¨¡æ‹Ÿæ•°æ®\r\n      setTimeout(() => {\r\n        this.renderTrendChart({\r\n          labels: [],\r\n          values: []\r\n        });\r\n\r\n        this.renderDistributionChart({\r\n          labels: [],\r\n          values: []\r\n        });\r\n      }, 100);\r\n    },\r\n\r\n    viewAllProducts() {\r\n      this.$router.push('/business/products');\r\n    },\r\n\r\n    viewDayDetail(day) {\r\n      // è¿™é‡Œå¯ä»¥è°ƒç”¨APIè·å–å½“æ—¥è¯¦æƒ…\r\n      this.selectedDay = {\r\n        ...day,\r\n        order_details: [] // å®é™…é¡¹ç›®ä¸­åº”è¯¥ä»APIè·å–\r\n      };\r\n    },\r\n\r\n    exportStatistics() {\r\n      // å¯¼å‡ºç»Ÿè®¡æŠ¥è¡¨\r\n      const data = {\r\n        ç»Ÿè®¡æ—¶é—´æ®µ: this.formatDateRange(),\r\n        æ€»é”€å”®é¢: `Â¥${this.formatNumber(this.stats.total_sales)}`,\r\n        æ€»è®¢å•æ•°: this.stats.total_orders,\r\n        æ€»é¡¾å®¢æ•°: this.stats.total_customers,\r\n        å®¢å•ä»·: `Â¥${this.stats.avg_order_value}`,\r\n        é”€å”®é¢å˜åŒ–: `${this.stats.sales_change > 0 ? '+' : ''}${this.stats.sales_change}%`,\r\n        è®¢å•å˜åŒ–: `${this.stats.orders_change > 0 ? '+' : ''}${this.stats.orders_change}%`\r\n      };\r\n\r\n      const csvContent = \"data:text/csv;charset=utf-8,\"\r\n          + Object.entries(data).map(([key, value]) => `${key},${value}`).join(\"\\n\");\r\n\r\n      const encodedUri = encodeURI(csvContent);\r\n      const link = document.createElement(\"a\");\r\n      link.setAttribute(\"href\", encodedUri);\r\n      link.setAttribute(\"download\", `é”€å”®ç»Ÿè®¡_${new Date().toLocaleDateString()}.csv`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    }\r\n  },\r\n  watch: {\r\n    dateRange() {\r\n      const today = new Date();\r\n      let startDate;\r\n\r\n      switch (this.dateRange) {\r\n        case 'week':\r\n          startDate = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case 'month':\r\n          startDate = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case 'quarter':\r\n          startDate = new Date(today.getTime() - 90 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case 'year':\r\n          startDate = new Date(today.getFullYear(), 0, 1);\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      this.startDate = startDate.toISOString().split('T')[0];\r\n      this.endDate = today.toISOString().split('T')[0];\r\n\r\n      if (this.dateRange !== 'custom') {\r\n        this.loadStatistics();\r\n      }\r\n    },\r\n\r\n    // æ·»åŠ æ—¥æœŸéªŒè¯ï¼Œç¡®ä¿æ—¥æœŸèŒƒå›´æœ‰æ•ˆ\r\n    startDate(newVal, oldVal) {\r\n      if (this.dateRange === 'custom') {\r\n        // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ—©äº1900å¹´\r\n        const minDate = new Date('1900-01-01');\r\n        const startDate = new Date(newVal);\r\n        if (startDate < minDate) {\r\n          this.startDate = '1900-01-01';\r\n          return;\r\n        }\r\n        \r\n        // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ™šäºç»“æŸæ—¥æœŸ\r\n        const endDate = new Date(this.endDate);\r\n        if (startDate > endDate) {\r\n          this.startDate = this.endDate;\r\n          return;\r\n        }\r\n        \r\n        this.loadStatistics();\r\n      }\r\n    },\r\n\r\n    endDate(newVal, oldVal) {\r\n      if (this.dateRange === 'custom') {\r\n        // ç¡®ä¿ç»“æŸæ—¥æœŸä¸æ—©äºå¼€å§‹æ—¥æœŸ\r\n        const startDate = new Date(this.startDate);\r\n        const endDate = new Date(newVal);\r\n        if (endDate < startDate) {\r\n          this.endDate = this.startDate;\r\n          return;\r\n        }\r\n        \r\n        // ç¡®ä¿ç»“æŸæ—¥æœŸä¸æ™šäºä»Šå¤©\r\n        const today = new Date();\r\n        if (endDate > today) {\r\n          this.endDate = today.toISOString().split('T')[0];\r\n          return;\r\n        }\r\n        \r\n        this.loadStatistics();\r\n      }\r\n    },\r\n\r\n    chartType() {\r\n      if (this.trendChart) {\r\n        this.loadStatistics();\r\n      }\r\n    },\r\n\r\n    dataType() {\r\n      if (this.trendChart) {\r\n        this.loadStatistics();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.merchant-statistics {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 16px;\r\n}\r\n\r\n.page-header h2 {\r\n  margin: 0;\r\n  font-size: 24px;\r\n  color: #2d3748;\r\n  font-weight: 700;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-select {\r\n    padding: 10px 16px;\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 0;\r\n    background: white;\r\n    color: #4a5568;\r\n    font-size: 14px;\r\n    min-width: 120px;\r\n  }\r\n\r\n.custom-date {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.custom-date input {\r\n    padding: 8px 12px;\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 0;\r\n    font-size: 14px;\r\n  }\r\n\r\n.custom-date span {\r\n  color: #718096;\r\n  font-size: 14px;\r\n}\r\n\r\n.btn-export {\r\n    padding: 10px 20px;\r\n    background: #48bb78;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 0;\r\n    cursor: pointer;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    font-weight: 500;\r\n    transition: background 0.3s;\r\n  }\r\n\r\n.btn-export:hover {\r\n  background: #38a169;\r\n}\r\n\r\n.export-icon {\r\n  font-size: 16px;\r\n}\r\n\r\n.stats-overview {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.overview-card {\r\n    background: white;\r\n    border-radius: 0;\r\n    padding: 24px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 20px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\r\n    transition: transform 0.3s;\r\n  }\r\n\r\n.overview-card:hover {\r\n  transform: translateY(-4px);\r\n}\r\n\r\n.overview-icon {\r\n    width: 64px;\r\n    height: 64px;\r\n    border-radius: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 28px;\r\n  }\r\n\r\n.overview-icon.sales {\r\n  background: linear-gradient(135deg, #4299e1, #3182ce);\r\n  color: white;\r\n}\r\n\r\n.overview-icon.orders {\r\n  background: linear-gradient(135deg, #ed8936, #dd6b20);\r\n  color: white;\r\n}\r\n\r\n.overview-icon.avg {\r\n  background: linear-gradient(135deg, #9f7aea, #805ad5);\r\n  color: white;\r\n}\r\n\r\n.overview-icon.customers {\r\n  background: linear-gradient(135deg, #48bb78, #38a169);\r\n  color: white;\r\n}\r\n\r\n.overview-content {\r\n  flex: 1;\r\n}\r\n\r\n.overview-value {\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  color: #2d3748;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.overview-label {\r\n  font-size: 14px;\r\n  color: #718096;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.overview-change {\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    padding: 4px 8px;\r\n    border-radius: 0;\r\n    display: inline-block;\r\n  }\r\n\r\n.overview-change.positive {\r\n  background: #c6f6d5;\r\n  color: #22543d;\r\n}\r\n\r\n.overview-change.negative {\r\n  background: #fed7d7;\r\n  color: #c53030;\r\n}\r\n\r\n.overview-change.neutral {\r\n  background: #e2e8f0;\r\n  color: #4a5568;\r\n}\r\n\r\n.chart-section {\r\n    background: white;\r\n    border-radius: 0;\r\n    padding: 24px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  }\r\n\r\n.chart-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chart-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.chart-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.chart-select {\r\n    padding: 8px 12px;\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 0;\r\n    background: white;\r\n    color: #4a5568;\r\n    font-size: 14px;\r\n  }\r\n\r\n.chart-container {\r\n  height: 400px;\r\n  position: relative;\r\n}\r\n\r\n.ranking-section {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr;\r\n  gap: 24px;\r\n}\r\n\r\n@media (max-width: 1024px) {\r\n  .ranking-section {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n.ranking-card {\r\n    background: white;\r\n    border-radius: 0;\r\n    padding: 24px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  }\r\n\r\n.ranking-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.ranking-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.btn-view-all {\r\n    padding: 8px 16px;\r\n    background: #667eea;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 0;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: background 0.3s;\r\n  }\r\n\r\n.btn-view-all:hover {\r\n  background: #5a67d8;\r\n}\r\n\r\n.ranking-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.ranking-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.ranking-table th {\r\n  background: #f8fafc;\r\n  padding: 12px;\r\n  text-align: left;\r\n  font-weight: 600;\r\n  color: #4a5568;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  white-space: nowrap;\r\n}\r\n\r\n.ranking-table td {\r\n  padding: 12px;\r\n  border-bottom: 1px solid #f7fafc;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ranking-table tbody tr:hover {\r\n  background: #f8fafc;\r\n}\r\n\r\n.rank-badge {\r\n    width: 28px;\r\n    height: 28px;\r\n    border-radius: 0;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-weight: 600;\r\n    font-size: 13px;\r\n  }\r\n\r\n.rank-badge.first {\r\n  background: #f6e05e;\r\n  color: #744210;\r\n}\r\n\r\n.rank-badge.second {\r\n  background: #e2e8f0;\r\n  color: #4a5568;\r\n}\r\n\r\n.rank-badge.third {\r\n  background: #fed7d7;\r\n  color: #c53030;\r\n}\r\n\r\n.rank-badge.other {\r\n  background: #f7fafc;\r\n  color: #718096;\r\n}\r\n\r\n.product-info {\r\n  max-width: 200px;\r\n}\r\n\r\n.product-name {\r\n  font-weight: 500;\r\n  color: #2d3748;\r\n  margin-bottom: 2px;\r\n  line-height: 1.4;\r\n}\r\n\r\n.product-sku {\r\n  font-size: 12px;\r\n  color: #718096;\r\n}\r\n\r\n.sales-amount {\r\n  font-weight: 600;\r\n  color: #667eea;\r\n}\r\n\r\n.orders-count {\r\n  font-weight: 500;\r\n  color: #4a5568;\r\n}\r\n\r\n.percentage {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.percentage-bar {\r\n    flex: 1;\r\n    height: 8px;\r\n    background: #e2e8f0;\r\n    border-radius: 0;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .percentage-fill {\r\n    height: 100%;\r\n    background: linear-gradient(90deg, #667eea, #764ba2);\r\n    border-radius: 0;\r\n  }\r\n\r\n.percentage-value {\r\n  font-size: 13px;\r\n  color: #718096;\r\n  min-width: 40px;\r\n}\r\n\r\n.distribution-chart {\r\n  height: 300px;\r\n  position: relative;\r\n}\r\n\r\n.detail-section {\r\n    background: white;\r\n    border-radius: 0;\r\n    padding: 24px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  }\r\n\r\n.detail-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.detail-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.date-range-info {\r\n  color: #718096;\r\n  font-size: 14px;\r\n}\r\n\r\n.detail-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.detail-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.detail-table th {\r\n  background: #f8fafc;\r\n  padding: 12px;\r\n  text-align: left;\r\n  font-weight: 600;\r\n  color: #4a5568;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  white-space: nowrap;\r\n}\r\n\r\n.detail-table td {\r\n  padding: 12px;\r\n  border-bottom: 1px solid #f7fafc;\r\n}\r\n\r\n.detail-table tbody tr:hover {\r\n  background: #f8fafc;\r\n}\r\n\r\n.btn-detail {\r\n    padding: 6px 12px;\r\n    background: #e2e8f0;\r\n    color: #4a5568;\r\n    border: none;\r\n    border-radius: 0;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: background 0.3s;\r\n  }\r\n\r\n.btn-detail:hover {\r\n  background: #cbd5e0;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  color: #a0aec0;\r\n  padding: 40px 0;\r\n}\r\n\r\n/* æ¨¡æ€æ¡†æ ·å¼ */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  padding: 20px;\r\n}\r\n\r\n.modal {\r\n    background: white;\r\n    width: 100%;\r\n    max-width: 600px;\r\n    max-height: 90vh;\r\n    overflow-y: auto;\r\n    border-radius: 0;\r\n  }\r\n\r\n.modal-lg {\r\n  max-width: 800px;\r\n}\r\n\r\n.modal-header {\r\n  padding: 20px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.modal-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #718096;\r\n    cursor: pointer;\r\n    width: 32px;\r\n    height: 32px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 0;\r\n    transition: background 0.3s;\r\n  }\r\n\r\n.modal-close:hover {\r\n  background: #f7fafc;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n.day-detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.day-stats {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n    gap: 20px;\r\n    padding: 20px;\r\n    background: #f8fafc;\r\n    border-radius: 0;\r\n  }\r\n\r\n.stat-item {\r\n    text-align: center;\r\n    padding: 16px;\r\n    background: white;\r\n    border-radius: 0;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n  }\r\n\r\n.stat-value {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: #667eea;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 14px;\r\n  color: #718096;\r\n}\r\n\r\n.day-orders h4 {\r\n  margin: 0 0 16px 0;\r\n  font-size: 16px;\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.orders-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.order-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 12px 16px;\r\n    background: #f8fafc;\r\n    border-radius: 0;\r\n    border-left: 4px solid #667eea;\r\n  }\r\n\r\n.order-id {\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n  flex: 1;\r\n}\r\n\r\n.order-amount {\r\n  font-weight: 700;\r\n  color: #667eea;\r\n  flex: 1;\r\n}\r\n\r\n.order-status {\r\n    padding: 4px 12px;\r\n    background: #c6f6d5;\r\n    color: #22543d;\r\n    border-radius: 0;\r\n    font-size: 12px;\r\n    font-weight: 500;\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n\r\n.order-time {\r\n  color: #718096;\r\n  font-size: 14px;\r\n  flex: 1;\r\n  text-align: right;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .page-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  .header-actions {\r\n    width: 100%;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n\r\n  .custom-date {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n\r\n  .stats-overview {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .order-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 8px;\r\n  }\r\n\r\n  .order-id, .order-amount, .order-status, .order-time {\r\n    flex: none;\r\n    width: 100%;\r\n  }\r\n\r\n  .order-time {\r\n    text-align: left;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}